import{$ as ze,$a as $i,A as Be,Aa as Xc,Ab as dl,B as Rr,Ba as Yc,Bb as fi,C as kr,Ca as Kc,Cb as ul,D as Qt,Da as Zc,Db as de,E as Pc,Ea as Qc,Eb as Re,F as Lc,Fa as Jc,Fb as hl,G as Ue,Ga as tl,Gb as zr,H as Me,Ha as Nt,Hb as pl,I as Dr,Ia as el,Ib as ml,J as Oc,Ja as zi,Jb as it,K as Fc,Ka as K,Kb as Xn,L as Nc,La as Or,Lb as fl,M as jn,Ma as Fr,Mb as gl,N as Bn,Na as Hn,Nb as Yn,O as Jt,Oa as Vn,Ob as bl,P as li,Pa as il,Pb as vl,Q as lt,Qa as nl,Qb as Hi,R as st,Ra as sl,Rb as yl,S as P,Sa as tt,Sb as _l,T as rt,Ta as at,Tb as $r,U as jc,Ua as Mt,Ub as wl,V as G,Va as rl,W as Pr,Wa as te,X as q,Xa as Wt,Y as w,Ya as Gn,Z as Fi,Za as al,_ as Bc,_a as ol,a as S,aa as ge,ab as Rt,b as ct,ba as Ni,bb as wt,ca as Un,cb as Ge,d as Ne,da as zn,db as kt,e as C,ea as Lr,eb as ce,f as Li,fa as Uc,fb as Nr,g as Rc,ga as ji,gb as z,h as Sr,ha as $e,hb as B,i as Cr,ia as zc,ib as dt,j as Tr,ja as $c,jb as Wn,k as Ht,ka as Hc,kb as cl,l as St,la as be,lb as hi,m as Te,ma as gt,mb as ve,n as Vt,na as He,nb as le,o as k,oa as Vc,ob as Dt,p as je,pa as It,pb as jr,q as Ir,qa as Gc,qb as Br,r as kc,ra as $n,rb as pi,s as F,sa as Wc,sb as mi,t as Oi,ta as Ve,tb as qn,u as Gt,ua as oe,ub as At,v as Nn,va as Bi,vb as We,w as Mr,wa as qc,wb as qe,x as Dc,xa as Ui,xb as Xe,y as fe,ya as di,yb as ll,z as Ie,za as ui,zb as Ur}from"./chunk-NOFT67S4.js";var Vr=class{};var gi=class s{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let n=t.slice(0,i),r=t.slice(i+1).trim();this.addHeaderEntry(n,r)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new s;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof s?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let n=(e.op==="a"?this.headers.get(t):void 0)||[];n.push(...i),this.headers.set(t,n);break;case"d":let r=e.value;if(!r)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(o=>r.indexOf(o)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(r=>r.toString()),n=e.toLowerCase();this.headers.set(n,i),this.maybeSetNormalizedName(e,n)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Gr=class{encodeKey(e){return Al(e)}encodeValue(e){return Al(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Hu(s,e){let t=new Map;return s.length>0&&s.replace(/^\?/,"").split("&").forEach(n=>{let r=n.indexOf("="),[a,o]=r==-1?[e.decodeKey(n),""]:[e.decodeKey(n.slice(0,r)),e.decodeValue(n.slice(r+1))],c=t.get(a)||[];c.push(o),t.set(a,c)}),t}var Vu=/%(\d[a-f0-9])/gi,Gu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Al(s){return encodeURIComponent(s).replace(Vu,(e,t)=>Gu[t]??e)}function Kn(s){return`${s}`}var ke=class s{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Gr,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Hu(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],n=Array.isArray(i)?i.map(Kn):[Kn(i)];this.map.set(t,n)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let n=e[i];Array.isArray(n)?n.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:n,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new s({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Kn(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],n=i.indexOf(Kn(e.value));n!==-1&&i.splice(n,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Wr=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Wu(s){switch(s){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function xl(s){return typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer}function El(s){return typeof Blob<"u"&&s instanceof Blob}function Sl(s){return typeof FormData<"u"&&s instanceof FormData}function qu(s){return typeof URLSearchParams<"u"&&s instanceof URLSearchParams}var Vi=class s{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,n){this.url=t,this.method=e.toUpperCase();let r;if(Wu(this.method)||n?(this.body=i!==void 0?i:null,r=n):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new gi,this.context??=new Wr,!this.params)this.params=new ke,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let o=t.indexOf("?"),c=o===-1?"?":o<t.length-1?"&":"";this.urlWithParams=t+c+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||xl(this.body)||El(this.body)||Sl(this.body)||qu(this.body)?this.body:this.body instanceof ke?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Sl(this.body)?null:El(this.body)?this.body.type||null:xl(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ke?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,n=e.responseType||this.responseType,r=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,o=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),d)),new s(t,i,a,{params:d,headers:l,context:u,reportProgress:c,responseType:n,withCredentials:o,transferCache:r})}},Cl=function(s){return s[s.Sent=0]="Sent",s[s.UploadProgress=1]="UploadProgress",s[s.ResponseHeader=2]="ResponseHeader",s[s.DownloadProgress=3]="DownloadProgress",s[s.Response=4]="Response",s[s.User=5]="User",s}(Cl||{}),qr=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new gi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Xr=class s extends qr{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Cl.Response;clone(e={}){return new s({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function Hr(s,e){return{body:e,headers:s.headers,context:s.context,observe:s.observe,params:s.params,reportProgress:s.reportProgress,responseType:s.responseType,withCredentials:s.withCredentials,transferCache:s.transferCache}}var Tl=(()=>{class s{handler;constructor(t){this.handler=t}request(t,i,n={}){let r;if(t instanceof Vi)r=t;else{let c;n.headers instanceof gi?c=n.headers:c=new gi(n.headers);let l;n.params&&(n.params instanceof ke?l=n.params:l=new ke({fromObject:n.params})),r=new Vi(t,i,n.body!==void 0?n.body:null,{headers:c,context:n.context,params:l,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials,transferCache:n.transferCache})}let a=k(r).pipe(Be(c=>this.handler.handle(c)));if(t instanceof Vi||n.observe==="events")return a;let o=a.pipe(fe(c=>c instanceof Xr));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(F(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return o.pipe(F(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return o.pipe(F(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return o.pipe(F(c=>c.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new ke().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,n={}){return this.request("PATCH",t,Hr(n,i))}post(t,i,n={}){return this.request("POST",t,Hr(n,i))}put(t,i,n={}){return this.request("PUT",t,Hr(n,i))}static \u0275fac=function(i){return new(i||s)(q(Vr))};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})();var Kr=class extends ml{supportsDOMEvents=!0},Zr=class s extends Kr{static makeCurrent(){pl(new s)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Ku();return t==null?null:Zu(t)}resetBaseElement(){Gi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fl(document.cookie,e)}},Gi=null;function Ku(){return Gi=Gi||document.querySelector("base"),Gi?Gi.getAttribute("href"):null}function Zu(s){return new URL(s,document.baseURI).pathname}var Qu=(()=>{class s{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})(),Qr=new G(""),Ll=(()=>{class s{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(n=>{n.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,n){return this._findPluginFor(i).addEventListener(t,i,n)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(r=>r.supports(t)),!i)throw new st(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||s)(q(Qr),q(gt))};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})(),Qn=class{_doc;constructor(e){this._doc=e}manager},Zn="ng-app-id";function Il(s){for(let e of s)e.remove()}function Ml(s,e){let t=e.createElement("style");return t.textContent=s,t}function Ju(s,e,t,i){let n=s.head?.querySelectorAll(`style[${Zn}="${e}"],link[${Zn}="${e}"]`);if(n)for(let r of n)r.removeAttribute(Zn),r instanceof HTMLLinkElement?i.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&t.set(r.textContent,{usage:0,elements:[r]})}function Jr(s,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",s),t}var Ol=(()=>{class s{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,n,r={}){this.doc=t,this.appId=i,this.nonce=n,this.isServer=$r(r),Ju(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let n of t)this.addUsage(n,this.inline,Ml);i?.forEach(n=>this.addUsage(n,this.external,Jr))}removeStyles(t,i){for(let n of t)this.removeUsage(n,this.inline);i?.forEach(n=>this.removeUsage(n,this.external))}addUsage(t,i,n){let r=i.get(t);r?r.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,n(t,this.doc)))})}removeUsage(t,i){let n=i.get(t);n&&(n.usage--,n.usage<=0&&(Il(n.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Il(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:n}]of this.inline)n.push(this.addElement(t,Ml(i,this.doc)));for(let[i,{elements:n}]of this.external)n.push(this.addElement(t,Jr(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(Zn,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||s)(q(it),q($n),q(Bi,8),q(Ve))};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})(),Yr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ea=/%COMP%/g,Fl="%COMP%",th=`_nghost-${Fl}`,eh=`_ngcontent-${Fl}`,ih=!0,nh=new G("",{providedIn:"root",factory:()=>ih});function sh(s){return eh.replace(ea,s)}function rh(s){return th.replace(ea,s)}function Nl(s,e){return e.map(t=>t.replace(ea,s))}var Jn=(()=>{class s{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,n,r,a,o,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=n,this.removeStylesOnCompDestroy=r,this.doc=a,this.platformId=o,this.ngZone=c,this.nonce=l,this.platformIsServer=$r(o),this.defaultRenderer=new Wi(t,a,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ui.ShadowDom&&(i=ct(S({},i),{encapsulation:Ui.Emulated}));let n=this.getOrCreateRenderer(t,i);return n instanceof ts?n.applyToHost(t):n instanceof qi&&n.applyStyles(),n}getOrCreateRenderer(t,i){let n=this.rendererByCompId,r=n.get(i.id);if(!r){let a=this.doc,o=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(i.encapsulation){case Ui.Emulated:r=new ts(c,l,i,this.appId,d,a,o,u);break;case Ui.ShadowDom:return new ta(c,l,t,i,a,o,this.nonce,u);default:r=new qi(c,l,i,d,a,o,u);break}n.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(i){return new(i||s)(q(Ll),q(Ol),q($n),q(nh),q(it),q(Ve),q(gt),q(Bi))};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})(),Wi=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,n){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=n}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Yr[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Rl(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Rl(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new st(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,n){if(n){t=n+":"+t;let r=Yr[n];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let n=Yr[i];n?e.removeAttributeNS(n,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,n){n&(zi.DashCase|zi.Important)?e.style.setProperty(t,i,n&zi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&zi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=zr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Rl(s){return s.tagName==="TEMPLATE"&&s.content!==void 0}var ta=class extends Wi{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,n,r,a,o,c){super(e,r,a,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Nl(n.id,n.styles);for(let u of l){let h=document.createElement("style");o&&h.setAttribute("nonce",o),h.textContent=u,this.shadowRoot.appendChild(h)}let d=n.getExternalStyles?.();if(d)for(let u of d){let h=Jr(u,r);o&&h.setAttribute("nonce",o),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qi=class extends Wi{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,n,r,a,o,c){super(e,r,a,o),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=n,this.styles=c?Nl(c,i.styles):i.styles,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ts=class extends qi{contentAttr;hostAttr;constructor(e,t,i,n,r,a,o,c){let l=n+"-"+i.id;super(e,t,i,r,a,o,c,l),this.contentAttr=sh(l),this.hostAttr=rh(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},ah=(()=>{class s extends Qn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,n){return t.addEventListener(i,n,!1),()=>this.removeEventListener(t,i,n)}removeEventListener(t,i,n){return t.removeEventListener(i,n)}static \u0275fac=function(i){return new(i||s)(q(it))};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})(),kl=["alt","control","meta","shift"],oh={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ch={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey},lh=(()=>{class s extends Qn{constructor(t){super(t)}supports(t){return s.parseEventName(t)!=null}addEventListener(t,i,n){let r=s.parseEventName(i),a=s.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zr().onAndCancel(t,r.domEventName,a))}static parseEventName(t){let i=t.toLowerCase().split("."),n=i.shift();if(i.length===0||!(n==="keydown"||n==="keyup"))return null;let r=s._normalizeKey(i.pop()),a="",o=i.indexOf("code");if(o>-1&&(i.splice(o,1),a="code."),kl.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=r,i.length!=0||r.length===0)return null;let c={};return c.domEventName=n,c.fullKey=a,c}static matchEventFullKeyCode(t,i){let n=oh[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(n=t.code,r="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),kl.forEach(a=>{if(a!==n){let o=ch[a];o(t)&&(r+=a+".")}}),r+=n,r===i)}static eventCallback(t,i,n){return r=>{s.matchEventFullKeyCode(r,t)&&n.runGuarded(()=>i(r))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||s)(q(it))};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})();function jl(s,e){return ul(S({rootComponent:s},dh(e)))}function dh(s){return{appProviders:[...fh,...s?.providers??[]],platformProviders:mh}}function uh(){Zr.makeCurrent()}function hh(){return new He}function ph(){return Gc(document),document}var mh=[{provide:Ve,useValue:yl},{provide:Wc,useValue:uh,multi:!0},{provide:it,useFactory:ph,deps:[]}];var fh=[{provide:Bc,useValue:"root"},{provide:He,useFactory:hh,deps:[]},{provide:Qr,useClass:ah,multi:!0,deps:[it,gt,Ve]},{provide:Qr,useClass:lh,multi:!0,deps:[it]},Jn,Ol,Ll,{provide:Hn,useExisting:Jn},{provide:wl,useClass:Qu,deps:[]},[]];var Bl=(()=>{class s{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||s)(q(it))};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var ia=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:function(i){let n=null;return i?n=new(i||s):n=q(gh),n},providedIn:"root"})}return s})(),gh=(()=>{class s extends ia{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Nt.NONE:return i;case Nt.HTML:return ui(i,"HTML")?di(i):tl(this._doc,String(i)).toString();case Nt.STYLE:return ui(i,"Style")?di(i):i;case Nt.SCRIPT:if(ui(i,"Script"))return di(i);throw new st(5200,!1);case Nt.URL:return ui(i,"URL")?di(i):Jc(String(i));case Nt.RESOURCE_URL:if(ui(i,"ResourceURL"))return di(i);throw new st(5201,!1);default:throw new st(5202,!1)}}bypassSecurityTrustHtml(t){return Xc(t)}bypassSecurityTrustStyle(t){return Yc(t)}bypassSecurityTrustScript(t){return Kc(t)}bypassSecurityTrustUrl(t){return Zc(t)}bypassSecurityTrustResourceUrl(t){return Qc(t)}static \u0275fac=function(i){return new(i||s)(q(it))};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var N="primary",un=Symbol("RouteTitle"),oa=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ai(s){return new oa(s)}function yh(s,e,t){let i=t.path.split("/");if(i.length>s.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<s.length))return null;let n={};for(let r=0;r<i.length;r++){let a=i[r],o=s[r];if(a[0]===":")n[a.substring(1)]=o;else if(a!==o.path)return null}return{consumed:s.slice(0,i.length),posParams:n}}function _h(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;++t)if(!ue(s[t],e[t]))return!1;return!0}function ue(s,e){let t=s?ca(s):void 0,i=e?ca(e):void 0;if(!t||!i||t.length!=i.length)return!1;let n;for(let r=0;r<t.length;r++)if(n=t[r],!Xl(s[n],e[n]))return!1;return!0}function ca(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}function Xl(s,e){if(Array.isArray(s)&&Array.isArray(e)){if(s.length!==e.length)return!1;let t=[...s].sort(),i=[...e].sort();return t.every((n,r)=>i[r]===n)}else return s===e}function Yl(s){return s.length>0?s[s.length-1]:null}function De(s){return Ir(s)?s:al(s)?Vt(Promise.resolve(s)):k(s)}var wh={exact:Zl,subset:Ql},Kl={exact:Ah,subset:xh,ignored:()=>!0};function zl(s,e,t){return wh[t.paths](s.root,e.root,t.matrixParams)&&Kl[t.queryParams](s.queryParams,e.queryParams)&&!(t.fragment==="exact"&&s.fragment!==e.fragment)}function Ah(s,e){return ue(s,e)}function Zl(s,e,t){if(!Ke(s.segments,e.segments)||!ns(s.segments,e.segments,t)||s.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!s.children[i]||!Zl(s.children[i],e.children[i],t))return!1;return!0}function xh(s,e){return Object.keys(e).length<=Object.keys(s).length&&Object.keys(e).every(t=>Xl(s[t],e[t]))}function Ql(s,e,t){return Jl(s,e,e.segments,t)}function Jl(s,e,t,i){if(s.segments.length>t.length){let n=s.segments.slice(0,t.length);return!(!Ke(n,t)||e.hasChildren()||!ns(n,t,i))}else if(s.segments.length===t.length){if(!Ke(s.segments,t)||!ns(s.segments,t,i))return!1;for(let n in e.children)if(!s.children[n]||!Ql(s.children[n],e.children[n],i))return!1;return!0}else{let n=t.slice(0,s.segments.length),r=t.slice(s.segments.length);return!Ke(s.segments,n)||!ns(s.segments,n,i)||!s.children[N]?!1:Jl(s.children[N],e,r,i)}}function ns(s,e,t){return e.every((i,n)=>Kl[t](s[n].parameters,i.parameters))}var _e=class{root;queryParams;fragment;_queryParamMap;constructor(e=new X([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ai(this.queryParams),this._queryParamMap}toString(){return Ch.serialize(this)}},X=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ss(this)}},Ye=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ai(this.parameters),this._parameterMap}toString(){return ed(this)}};function Eh(s,e){return Ke(s,e)&&s.every((t,i)=>ue(t.parameters,e[i].parameters))}function Ke(s,e){return s.length!==e.length?!1:s.every((t,i)=>t.path===e[i].path)}function Sh(s,e){let t=[];return Object.entries(s.children).forEach(([i,n])=>{i===N&&(t=t.concat(e(n,i)))}),Object.entries(s.children).forEach(([i,n])=>{i!==N&&(t=t.concat(e(n,i)))}),t}var La=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:()=>new tn,providedIn:"root"})}return s})(),tn=class{parse(e){let t=new da(e);return new _e(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Xi(e.root,!0)}`,i=Mh(e.queryParams),n=typeof e.fragment=="string"?`#${Th(e.fragment)}`:"";return`${t}${i}${n}`}},Ch=new tn;function ss(s){return s.segments.map(e=>ed(e)).join("/")}function Xi(s,e){if(!s.hasChildren())return ss(s);if(e){let t=s.children[N]?Xi(s.children[N],!1):"",i=[];return Object.entries(s.children).forEach(([n,r])=>{n!==N&&i.push(`${n}:${Xi(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Sh(s,(i,n)=>n===N?[Xi(s.children[N],!1)]:[`${n}:${Xi(i,!1)}`]);return Object.keys(s.children).length===1&&s.children[N]!=null?`${ss(s)}/${t[0]}`:`${ss(s)}/(${t.join("//")})`}}function td(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function es(s){return td(s).replace(/%3B/gi,";")}function Th(s){return encodeURI(s)}function la(s){return td(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rs(s){return decodeURIComponent(s)}function $l(s){return rs(s.replace(/\+/g,"%20"))}function ed(s){return`${la(s.path)}${Ih(s.parameters)}`}function Ih(s){return Object.entries(s).map(([e,t])=>`;${la(e)}=${la(t)}`).join("")}function Mh(s){let e=Object.entries(s).map(([t,i])=>Array.isArray(i)?i.map(n=>`${es(t)}=${es(n)}`).join("&"):`${es(t)}=${es(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Rh=/^[^\/()?;#]+/;function na(s){let e=s.match(Rh);return e?e[0]:""}var kh=/^[^\/()?;=#]+/;function Dh(s){let e=s.match(kh);return e?e[0]:""}var Ph=/^[^=?&#]+/;function Lh(s){let e=s.match(Ph);return e?e[0]:""}var Oh=/^[^&#]+/;function Fh(s){let e=s.match(Oh);return e?e[0]:""}var da=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[N]=new X(e,t)),i}parseSegment(){let e=na(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new st(4009,!1);return this.capture(e),new Ye(rs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Dh(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let n=na(this.remaining);n&&(i=n,this.capture(i))}e[rs(t)]=rs(i)}parseQueryParam(e){let t=Lh(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=Fh(this.remaining);a&&(i=a,this.capture(i))}let n=$l(t),r=$l(i);if(e.hasOwnProperty(n)){let a=e[n];Array.isArray(a)||(a=[a],e[n]=a),a.push(r)}else e[n]=r}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=na(this.remaining),n=this.remaining[i.length];if(n!=="/"&&n!==")"&&n!==";")throw new st(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=N);let a=this.parseChildren();t[r]=Object.keys(a).length===1?a[N]:new X([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new st(4011,!1)}};function id(s){return s.segments.length>0?new X([],{[N]:s}):s}function nd(s){let e={};for(let[i,n]of Object.entries(s.children)){let r=nd(n);if(i===N&&r.segments.length===0&&r.hasChildren())for(let[a,o]of Object.entries(r.children))e[a]=o;else(r.segments.length>0||r.hasChildren())&&(e[i]=r)}let t=new X(s.segments,e);return Nh(t)}function Nh(s){if(s.numberOfChildren===1&&s.children[N]){let e=s.children[N];return new X(s.segments.concat(e.segments),e.children)}return s}function en(s){return s instanceof _e}function jh(s,e,t=null,i=null){let n=sd(s);return rd(n,e,t,i)}function sd(s){let e;function t(r){let a={};for(let c of r.children){let l=t(c);a[c.outlet]=l}let o=new X(r.url,a);return r===s&&(e=o),o}let i=t(s.root),n=id(i);return e??n}function rd(s,e,t,i){let n=s;for(;n.parent;)n=n.parent;if(e.length===0)return sa(n,n,n,t,i);let r=Bh(e);if(r.toRoot())return sa(n,n,new X([],{}),t,i);let a=Uh(r,n,s),o=a.processChildren?Zi(a.segmentGroup,a.index,r.commands):od(a.segmentGroup,a.index,r.commands);return sa(n,a.segmentGroup,o,t,i)}function as(s){return typeof s=="object"&&s!=null&&!s.outlets&&!s.segmentPath}function nn(s){return typeof s=="object"&&s!=null&&s.outlets}function sa(s,e,t,i,n){let r={};i&&Object.entries(i).forEach(([c,l])=>{r[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let a;s===e?a=t:a=ad(s,e,t);let o=id(nd(a));return new _e(o,r,n)}function ad(s,e,t){let i={};return Object.entries(s.children).forEach(([n,r])=>{r===e?i[n]=t:i[n]=ad(r,e,t)}),new X(s.segments,i)}var os=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&as(i[0]))throw new st(4003,!1);let n=i.find(nn);if(n&&n!==Yl(i))throw new st(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Bh(s){if(typeof s[0]=="string"&&s.length===1&&s[0]==="/")return new os(!0,0,s);let e=0,t=!1,i=s.reduce((n,r,a)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let o={};return Object.entries(r.outlets).forEach(([c,l])=>{o[c]=typeof l=="string"?l.split("/"):l}),[...n,{outlets:o}]}if(r.segmentPath)return[...n,r.segmentPath]}return typeof r!="string"?[...n,r]:a===0?(r.split("/").forEach((o,c)=>{c==0&&o==="."||(c==0&&o===""?t=!0:o===".."?e++:o!=""&&n.push(o))}),n):[...n,r]},[]);return new os(t,e,i)}var yi=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Uh(s,e,t){if(s.isAbsolute)return new yi(e,!0,0);if(!t)return new yi(e,!1,NaN);if(t.parent===null)return new yi(t,!0,0);let i=as(s.commands[0])?0:1,n=t.segments.length-1+i;return zh(t,n,s.numberOfDoubleDots)}function zh(s,e,t){let i=s,n=e,r=t;for(;r>n;){if(r-=n,i=i.parent,!i)throw new st(4005,!1);n=i.segments.length}return new yi(i,!1,n-r)}function $h(s){return nn(s[0])?s[0].outlets:{[N]:s}}function od(s,e,t){if(s??=new X([],{}),s.segments.length===0&&s.hasChildren())return Zi(s,e,t);let i=Hh(s,e,t),n=t.slice(i.commandIndex);if(i.match&&i.pathIndex<s.segments.length){let r=new X(s.segments.slice(0,i.pathIndex),{});return r.children[N]=new X(s.segments.slice(i.pathIndex),s.children),Zi(r,0,n)}else return i.match&&n.length===0?new X(s.segments,{}):i.match&&!s.hasChildren()?ua(s,e,t):i.match?Zi(s,0,n):ua(s,e,t)}function Zi(s,e,t){if(t.length===0)return new X(s.segments,{});{let i=$h(t),n={};if(Object.keys(i).some(r=>r!==N)&&s.children[N]&&s.numberOfChildren===1&&s.children[N].segments.length===0){let r=Zi(s.children[N],e,t);return new X(s.segments,r.children)}return Object.entries(i).forEach(([r,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(n[r]=od(s.children[r],e,a))}),Object.entries(s.children).forEach(([r,a])=>{i[r]===void 0&&(n[r]=a)}),new X(s.segments,n)}}function Hh(s,e,t){let i=0,n=e,r={match:!1,pathIndex:0,commandIndex:0};for(;n<s.segments.length;){if(i>=t.length)return r;let a=s.segments[n],o=t[i];if(nn(o))break;let c=`${o}`,l=i<t.length-1?t[i+1]:null;if(n>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Vl(c,l,a))return r;i+=2}else{if(!Vl(c,{},a))return r;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}function ua(s,e,t){let i=s.segments.slice(0,e),n=0;for(;n<t.length;){let r=t[n];if(nn(r)){let c=Vh(r.outlets);return new X(i,c)}if(n===0&&as(t[0])){let c=s.segments[e];i.push(new Ye(c.path,Hl(t[0]))),n++;continue}let a=nn(r)?r.outlets[N]:`${r}`,o=n<t.length-1?t[n+1]:null;a&&o&&as(o)?(i.push(new Ye(a,Hl(o))),n+=2):(i.push(new Ye(a,{})),n++)}return new X(i,{})}function Vh(s){let e={};return Object.entries(s).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=ua(new X([],{}),0,i))}),e}function Hl(s){let e={};return Object.entries(s).forEach(([t,i])=>e[t]=`${i}`),e}function Vl(s,e,t){return s==t.path&&ue(e,t.parameters)}var Qi="imperative",xt=function(s){return s[s.NavigationStart=0]="NavigationStart",s[s.NavigationEnd=1]="NavigationEnd",s[s.NavigationCancel=2]="NavigationCancel",s[s.NavigationError=3]="NavigationError",s[s.RoutesRecognized=4]="RoutesRecognized",s[s.ResolveStart=5]="ResolveStart",s[s.ResolveEnd=6]="ResolveEnd",s[s.GuardsCheckStart=7]="GuardsCheckStart",s[s.GuardsCheckEnd=8]="GuardsCheckEnd",s[s.RouteConfigLoadStart=9]="RouteConfigLoadStart",s[s.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",s[s.ChildActivationStart=11]="ChildActivationStart",s[s.ChildActivationEnd=12]="ChildActivationEnd",s[s.ActivationStart=13]="ActivationStart",s[s.ActivationEnd=14]="ActivationEnd",s[s.Scroll=15]="Scroll",s[s.NavigationSkipped=16]="NavigationSkipped",s}(xt||{}),qt=class{id;url;constructor(e,t){this.id=e,this.url=t}},sn=class extends qt{type=xt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",n=null){super(e,t),this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ze=class extends qt{urlAfterRedirects;type=xt.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(s){return s[s.Redirect=0]="Redirect",s[s.SupersededByNewNavigation=1]="SupersededByNewNavigation",s[s.NoDataFromResolver=2]="NoDataFromResolver",s[s.GuardRejected=3]="GuardRejected",s}(Bt||{}),ha=function(s){return s[s.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",s[s.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",s}(ha||{}),ye=class extends qt{reason;code;type=xt.NavigationCancel;constructor(e,t,i,n){super(e,t),this.reason=i,this.code=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qe=class extends qt{reason;code;type=xt.NavigationSkipped;constructor(e,t,i,n){super(e,t),this.reason=i,this.code=n}},rn=class extends qt{error;target;type=xt.NavigationError;constructor(e,t,i,n){super(e,t),this.error=i,this.target=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},cs=class extends qt{urlAfterRedirects;state;type=xt.RoutesRecognized;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pa=class extends qt{urlAfterRedirects;state;type=xt.GuardsCheckStart;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ma=class extends qt{urlAfterRedirects;state;shouldActivate;type=xt.GuardsCheckEnd;constructor(e,t,i,n,r){super(e,t),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},fa=class extends qt{urlAfterRedirects;state;type=xt.ResolveStart;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ga=class extends qt{urlAfterRedirects;state;type=xt.ResolveEnd;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ba=class{route;type=xt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},va=class{route;type=xt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ya=class{snapshot;type=xt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_a=class{snapshot;type=xt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wa=class{snapshot;type=xt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Aa=class{snapshot;type=xt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var an=class{},xi=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Gh(s,e){return s.providers&&!s._injector&&(s._injector=sl(s.providers,e,`Route: ${s.path}`)),s._injector??e}function ee(s){return s.outlet||N}function Wh(s,e){let t=s.filter(i=>ee(i)===e);return t.push(...s.filter(i=>ee(i)!==e)),t}function hn(s){if(!s)return null;if(s.routeConfig?._injector)return s.routeConfig._injector;for(let e=s.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var xa=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return hn(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new fs(this.rootInjector)}},fs=(()=>{class s{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let n=this.getOrCreateContext(t);n.outlet=i,this.contexts.set(t,n)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new xa(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||s)(q(ze))};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),ls=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ea(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Ea(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Sa(e,this._root);return t.length<2?[]:t[t.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return Sa(e,this._root).map(t=>t.value)}};function Ea(s,e){if(s===e.value)return e;for(let t of e.children){let i=Ea(s,t);if(i)return i}return null}function Sa(s,e){if(s===e.value)return[e];for(let t of e.children){let i=Sa(s,t);if(i.length)return i.unshift(e),i}return[]}var jt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function vi(s){let e={};return s&&s.children.forEach(t=>e[t.value.outlet]=t),e}var ds=class extends ls{snapshot;constructor(e,t){super(e),this.snapshot=t,Oa(this,e)}toString(){return this.snapshot.toString()}};function cd(s){let e=qh(s),t=new St([new Ye("",{})]),i=new St({}),n=new St({}),r=new St({}),a=new St(""),o=new Ei(t,i,r,a,n,N,s,e.root);return o.snapshot=e.root,new ds(new jt(o,[]),e)}function qh(s){let e={},t={},i={},n="",r=new _i([],e,i,n,t,N,s,null,{});return new hs("",new jt(r,[]))}var Ei=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,n,r,a,o,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=n,this.dataSubject=r,this.outlet=a,this.component=o,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(F(l=>l[un]))??k(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(F(e=>Ai(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(F(e=>Ai(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function us(s,e,t="emptyOnly"){let i,{routeConfig:n}=s;return e!==null&&(t==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:S(S({},e.params),s.params),data:S(S({},e.data),s.data),resolve:S(S(S(S({},s.data),e.data),n?.data),s._resolvedData)}:i={params:S({},s.params),data:S({},s.data),resolve:S(S({},s.data),s._resolvedData??{})},n&&dd(n)&&(i.resolve[un]=n.title),i}var _i=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[un]}constructor(e,t,i,n,r,a,o,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=r,this.outlet=a,this.component=o,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ai(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ai(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},hs=class extends ls{url;constructor(e,t){super(t),this.url=e,Oa(this,t)}toString(){return ld(this._root)}};function Oa(s,e){e.value._routerState=s,e.children.forEach(t=>Oa(s,t))}function ld(s){let e=s.children.length>0?` { ${s.children.map(ld).join(", ")} } `:"";return`${s.value}${e}`}function ra(s){if(s.snapshot){let e=s.snapshot,t=s._futureSnapshot;s.snapshot=t,ue(e.queryParams,t.queryParams)||s.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&s.fragmentSubject.next(t.fragment),ue(e.params,t.params)||s.paramsSubject.next(t.params),_h(e.url,t.url)||s.urlSubject.next(t.url),ue(e.data,t.data)||s.dataSubject.next(t.data)}else s.snapshot=s._futureSnapshot,s.dataSubject.next(s._futureSnapshot.data)}function Ca(s,e){let t=ue(s.params,e.params)&&Eh(s.url,e.url),i=!s.parent!=!e.parent;return t&&!i&&(!s.parent||Ca(s.parent,e.parent))}function dd(s){return typeof s.title=="string"||s.title===null}var Xh=new G(""),Yh=(()=>{class s{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=N;activateEvents=new be;deactivateEvents=new be;attachEvents=new be;detachEvents=new be;routerOutletData=Vc(void 0);parentContexts=w(fs);location=w(il);changeDetector=w(fi);inputBinder=w(Fa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:n}=t.name;if(i)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new st(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new st(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new st(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new st(4013,!1);this._activatedRoute=t;let n=this.location,a=t.snapshot.component,o=this.parentContexts.getOrCreateContext(this.name).children,c=new Ta(t,o,n.injector,this.routerOutletData);this.activated=n.createComponent(a,{index:n.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ni]})}return s})(),Ta=class s{route;childContexts;parent;outletData;__ngOutletInjector(e){return new s(this.route,this.childContexts,e,this.outletData)}constructor(e,t,i,n){this.route=e,this.childContexts=t,this.parent=i,this.outletData=n}get(e,t){return e===Ei?this.route:e===fs?this.childContexts:e===Xh?this.outletData:this.parent.get(e,t)}},Fa=new G("");function Kh(s,e,t){let i=on(s,e._root,t?t._root:void 0);return new ds(i,e)}function on(s,e,t){if(t&&s.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let n=Zh(s,e,t);return new jt(i,n)}else{if(s.shouldAttach(e.value)){let r=s.retrieve(e.value);if(r!==null){let a=r.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(o=>on(s,o)),a}}let i=Qh(e.value),n=e.children.map(r=>on(s,r));return new jt(i,n)}}function Zh(s,e,t){return e.children.map(i=>{for(let n of t.children)if(s.shouldReuseRoute(i.value,n.value.snapshot))return on(s,i,n);return on(s,i)})}function Qh(s){return new Ei(new St(s.url),new St(s.params),new St(s.queryParams),new St(s.fragment),new St(s.data),s.outlet,s.component,s)}var cn=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ud="ngNavigationCancelingError";function ps(s,e){let{redirectTo:t,navigationBehaviorOptions:i}=en(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=hd(!1,Bt.Redirect);return n.url=t,n.navigationBehaviorOptions=i,n}function hd(s,e){let t=new Error(`NavigationCancelingError: ${s||""}`);return t[ud]=!0,t.cancellationCode=e,t}function Jh(s){return pd(s)&&en(s.url)}function pd(s){return!!s&&s[ud]}var tp=(s,e,t,i)=>F(n=>(new Ia(e,n.targetRouterState,n.currentRouterState,t,i).activate(s),n)),Ia=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=n,this.inputBindingEnabled=r}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),ra(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let n=vi(t);e.children.forEach(r=>{let a=r.value.outlet;this.deactivateRoutes(r,n[a],i),delete n[a]}),Object.values(n).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){let n=e.value,r=t?t.value:null;if(n===r)if(n.component){let a=i.getContext(n.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),n=i&&e.value.component?i.children:t,r=vi(e);for(let a of Object.values(r))this.deactivateRouteAndItsChildren(a,n);if(i&&i.outlet){let a=i.outlet.detach(),o=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:o})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),n=i&&e.value.component?i.children:t,r=vi(e);for(let a of Object.values(r))this.deactivateRouteAndItsChildren(a,n);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let n=vi(t);e.children.forEach(r=>{this.activateRoutes(r,n[r.value.outlet],i),this.forwardEvent(new Aa(r.value.snapshot))}),e.children.length&&this.forwardEvent(new _a(e.value.snapshot))}activateRoutes(e,t,i){let n=e.value,r=t?t.value:null;if(ra(n),n===r)if(n.component){let a=i.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(n.component){let a=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let o=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),a.children.onOutletReAttached(o.contexts),a.attachRef=o.componentRef,a.route=o.route.value,a.outlet&&a.outlet.attach(o.componentRef,o.route.value),ra(o.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=n,a.outlet&&a.outlet.activateWith(n,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},ms=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},wi=class{component;route;constructor(e,t){this.component=e,this.route=t}};function ep(s,e,t){let i=s._root,n=e?e._root:null;return Yi(i,n,t,[i.value])}function ip(s){let e=s.routeConfig?s.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:s,guards:e}}function Ci(s,e){let t=Symbol(),i=e.get(s,t);return i===t?typeof s=="function"&&!jc(s)?s:e.get(s):i}function Yi(s,e,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let r=vi(e);return s.children.forEach(a=>{np(a,r[a.value.outlet],t,i.concat([a.value]),n),delete r[a.value.outlet]}),Object.entries(r).forEach(([a,o])=>Ji(o,t.getContext(a),n)),n}function np(s,e,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let r=s.value,a=e?e.value:null,o=t?t.getContext(s.value.outlet):null;if(a&&r.routeConfig===a.routeConfig){let c=sp(a,r,r.routeConfig.runGuardsAndResolvers);c?n.canActivateChecks.push(new ms(i)):(r.data=a.data,r._resolvedData=a._resolvedData),r.component?Yi(s,e,o?o.children:null,i,n):Yi(s,e,t,i,n),c&&o&&o.outlet&&o.outlet.isActivated&&n.canDeactivateChecks.push(new wi(o.outlet.component,a))}else a&&Ji(e,o,n),n.canActivateChecks.push(new ms(i)),r.component?Yi(s,null,o?o.children:null,i,n):Yi(s,null,t,i,n);return n}function sp(s,e,t){if(typeof t=="function")return t(s,e);switch(t){case"pathParamsChange":return!Ke(s.url,e.url);case"pathParamsOrQueryParamsChange":return!Ke(s.url,e.url)||!ue(s.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ca(s,e)||!ue(s.queryParams,e.queryParams);case"paramsChange":default:return!Ca(s,e)}}function Ji(s,e,t){let i=vi(s),n=s.value;Object.entries(i).forEach(([r,a])=>{n.component?e?Ji(a,e.children.getContext(r),t):Ji(a,null,t):Ji(a,e,t)}),n.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new wi(e.outlet.component,n)):t.canDeactivateChecks.push(new wi(null,n)):t.canDeactivateChecks.push(new wi(null,n))}function pn(s){return typeof s=="function"}function rp(s){return typeof s=="boolean"}function ap(s){return s&&pn(s.canLoad)}function op(s){return s&&pn(s.canActivate)}function cp(s){return s&&pn(s.canActivateChild)}function lp(s){return s&&pn(s.canDeactivate)}function dp(s){return s&&pn(s.canMatch)}function md(s){return s instanceof kc||s?.name==="EmptyError"}var is=Symbol("INITIAL_VALUE");function Si(){return Jt(s=>Oi(s.map(e=>e.pipe(Qt(1),Bn(is)))).pipe(F(e=>{for(let t of e)if(t!==!0){if(t===is)return is;if(t===!1||up(t))return t}return!0}),fe(e=>e!==is),Qt(1)))}function up(s){return en(s)||s instanceof cn}function hp(s,e){return Gt(t=>{let{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:r,canDeactivateChecks:a}}=t;return a.length===0&&r.length===0?k(ct(S({},t),{guardsResult:!0})):pp(a,i,n,s).pipe(Gt(o=>o&&rp(o)?mp(i,r,s,e):k(o)),F(o=>ct(S({},t),{guardsResult:o})))})}function pp(s,e,t,i){return Vt(s).pipe(Gt(n=>yp(n.component,n.route,t,e,i)),Me(n=>n!==!0,!0))}function mp(s,e,t,i){return Vt(e).pipe(Be(n=>Nn(gp(n.route.parent,i),fp(n.route,i),vp(s,n.path,t),bp(s,n.route,t))),Me(n=>n!==!0,!0))}function fp(s,e){return s!==null&&e&&e(new wa(s)),k(!0)}function gp(s,e){return s!==null&&e&&e(new ya(s)),k(!0)}function bp(s,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return k(!0);let n=i.map(r=>Mr(()=>{let a=hn(e)??t,o=Ci(r,a),c=op(o)?o.canActivate(e,s):ge(a,()=>o(e,s));return De(c).pipe(Me())}));return k(n).pipe(Si())}function vp(s,e,t){let i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(a=>ip(a)).filter(a=>a!==null).map(a=>Mr(()=>{let o=a.guards.map(c=>{let l=hn(a.node)??t,d=Ci(c,l),u=cp(d)?d.canActivateChild(i,s):ge(l,()=>d(i,s));return De(u).pipe(Me())});return k(o).pipe(Si())}));return k(r).pipe(Si())}function yp(s,e,t,i,n){let r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!r||r.length===0)return k(!0);let a=r.map(o=>{let c=hn(e)??n,l=Ci(o,c),d=lp(l)?l.canDeactivate(s,e,t,i):ge(c,()=>l(s,e,t,i));return De(d).pipe(Me())});return k(a).pipe(Si())}function _p(s,e,t,i){let n=e.canLoad;if(n===void 0||n.length===0)return k(!0);let r=n.map(a=>{let o=Ci(a,s),c=ap(o)?o.canLoad(e,t):ge(s,()=>o(e,t));return De(c)});return k(r).pipe(Si(),fd(i))}function fd(s){return Rc(lt(e=>{if(typeof e!="boolean")throw ps(s,e)}),F(e=>e===!0))}function wp(s,e,t,i){let n=e.canMatch;if(!n||n.length===0)return k(!0);let r=n.map(a=>{let o=Ci(a,s),c=dp(o)?o.canMatch(e,t):ge(s,()=>o(e,t));return De(c)});return k(r).pipe(Si(),fd(i))}var ln=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},dn=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function bi(s){return je(new ln(s))}function Ap(s){return je(new st(4e3,!1))}function xp(s){return je(hd(!1,Bt.GuardRejected))}var Ma=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],n=t.root;for(;;){if(i=i.concat(n.segments),n.numberOfChildren===0)return k(i);if(n.numberOfChildren>1||!n.children[N])return Ap(`${e.redirectTo}`);n=n.children[N]}}applyRedirectCommands(e,t,i,n,r){if(typeof t!="string"){let o=t,{queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,params:p,data:m,title:f}=n,b=ge(r,()=>o({params:p,data:m,queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,title:f}));if(b instanceof _e)throw new dn(b);t=b}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new dn(a);return a}applyRedirectCreateUrlTree(e,t,i,n){let r=this.createSegmentGroup(e,t.root,i,n);return new _e(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([n,r])=>{if(typeof r=="string"&&r[0]===":"){let o=r.substring(1);i[n]=t[o]}else i[n]=r}),i}createSegmentGroup(e,t,i,n){let r=this.createSegments(e,t.segments,i,n),a={};return Object.entries(t.children).forEach(([o,c])=>{a[o]=this.createSegmentGroup(e,c,i,n)}),new X(r,a)}createSegments(e,t,i,n){return t.map(r=>r.path[0]===":"?this.findPosParam(e,r,n):this.findOrReturn(r,i))}findPosParam(e,t,i){let n=i[t.path.substring(1)];if(!n)throw new st(4001,!1);return n}findOrReturn(e,t){let i=0;for(let n of t){if(n.path===e.path)return t.splice(i),n;i++}return e}},Ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ep(s,e,t,i,n){let r=gd(s,e,t);return r.matched?(i=Gh(e,i),wp(i,e,t,n).pipe(F(a=>a===!0?r:S({},Ra)))):k(r)}function gd(s,e,t){if(e.path==="**")return Sp(t);if(e.path==="")return e.pathMatch==="full"&&(s.hasChildren()||t.length>0)?S({},Ra):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let n=(e.matcher||yh)(t,s,e);if(!n)return S({},Ra);let r={};Object.entries(n.posParams??{}).forEach(([o,c])=>{r[o]=c.path});let a=n.consumed.length>0?S(S({},r),n.consumed[n.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:n.consumed,remainingSegments:t.slice(n.consumed.length),parameters:a,positionalParamSegments:n.posParams??{}}}function Sp(s){return{matched:!0,parameters:s.length>0?Yl(s).parameters:{},consumedSegments:s,remainingSegments:[],positionalParamSegments:{}}}function Gl(s,e,t,i){return t.length>0&&Ip(s,t,i)?{segmentGroup:new X(e,Tp(i,new X(t,s.children))),slicedSegments:[]}:t.length===0&&Mp(s,t,i)?{segmentGroup:new X(s.segments,Cp(s,t,i,s.children)),slicedSegments:t}:{segmentGroup:new X(s.segments,s.children),slicedSegments:t}}function Cp(s,e,t,i){let n={};for(let r of t)if(gs(s,e,r)&&!i[ee(r)]){let a=new X([],{});n[ee(r)]=a}return S(S({},i),n)}function Tp(s,e){let t={};t[N]=e;for(let i of s)if(i.path===""&&ee(i)!==N){let n=new X([],{});t[ee(i)]=n}return t}function Ip(s,e,t){return t.some(i=>gs(s,e,i)&&ee(i)!==N)}function Mp(s,e,t){return t.some(i=>gs(s,e,i))}function gs(s,e,t){return(s.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Rp(s,e,t){return e.length===0&&!s.children[t]}var ka=class{};function kp(s,e,t,i,n,r,a="emptyOnly"){return new Da(s,e,t,i,n,a,r).recognize()}var Dp=31,Da=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,n,r,a,o){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=n,this.urlTree=r,this.paramsInheritanceStrategy=a,this.urlSerializer=o,this.applyRedirects=new Ma(this.urlSerializer,this.urlTree)}noMatchError(e){return new st(4002,`'${e.segmentGroup}'`)}recognize(){let e=Gl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(F(({children:t,rootSnapshot:i})=>{let n=new jt(i,t),r=new hs("",n),a=jh(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(a),{state:r,tree:a}}))}match(e){let t=new _i([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),N,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,N,t).pipe(F(i=>({children:i,rootSnapshot:t})),Ie(i=>{if(i instanceof dn)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ln?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,n,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,r):this.processSegment(e,t,i,i.segments,n,!0,r).pipe(F(a=>a instanceof jt?[a]:[]))}processChildren(e,t,i,n){let r=[];for(let a of Object.keys(i.children))a==="primary"?r.unshift(a):r.push(a);return Vt(r).pipe(Be(a=>{let o=i.children[a],c=Wh(t,a);return this.processSegmentGroup(e,c,o,a,n)}),Fc((a,o)=>(a.push(...o),a)),kr(null),Oc(),Gt(a=>{if(a===null)return bi(i);let o=bd(a);return Pp(o),k(o)}))}processSegment(e,t,i,n,r,a,o){return Vt(t).pipe(Be(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,n,r,a,o).pipe(Ie(l=>{if(l instanceof ln)return k(null);throw l}))),Me(c=>!!c),Ie(c=>{if(md(c))return Rp(i,n,r)?k(new ka):bi(i);throw c}))}processSegmentAgainstRoute(e,t,i,n,r,a,o,c){return ee(i)!==a&&(a===N||!gs(n,r,i))?bi(n):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,i,r,a,c):this.allowRedirects&&o?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,i,r,a,c):bi(n)}expandSegmentAgainstRouteUsingRedirect(e,t,i,n,r,a,o){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=gd(t,n,r);if(!c)return bi(t);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Dp&&(this.allowRedirects=!1));let p=new _i(r,l,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Wl(n),ee(n),n.component??n._loadedComponent??null,n,ql(n)),m=us(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let f=this.applyRedirects.applyRedirectCommands(d,n.redirectTo,u,p,e);return this.applyRedirects.lineralizeSegments(n,f).pipe(Gt(b=>this.processSegment(e,i,t,b.concat(h),a,!1,o)))}matchSegmentAgainstRoute(e,t,i,n,r,a){let o=Ep(t,i,n,e,this.urlSerializer);return i.path==="**"&&(t.children={}),o.pipe(Jt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,n).pipe(Jt(({routes:l})=>{let d=i._loadedInjector??e,{parameters:u,consumedSegments:h,remainingSegments:p}=c,m=new _i(h,u,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Wl(i),ee(i),i.component??i._loadedComponent??null,i,ql(i)),f=us(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(f.params),m.data=Object.freeze(f.data);let{segmentGroup:b,slicedSegments:g}=Gl(t,h,p,l);if(g.length===0&&b.hasChildren())return this.processChildren(d,l,b,m).pipe(F(y=>new jt(m,y)));if(l.length===0&&g.length===0)return k(new jt(m,[]));let v=ee(i)===r;return this.processSegment(d,l,b,g,v?N:r,!0,m).pipe(F(y=>new jt(m,y instanceof jt?[y]:[])))}))):bi(t)))}getChildConfig(e,t,i){return t.children?k({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?k({routes:t._loadedRoutes,injector:t._loadedInjector}):_p(e,t,i,this.urlSerializer).pipe(Gt(n=>n?this.configLoader.loadChildren(e,t).pipe(lt(r=>{t._loadedRoutes=r.routes,t._loadedInjector=r.injector})):xp(t))):k({routes:[],injector:e})}};function Pp(s){s.sort((e,t)=>e.value.outlet===N?-1:t.value.outlet===N?1:e.value.outlet.localeCompare(t.value.outlet))}function Lp(s){let e=s.value.routeConfig;return e&&e.path===""}function bd(s){let e=[],t=new Set;for(let i of s){if(!Lp(i)){e.push(i);continue}let n=e.find(r=>i.value.routeConfig===r.value.routeConfig);n!==void 0?(n.children.push(...i.children),t.add(n)):e.push(i)}for(let i of t){let n=bd(i.children);e.push(new jt(i.value,n))}return e.filter(i=>!t.has(i))}function Wl(s){return s.data||{}}function ql(s){return s.resolve||{}}function Op(s,e,t,i,n,r){return Gt(a=>kp(s,e,t,i,a.extractedUrl,n,r).pipe(F(({state:o,tree:c})=>ct(S({},a),{targetSnapshot:o,urlAfterRedirects:c}))))}function Fp(s,e){return Gt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:n}}=t;if(!n.length)return k(t);let r=new Set(n.map(c=>c.route)),a=new Set;for(let c of r)if(!a.has(c))for(let l of vd(c))a.add(l);let o=0;return Vt(a).pipe(Be(c=>r.has(c)?Np(c,i,s,e):(c.data=us(c,c.parent,s).resolve,k(void 0))),lt(()=>o++),Dr(1),Gt(c=>o===a.size?k(t):Te))})}function vd(s){let e=s.children.map(t=>vd(t)).flat();return[s,...e]}function Np(s,e,t,i){let n=s.routeConfig,r=s._resolve;return n?.title!==void 0&&!dd(n)&&(r[un]=n.title),jp(r,s,e,i).pipe(F(a=>(s._resolvedData=a,s.data=us(s,s.parent,t).resolve,null)))}function jp(s,e,t,i){let n=ca(s);if(n.length===0)return k({});let r={};return Vt(n).pipe(Gt(a=>Bp(s[a],e,t,i).pipe(Me(),lt(o=>{if(o instanceof cn)throw ps(new tn,o);r[a]=o}))),Dr(1),Pc(r),Ie(a=>md(a)?Te:je(a)))}function Bp(s,e,t,i){let n=hn(e)??i,r=Ci(s,n),a=r.resolve?r.resolve(e,t):ge(n,()=>r(e,t));return De(a)}function aa(s){return Jt(e=>{let t=s(e);return t?Vt(t).pipe(F(()=>e)):k(e)})}var yd=(()=>{class s{buildTitle(t){let i,n=t.root;for(;n!==void 0;)i=this.getResolvedTitleForRoute(n)??i,n=n.children.find(r=>r.outlet===N);return i}getResolvedTitleForRoute(t){return t.data[un]}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:()=>w(Up),providedIn:"root"})}return s})(),Up=(()=>{class s extends yd{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||s)(q(Bl))};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Na=new G("",{providedIn:"root",factory:()=>({})}),zp=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,n){i&1&&dt(0,"router-outlet")},dependencies:[Yh],encapsulation:2})}return s})();function ja(s){let e=s.children&&s.children.map(ja),t=e?ct(S({},s),{children:e}):S({},s);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==N&&(t.component=zp),t}var Ba=new G(""),$p=(()=>{class s{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(Ur);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=De(t.loadComponent()).pipe(F(_d),lt(r=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=r}),Ue(()=>{this.componentLoaders.delete(t)})),n=new Tr(i,()=>new Ht).pipe(Cr());return this.componentLoaders.set(t,n),n}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return k({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=Hp(i,this.compiler,t,this.onLoadEndListener).pipe(Ue(()=>{this.childrenLoaders.delete(i)})),a=new Tr(r,()=>new Ht).pipe(Cr());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Hp(s,e,t,i){return De(s.loadChildren()).pipe(F(_d),Gt(n=>n instanceof nl||Array.isArray(n)?k(n):Vt(e.compileModuleAsync(n))),F(n=>{i&&i(s);let r,a,o=!1;return Array.isArray(n)?(a=n,o=!0):(r=n.create(t).injector,a=r.get(Ba,[],{optional:!0,self:!0}).flat()),{routes:a.map(ja),injector:r}}))}function Vp(s){return s&&typeof s=="object"&&"default"in s}function _d(s){return Vp(s)?s.default:s}var Ua=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:()=>w(Gp),providedIn:"root"})}return s})(),Gp=(()=>{class s{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Wp=new G("");var qp=new G(""),Xp=(()=>{class s{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ht;transitionAbortSubject=new Ht;configLoader=w($p);environmentInjector=w(ze);urlSerializer=w(La);rootContexts=w(fs);location=w(Xn);inputBindingEnabled=w(Fa,{optional:!0})!==null;titleStrategy=w(yd);options=w(Na,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(Ua);createViewTransition=w(Wp,{optional:!0});navigationErrorHandler=w(qp,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>k(void 0);rootComponentType=null;constructor(){let t=n=>this.events.next(new ba(n)),i=n=>this.events.next(new va(n));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(ct(S(S({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,n){return this.transitions=new St({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Qi,restoredState:null,currentSnapshot:n.snapshot,targetSnapshot:null,currentRouterState:n,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fe(r=>r.id!==0),F(r=>ct(S({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Jt(r=>{let a=!1,o=!1;return k(r).pipe(Jt(c=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Bt.SupersededByNewNavigation),Te;this.currentTransition=r,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ct(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let u="";return this.events.next(new Qe(c.id,this.urlSerializer.serialize(c.rawUrl),u,ha.IgnoredSameUrlNavigation)),c.resolve(!1),Te}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return k(c).pipe(Jt(u=>{let h=this.transitions?.getValue();return this.events.next(new sn(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?Te:Promise.resolve(u)}),Op(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ct(S({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new cs(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:u,extractedUrl:h,source:p,restoredState:m,extras:f}=c,b=new sn(u,this.urlSerializer.serialize(h),p,m);this.events.next(b);let g=cd(this.rootComponentType).snapshot;return this.currentTransition=r=ct(S({},c),{targetSnapshot:g,urlAfterRedirects:h,extras:ct(S({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,k(r)}else{let u="";return this.events.next(new Qe(c.id,this.urlSerializer.serialize(c.extractedUrl),u,ha.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Te}}),lt(c=>{let l=new pa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),F(c=>(this.currentTransition=r=ct(S({},c),{guards:ep(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),r)),hp(this.environmentInjector,c=>this.events.next(c)),lt(c=>{if(r.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw ps(this.urlSerializer,c.guardsResult);let l=new ma(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),fe(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Bt.GuardRejected),!1)),aa(c=>{if(c.guards.canActivateChecks.length)return k(c).pipe(lt(l=>{let d=new fa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Jt(l=>{let d=!1;return k(l).pipe(Fp(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Bt.NoDataFromResolver)}}))}),lt(l=>{let d=new ga(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),aa(c=>{let l=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(lt(h=>{d.component=h}),F(()=>{})));for(let h of d.children)u.push(...l(h));return u};return Oi(l(c.targetSnapshot.root)).pipe(kr(null),Qt(1))}),aa(()=>this.afterPreactivation()),Jt(()=>{let{currentSnapshot:c,targetSnapshot:l}=r,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Vt(d).pipe(F(()=>r)):k(r)}),F(c=>{let l=Kh(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=r=ct(S({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,r}),lt(()=>{this.events.next(new an)}),tp(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Qt(1),lt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ze(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),li(this.transitionAbortSubject.pipe(lt(c=>{throw c}))),Ue(()=>{!a&&!o&&this.cancelNavigationTransition(r,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ie(c=>{if(o=!0,pd(c))this.events.next(new ye(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode)),Jh(c)?this.events.next(new xi(c.url,c.navigationBehaviorOptions)):r.resolve(!1);else{let l=new rn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);try{let d=ge(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof cn){let{message:u,cancellationCode:h}=ps(this.urlSerializer,d);this.events.next(new ye(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new xi(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return Te}))}))}cancelNavigationTransition(t,i,n){let r=new ye(t.id,this.urlSerializer.serialize(t.extractedUrl),i,n);this.events.next(r),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Yp(s){return s!==Qi}var Kp=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:()=>w(Zp),providedIn:"root"})}return s})(),Pa=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Zp=(()=>{class s extends Pa{static \u0275fac=(()=>{let t;return function(n){return(t||(t=ji(s)))(n||s)}})();static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),wd=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:()=>w(Qp),providedIn:"root"})}return s})(),Qp=(()=>{class s extends wd{location=w(Xn);urlSerializer=w(La);options=w(Na,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=w(Ua);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _e;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=cd(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof sn)this.stateMemento=this.createStateMemento();else if(t instanceof Qe)this.rawUrlTree=i.initialUrl;else if(t instanceof cs){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let n=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??n,i)}}else t instanceof an?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof ye&&(t.code===Bt.GuardRejected||t.code===Bt.NoDataFromResolver)?this.restoreHistory(i):t instanceof rn?this.restoreHistory(i,!0):t instanceof Ze&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let n=t instanceof _e?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(n)||i.extras.replaceUrl){let r=this.browserPageId,a=S(S({},i.extras.state),this.generateNgRouterState(i.id,r));this.location.replaceState(n,"",a)}else{let r=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(n,"",r)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,r=this.currentPageId-n;r!==0?this.location.historyGo(r):this.currentUrlTree===t.finalUrl&&r===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(n){return(t||(t=ji(s)))(n||s)}})();static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Ki=function(s){return s[s.COMPLETE=0]="COMPLETE",s[s.FAILED=1]="FAILED",s[s.REDIRECTING=2]="REDIRECTING",s}(Ki||{});function Jp(s,e){s.events.pipe(fe(t=>t instanceof Ze||t instanceof ye||t instanceof rn||t instanceof Qe),F(t=>t instanceof Ze||t instanceof Qe?Ki.COMPLETE:(t instanceof ye?t.code===Bt.Redirect||t.code===Bt.SupersededByNewNavigation:!1)?Ki.REDIRECTING:Ki.FAILED),fe(t=>t!==Ki.REDIRECTING),Qt(1)).subscribe(()=>{e()})}var tm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},em={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ad=(()=>{class s{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(Gn);stateManager=w(wd);options=w(Na,{optional:!0})||{};pendingTasks=w(Hc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(Xp);urlSerializer=w(La);location=w(Xn);urlHandlingStrategy=w(Ua);_events=new Ht;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(Kp);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(Ba,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(Fa,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Li;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let n=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(n!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof ye&&i.code!==Bt.Redirect&&i.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ze)this.navigated=!0;else if(i instanceof xi){let a=i.navigationBehaviorOptions,o=this.urlHandlingStrategy.merge(i.url,n.currentRawUrl),c=S({browserUrl:n.extras.browserUrl,info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:n.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Yp(n.source)},a);this.scheduleNavigation(o,Qi,null,c,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}nm(i)&&this._events.next(i)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,n){let r={replaceUrl:!0},a=n?.navigationId?n:null;if(n){let c=S({},n);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(r.state=c)}let o=this.parseUrl(t);this.scheduleNavigation(o,i,a,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ja),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:n,queryParams:r,fragment:a,queryParamsHandling:o,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(o??this.options.defaultQueryParamsHandling){case"merge":d=S(S({},this.currentUrlTree.queryParams),r);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=r||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=n?n.snapshot:this.routerState.snapshot.root;u=sd(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),u=this.currentUrlTree.root}return rd(u,t,d,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){let n=en(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,Qi,null,i)}navigate(t,i={skipLocationChange:!1}){return im(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let n;if(i===!0?n=S({},tm):i===!1?n=S({},em):n=i,en(t))return zl(this.currentUrlTree,t,n);let r=this.parseUrl(t);return zl(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.entries(t).reduce((i,[n,r])=>(r!=null&&(i[n]=r),i),{})}scheduleNavigation(t,i,n,r,a){if(this.disposed)return Promise.resolve(!1);let o,c,l;a?(o=a.resolve,c=a.reject,l=a.promise):l=new Promise((u,h)=>{o=u,c=h});let d=this.pendingTasks.add();return Jp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:r,resolve:o,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(u=>Promise.reject(u))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function im(s){for(let e=0;e<s.length;e++)if(s[e]==null)throw new st(4008,!1)}function nm(s){return!(s instanceof an)&&!(s instanceof xi)}var sm=new G("");function xd(s,...e){return Fi([{provide:Ba,multi:!0,useValue:s},[],{provide:Ei,useFactory:rm,deps:[Ad]},{provide:ol,multi:!0,useFactory:am},e.map(t=>t.\u0275providers)])}function rm(s){return s.routerState.root}function am(){let s=w($e);return e=>{let t=s.get($i);if(e!==t.components[0])return;let i=s.get(Ad),n=s.get(om);s.get(cm)===1&&i.initialNavigation(),s.get(lm,null,Pr.Optional)?.setUpPreloading(),s.get(sm,null,Pr.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var om=new G("",{factory:()=>new Ht}),cm=new G("",{providedIn:"root",factory:()=>1});var lm=new G("");var Ed=[];var dm="@",um=(()=>{class s{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=w($c,{optional:!0});loadingSchedulerFn=w(hm,{optional:!0});_engine;constructor(t,i,n,r,a){this.doc=t,this.delegate=i,this.zone=n,this.animationType=r,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-D5NI6EB6.js").then(n=>n),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(n=>{throw new st(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:r})=>{this._engine=n(this.animationType,this.doc);let a=new r(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,i){let n=this.delegate.createRenderer(t,i);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let r=new za(n);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let o=a.createRenderer(t,i);r.use(o),this.scheduler?.notify(11)}).catch(a=>{r.use(n)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(i){Fr()};static \u0275prov=P({token:s,factory:s.\u0275fac})}return s})(),za=class{delegate;replay=[];\u0275type=1;constructor(e){this.delegate=e}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,n){this.delegate.insertBefore(e,t,i,n)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,n){this.delegate.setAttribute(e,t,i,n)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,n){this.delegate.setStyle(e,t,i,n)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(n=>n.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(n=>n.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(dm)}},hm=new G("");function Sd(s="animations"){return qc("NgAsyncAnimations"),Fi([{provide:Hn,useFactory:(e,t,i)=>new um(e,t,i,s),deps:[it,Jn,gt]},{provide:oe,useValue:s==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Cd={providers:[dl({eventCoalescing:!0}),xd(Ed),Sd()]};var Ha;try{Ha=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ha=!1}var Xt=(()=>{class s{_platformId=w(Ve);isBrowser=this._platformId?_l(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Ha)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var mn;function pm(){if(mn==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>mn=!0}))}finally{mn=mn||!1}return mn}function Ti(s){return pm()?s:!!s.capture}var $a;function mm(){if($a==null){let s=typeof document<"u"?document.head:null;$a=!!(s&&(s.createShadowRoot||s.attachShadow))}return $a}function Td(s){if(mm()){let e=s.getRootNode?s.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function we(s){return s.composedPath?s.composedPath()[0]:s.target}var bs=new WeakMap,vs=(()=>{class s{_appRef;_injector=w($e);_environmentInjector=w(ze);load(t){let i=this._appRef=this._appRef||this._injector.get($i),n=bs.get(i);n||(n={loaders:new Set,refs:[]},bs.set(i,n),i.onDestroy(()=>{bs.get(i)?.refs.forEach(r=>r.destroy()),bs.delete(i)})),n.loaders.has(t)||(n.loaders.add(t),n.refs.push(hl(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Va(s){return Array.isArray(s)?s:[s]}function Je(s){return s instanceof It?s.nativeElement:s}var Id=new Set,ti,fm=(()=>{class s{_platform=w(Xt);_nonce=w(Bi,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):bm}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&gm(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function gm(s,e){if(!Id.has(s))try{ti||(ti=document.createElement("style"),e&&ti.setAttribute("nonce",e),ti.setAttribute("type","text/css"),document.head.appendChild(ti)),ti.sheet&&(ti.sheet.insertRule(`@media ${s} {body{ }}`,0),Id.add(s))}catch(t){console.error(t)}}function bm(s){return{matches:s==="all"||s==="",media:s,addListener:()=>{},removeListener:()=>{}}}var Rd=(()=>{class s{_mediaMatcher=w(fm);_zone=w(gt);_queries=new Map;_destroySubject=new Ht;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Md(Va(t)).some(n=>this._registerQuery(n).mql.matches)}observe(t){let n=Md(Va(t)).map(a=>this._registerQuery(a).observable),r=Oi(n);return r=Nn(r.pipe(Qt(1)),r.pipe(jn(1),Rr(0))),r.pipe(F(a=>{let o={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:l})=>{o.matches=o.matches||c,o.breakpoints[l]=c}),o}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),r={observable:new Sr(a=>{let o=c=>this._zone.run(()=>a.next(c));return i.addListener(o),()=>{i.removeListener(o)}}).pipe(Bn(i),F(({matches:a})=>({query:t,matches:a})),li(this._destroySubject)),mql:i};return this._queries.set(t,r),r}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Md(s){return s.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Wa(s){return s.buttons===0||s.detail===0}function qa(s){let e=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var ym=new G("cdk-input-modality-detector-options"),_m={ignoreKeys:[18,17,224,91,16]},Pd=650,Ii=Ti({passive:!0,capture:!0}),wm=(()=>{class s{_platform=w(Xt);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new St(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=we(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<Pd||(this._modality.next(Wa(t)?"keyboard":"mouse"),this._mostRecentTarget=we(t))};_onTouchstart=t=>{if(qa(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=we(t)};constructor(){let t=w(gt),i=w(it),n=w(ym,{optional:!0});this._options=S(S({},_m),n),this.modalityDetected=this._modality.pipe(jn(1)),this.modalityChanged=this.modalityDetected.pipe(Lc()),this._platform.isBrowser&&t.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Ii),i.addEventListener("mousedown",this._onMousedown,Ii),i.addEventListener("touchstart",this._onTouchstart,Ii)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ii),document.removeEventListener("mousedown",this._onMousedown,Ii),document.removeEventListener("touchstart",this._onTouchstart,Ii))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var _s=function(s){return s[s.IMMEDIATE=0]="IMMEDIATE",s[s.EVENTUAL=1]="EVENTUAL",s}(_s||{}),Am=new G("cdk-focus-monitor-default-options"),ys=Ti({passive:!0,capture:!0}),Ld=(()=>{class s{_ngZone=w(gt);_platform=w(Xt);_inputModalityDetector=w(wm);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=w(it,{optional:!0});_stopInputModalityDetector=new Ht;constructor(){let t=w(Am,{optional:!0});this._detectionMode=t?.detectionMode||_s.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=we(t);for(let n=i;n;n=n.parentElement)t.type==="focus"?this._onFocus(t,n):this._onBlur(t,n)};monitor(t,i=!1){let n=Je(t);if(!this._platform.isBrowser||n.nodeType!==1)return k();let r=Td(n)||this._getDocument(),a=this._elementInfo.get(n);if(a)return i&&(a.checkChildren=!0),a.subject;let o={checkChildren:i,subject:new Ht,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){let i=Je(t),n=this._elementInfo.get(i);n&&(n.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(n))}focusVia(t,i,n){let r=Je(t),a=this._getDocument().activeElement;r===a?this._getClosestElementsInfo(r).forEach(([o,c])=>this._originChanged(o,i,c)):(this._setOrigin(i),typeof r.focus=="function"&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===_s.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===_s.IMMEDIATE){clearTimeout(this._originTimeoutId);let n=this._originFromTouchInteraction?Pd:1;this._originTimeoutId=setTimeout(()=>this._origin=null,n)}})}_onFocus(t,i){let n=this._elementInfo.get(i),r=we(t);!n||!n.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),n)}_onBlur(t,i){let n=this._elementInfo.get(i);!n||n.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(n,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,n=this._rootNodeFocusListenerCount.get(i)||0;n||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,ys),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,ys)}),this._rootNodeFocusListenerCount.set(i,n+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(li(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let n=this._rootNodeFocusListenerCount.get(i);n>1?this._rootNodeFocusListenerCount.set(i,n-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ys),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ys),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,n){this._setClasses(t,i),this._emitOrigin(n,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&i.push([r,n])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:n}=this._inputModalityDetector;if(n!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let r=t.labels;if(r){for(let a=0;a<r.length;a++)if(r[a].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var ei=function(s){return s[s.NONE=0]="NONE",s[s.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",s[s.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",s}(ei||{}),kd="cdk-high-contrast-black-on-white",Dd="cdk-high-contrast-white-on-black",Ga="cdk-high-contrast-active",Od=(()=>{class s{_platform=w(Xt);_hasCheckedHighContrastMode;_document=w(it);_breakpointSubscription;constructor(){this._breakpointSubscription=w(Rd).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ei.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,n=i&&i.getComputedStyle?i.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(t.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ei.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ei.BLACK_ON_WHITE}return ei.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Ga,kd,Dd),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ei.BLACK_ON_WHITE?t.add(Ga,kd):i===ei.WHITE_ON_BLACK&&t.add(Ga,Dd)}}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Xa=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({})}return s})();var _t=(()=>{class s{constructor(){w(Od)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[Xa,Xa]})}return s})();var Hd=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,n){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return s})();var Yt=function(s){return s[s.FADING_IN=0]="FADING_IN",s[s.VISIBLE=1]="VISIBLE",s[s.FADING_OUT=2]="FADING_OUT",s[s.HIDDEN=3]="HIDDEN",s}(Yt||{}),Za=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Yt.HIDDEN;constructor(e,t,i,n=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=n}fadeOut(){this._renderer.fadeOutRipple(this)}},Fd=Ti({passive:!0,capture:!0}),Qa=class{_events=new Map;addHandler(e,t,i,n){let r=this._events.get(t);if(r){let a=r.get(i);a?a.add(n):r.set(i,new Set([n]))}else this._events.set(t,new Map([[i,new Set([n])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Fd)})}removeHandler(e,t,i){let n=this._events.get(e);if(!n)return;let r=n.get(t);r&&(r.delete(i),r.size===0&&n.delete(t),n.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Fd)))}_delegateEventHandler=e=>{let t=we(e);t&&this._events.get(e.type)?.forEach((i,n)=>{(n===t||n.contains(t))&&i.forEach(r=>r.handleEvent(e))})}},As={enterDuration:225,exitDuration:150},Em=800,Nd=Ti({passive:!0,capture:!0}),jd=["mousedown","touchstart"],Bd=["mouseup","mouseleave","touchend","touchcancel"],Sm=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return s})(),Ja=class s{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Qa;constructor(e,t,i,n,r){this._target=e,this._ngZone=t,this._platform=n,n.isBrowser&&(this._containerElement=Je(i)),r&&r.get(vs).load(Sm)}fadeInRipple(e,t,i={}){let n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=S(S({},As),i.animation);i.centered&&(e=n.left+n.width/2,t=n.top+n.height/2);let a=i.radius||Cm(e,t,n),o=e-n.left,c=t-n.top,l=r.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${o-a}px`,d.style.top=`${c-a}px`,d.style.height=`${a*2}px`,d.style.width=`${a*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,p=u.transitionDuration,m=h==="none"||p==="0s"||p==="0s, 0s"||n.width===0&&n.height===0,f=new Za(this,d,i,m);d.style.transform="scale3d(1, 1, 1)",f.state=Yt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=f);let b=null;return!m&&(l||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let g=()=>{b&&(b.fallbackTimer=null),clearTimeout(y),this._finishRippleTransition(f)},v=()=>this._destroyRipple(f),y=setTimeout(v,l+100);d.addEventListener("transitionend",g),d.addEventListener("transitioncancel",v),b={onTransitionEnd:g,onTransitionCancel:v,fallbackTimer:y}}),this._activeRipples.set(f,b),(m||!l)&&this._finishRippleTransition(f),f}fadeOutRipple(e){if(e.state===Yt.FADING_OUT||e.state===Yt.HIDDEN)return;let t=e.element,i=S(S({},As),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Yt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Je(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,jd.forEach(i=>{s._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Bd.forEach(t=>{this._triggerElement.addEventListener(t,this,Nd)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Yt.FADING_IN?this._startFadeOutTransition(e):e.state===Yt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Yt.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Yt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Wa(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Em;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!qa(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Yt.VISIBLE||e.config.terminateOnPointerUp&&e.state===Yt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(jd.forEach(t=>s._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(Bd.forEach(t=>e.removeEventListener(t,this,Nd)),this._pointerUpEventsRegistered=!1))}};function Cm(s,e,t){let i=Math.max(Math.abs(s-t.left),Math.abs(s-t.right)),n=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+n*n)}var Tm=new G("mat-ripple-global-options");var Vd=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[_t,_t]})}return s})();var Ud={capture:!0},zd=["focus","mousedown","mouseenter","touchstart"],Ya="mat-ripple-loader-uninitialized",Ka="mat-ripple-loader-class-name",$d="mat-ripple-loader-centered",ws="mat-ripple-loader-disabled",Gd=(()=>{class s{_document=w(it,{optional:!0});_animationMode=w(oe,{optional:!0});_globalRippleOptions=w(Tm,{optional:!0});_platform=w(Xt);_ngZone=w(gt);_injector=w($e);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(let t of zd)this._document?.addEventListener(t,this._onInteraction,Ud)})}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);for(let i of zd)this._document?.removeEventListener(i,this._onInteraction,Ud)}configureRipple(t,i){t.setAttribute(Ya,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(Ka))&&t.setAttribute(Ka,i.className||""),i.centered&&t.setAttribute($d,""),i.disabled&&t.setAttribute(ws,"")}setDisabled(t,i){let n=this._hosts.get(t);n?(n.target.rippleDisabled=i,!i&&!n.hasSetUpEvents&&(n.hasSetUpEvents=!0,n.renderer.setupTriggerEvents(t))):i?t.setAttribute(ws,""):t.removeAttribute(ws)}_onInteraction=t=>{let i=we(t);if(i instanceof HTMLElement){let n=i.closest(`[${Ya}="${this._globalRippleOptions?.namespace??""}"]`);n&&this._createRipple(n)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(Ka)),t.append(i);let n=this._animationMode==="NoopAnimations",r=this._globalRippleOptions,a=n?0:r?.animation?.enterDuration??As.enterDuration,o=n?0:r?.animation?.exitDuration??As.exitDuration,c={rippleDisabled:n||r?.disabled||t.hasAttribute(ws),rippleConfig:{centered:t.hasAttribute($d),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:a,exitDuration:o}}},l=new Ja(c,this._ngZone,i,this._platform,this._injector),d=!c.rippleDisabled;d&&l.setupTriggerEvents(t),this._hosts.set(t,{target:c,renderer:l,hasSetUpEvents:d}),t.removeAttribute(Ya)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(i){return new(i||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Im=["*"],xs;function Mm(){if(xs===void 0&&(xs=null,typeof window<"u")){let s=window;s.trustedTypes!==void 0&&(xs=s.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return xs}function fn(s){return Mm()?.createHTML(s)||s}function Wd(s){return Error(`Unable to find icon with the name "${s}"`)}function Rm(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function qd(s){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${s}".`)}function Xd(s){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${s}".`)}var Ae=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},km=(()=>{class s{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,n,r){this._httpClient=t,this._sanitizer=i,this._errorHandler=r,this._document=n}addSvgIcon(t,i,n){return this.addSvgIconInNamespace("",t,i,n)}addSvgIconLiteral(t,i,n){return this.addSvgIconLiteralInNamespace("",t,i,n)}addSvgIconInNamespace(t,i,n,r){return this._addSvgIconConfig(t,i,new Ae(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,n,r){let a=this._sanitizer.sanitize(Nt.HTML,n);if(!a)throw Xd(n);let o=fn(a);return this._addSvgIconConfig(t,i,new Ae("",o,r))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,n){return this._addSvgIconSetConfig(t,new Ae(i,null,n))}addSvgIconSetLiteralInNamespace(t,i,n){let r=this._sanitizer.sanitize(Nt.HTML,i);if(!r)throw Xd(i);let a=fn(r);return this._addSvgIconSetConfig(t,new Ae("",a,n))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(Nt.RESOURCE_URL,t);if(!i)throw qd(t);let n=this._cachedIconsByUrl.get(i);return n?k(Es(n)):this._loadSvgIconFromConfig(new Ae(t,null)).pipe(lt(r=>this._cachedIconsByUrl.set(i,r)),F(r=>Es(r)))}getNamedSvgIcon(t,i=""){let n=Yd(i,t),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(i,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);let a=this._iconSetConfigs.get(i);return a?this._getSvgFromIconSetConfigs(t,a):je(Wd(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?k(Es(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(F(i=>Es(i)))}_getSvgFromIconSetConfigs(t,i){let n=this._extractIconWithNameFromAnySet(t,i);if(n)return k(n);let r=i.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Ie(o=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Nt.RESOURCE_URL,a.url)} failed: ${o.message}`;return this._errorHandler.handleError(new Error(l)),k(null)})));return Dc(r).pipe(F(()=>{let a=this._extractIconWithNameFromAnySet(t,i);if(!a)throw Wd(t);return a}))}_extractIconWithNameFromAnySet(t,i){for(let n=i.length-1;n>=0;n--){let r=i[n];if(r.svgText&&r.svgText.toString().indexOf(t)>-1){let a=this._svgElementFromConfig(r),o=this._extractSvgIconFromSet(a,t,r.options);if(o)return o}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(lt(i=>t.svgText=i),F(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?k(null):this._fetchIcon(t).pipe(lt(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,n){let r=t.querySelector(`[id="${i}"]`);if(!r)return null;let a=r.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,n);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),n);let o=this._svgElementFromString(fn("<svg></svg>"));return o.appendChild(a),this._setSvgAttributes(o,n)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let n=i.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){let i=this._svgElementFromString(fn("<svg></svg>")),n=t.attributes;for(let r=0;r<n.length;r++){let{name:a,value:o}=n[r];a!=="id"&&i.setAttribute(a,o)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[r].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:n}=t,r=n?.withCredentials??!1;if(!this._httpClient)throw Rm();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let a=this._sanitizer.sanitize(Nt.RESOURCE_URL,i);if(!a)throw qd(i);let o=this._inProgressUrlFetches.get(a);if(o)return o;let c=this._httpClient.get(a,{responseType:"text",withCredentials:r}).pipe(F(l=>fn(l)),Ue(()=>this._inProgressUrlFetches.delete(a)),Nc());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,i,n){return this._svgIconConfigs.set(Yd(t,i),n),this}_addSvgIconSetConfig(t,i){let n=this._iconSetConfigs.get(t);return n?n.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let n=0;n<this._resolvers.length;n++){let r=this._resolvers[n](i,t);if(r)return Dm(r)?new Ae(r.url,null,r.options):new Ae(r,null)}}static \u0275fac=function(i){return new(i||s)(q(Tl,8),q(ia),q(it,8),q(He))};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Es(s){return s.cloneNode(!0)}function Yd(s,e){return s+":"+e}function Dm(s){return!!(s.url&&s.options)}var Pm=new G("MAT_ICON_DEFAULT_OPTIONS"),Lm=new G("mat-icon-location",{providedIn:"root",factory:Om});function Om(){let s=w(it),e=s?s.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var Kd=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Fm=Kd.map(s=>`[${s}]`).join(", "),Nm=/^url\(['"]?#(.*?)['"]?\)$/,Ss=(()=>{class s{_elementRef=w(It);_iconRegistry=w(km);_location=w(Lm);_errorHandler=w(He);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Li.EMPTY;constructor(){let t=w(new zc("aria-hidden"),{optional:!0}),i=w(Pm,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let n=t.childNodes[i];(n.nodeType!==1||n.nodeName.toLowerCase()==="svg")&&n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(n=>n.length>0);this._previousFontSetClass.forEach(n=>t.classList.remove(n)),i.forEach(n=>t.classList.add(n)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((n,r)=>{n.forEach(a=>{r.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(Fm),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<i.length;r++)Kd.forEach(a=>{let o=i[r],c=o.getAttribute(a),l=c?c.match(Nm):null;if(l){let d=n.get(o);d||(d=[],n.set(o,d)),d.push({name:a,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,n]=this._splitIconName(t);i&&(this._svgNamespace=i),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,i).pipe(Qt(1)).subscribe(r=>this._setSvgElement(r),r=>{let a=`Error retrieving icon ${i}:${n}! ${r.message}`;this._errorHandler.handleError(new Error(a))})}}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,n){i&2&&(Rt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),ce(n.color?"mat-"+n.color:""),kt("mat-icon-inline",n.inline)("mat-icon-no-color",n.color!=="primary"&&n.color!=="accent"&&n.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",de],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[te],ngContentSelectors:Im,decls:1,vars:0,template:function(i,n){i&1&&(le(),Dt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return s})(),Cs=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[_t,_t]})}return s})();var jm=["*",[["mat-toolbar-row"]]],Bm=["*","mat-toolbar-row"],Um=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return s})(),Qd=(()=>{class s{_elementRef=w(It);_platform=w(Xt);_document=w(it);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["mat-toolbar"]],contentQueries:function(i,n,r){if(i&1&&jr(r,Um,5),i&2){let a;pi(a=mi())&&(n._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,n){i&2&&(ce(n.color?"mat-"+n.color:""),kt("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",n._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Bm,decls:2,vars:0,template:function(i,n){i&1&&(le(jm),Dt(0),Dt(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return s})();var Jd=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[_t,_t]})}return s})();var $m=["mat-button",""],Hm=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Vm=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Gm=new G("MAT_BUTTON_CONFIG");var Wm=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],qm=(()=>{class s{_elementRef=w(It);_platform=w(Xt);_ngZone=w(gt);_animationMode=w(oe,{optional:!0});_focusMonitor=w(Ld);_rippleLoader=w(Gd);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){w(vs).load(Hd);let t=w(Gm,{optional:!0}),i=this._elementRef.nativeElement,n=i.classList;this.disabledInteractive=t?.disabledInteractive??!1,this.color=t?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"});for(let{attribute:r,mdcClasses:a}of Wm)i.hasAttribute(r)&&n.add(...a)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",de],disabled:[2,"disabled","disabled",de],ariaDisabled:[2,"aria-disabled","ariaDisabled",de],disabledInteractive:[2,"disabledInteractive","disabledInteractive",de]},features:[te]})}return s})();var tu=(()=>{class s extends qm{static \u0275fac=(()=>{let t;return function(n){return(t||(t=ji(s)))(n||s)}})();static \u0275cmp=tt({type:s,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,n){i&2&&(Rt("disabled",n._getDisabledAttribute())("aria-disabled",n._getAriaDisabled()),ce(n.color?"mat-"+n.color:""),kt("mat-mdc-button-disabled",n.disabled)("mat-mdc-button-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._animationMode==="NoopAnimations")("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[rl],attrs:$m,ngContentSelectors:Vm,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,n){i&1&&(le(Hm),dt(0,"span",0),Dt(1),z(2,"span",1),Dt(3,1),B(),Dt(4,2),dt(5,"span",2)(6,"span",3)),i&2&&kt("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return s})();var eu=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[_t,Vd,_t]})}return s})();var Ym=["*"];var Km=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Zm=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],Qm=new G("MAT_CARD_CONFIG"),Ts=(()=>{class s{appearance;constructor(){let t=w(Qm,{optional:!0});this.appearance=t?.appearance||"raised"}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,n){i&2&&kt("mat-mdc-card-outlined",n.appearance==="outlined")("mdc-card--outlined",n.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Ym,decls:1,vars:0,template:function(i,n){i&1&&(le(),Dt(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return s})(),Is=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return s})();var iu=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return s})(),nu=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return s})(),su=(()=>{class s{align="start";static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(i,n){i&2&&kt("mat-mdc-card-actions-align-end",n.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return s})(),Ms=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:Zm,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,n){i&1&&(le(Km),Dt(0),z(1,"div",0),Dt(2,1),B(),Dt(3,2))},encapsulation:2,changeDetection:0})}return s})();var ru=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275dir=Mt({type:s,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-mdc-card-avatar"]})}return s})();var Rs=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[_t,_t]})}return s})();function Jm(s,e){s&1&&dt(0,"div",2)}var tf=new G("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var cu=(()=>{class s{_elementRef=w(It);_ngZone=w(gt);_changeDetectorRef=w(fi);_renderer=w(Vn);_cleanupTransitionEnd;_animationMode=w(oe,{optional:!0});constructor(){let t=w(tf,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",t&&(t.color&&(this.color=this._defaultColor=t.color),this.mode=t.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";get value(){return this._value}set value(t){this._value=ou(t||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=ou(t||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new be;get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=t=>{this.animationEnd.observers.length===0||!t.target||!t.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,n){i&2&&(Rt("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),ce("mat-"+n.color),kt("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Re],bufferValue:[2,"bufferValue","bufferValue",Re],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[te],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,n){i&1&&(z(0,"div",0),dt(1,"div",1),Wt(2,Jm,1,0,"div",2),B(),z(3,"div",3),dt(4,"span",4),B(),z(5,"div",5),dt(6,"span",4),B()),i&2&&(K(),Ge("flex-basis",n._getBufferBarFlexBasis()),K(),Nr(n.mode==="buffer"?2:-1),K(),Ge("transform",n._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}return s})();function ou(s,e=0,t=100){return Math.max(e,Math.min(t,s))}var lu=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[_t]})}return s})();var nf=["determinateSpinner"];function sf(s,e){if(s&1&&(Lr(),z(0,"svg",11),dt(1,"circle",12),B()),s&2){let t=ve();Rt("viewBox",t._viewBox()),K(),Ge("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Rt("r",t._circleRadius())}}var rf=new G("mat-progress-spinner-default-options",{providedIn:"root",factory:af});function af(){return{diameter:du}}var du=100,of=10,uu=(()=>{class s{_elementRef=w(It);_noopAnimations;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";_determinateCircle;constructor(){let t=w(oe,{optional:!0}),i=w(rf);this._noopAnimations=t==="NoopAnimations"&&!!i&&!i._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}_value=0;get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}_diameter=du;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_strokeWidth;_circleRadius(){return(this.diameter-of)/2}_viewBox(){let t=this._circleRadius()*2+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=tt({type:s,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,n){if(i&1&&Br(nf,5),i&2){let r;pi(r=mi())&&(n._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,n){i&2&&(Rt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",n.mode==="determinate"?n.value:null)("mode",n.mode),ce("mat-"+n.color),Ge("width",n.diameter,"px")("height",n.diameter,"px")("--mdc-circular-progress-size",n.diameter+"px")("--mdc-circular-progress-active-indicator-width",n.diameter+"px"),kt("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate",n.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Re],diameter:[2,"diameter","diameter",Re],strokeWidth:[2,"strokeWidth","strokeWidth",Re]},exportAs:["matProgressSpinner"],features:[te],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,n){if(i&1&&(Wt(0,sf,2,8,"ng-template",null,0,ll),z(2,"div",2,1),Lr(),z(4,"svg",3),dt(5,"circle",4),B()(),Uc(),z(6,"div",5)(7,"div",6)(8,"div",7),Wn(9,8),B(),z(10,"div",9),Wn(11,8),B(),z(12,"div",10),Wn(13,8),B()()()),i&2){let r=qn(1);K(4),Rt("viewBox",n._viewBox()),K(),Ge("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),Rt("r",n._circleRadius()),K(4),wt("ngTemplateOutlet",r),K(2),wt("ngTemplateOutlet",r),K(2),wt("ngTemplateOutlet",r)}},dependencies:[bl],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return s})();var hu=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=at({type:s});static \u0275inj=rt({imports:[_t]})}return s})();var _n={};_n.d=(s,e)=>{for(var t in e)_n.o(e,t)&&!_n.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:e[t]})};_n.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e);var O=globalThis.pdfjsLib={};_n.d(O,{AbortException:()=>Se,AnnotationEditorLayer:()=>rg,AnnotationEditorParamsType:()=>V,AnnotationEditorType:()=>j,AnnotationEditorUIManager:()=>Cn,AnnotationLayer:()=>fc,AnnotationMode:()=>Pe,ColorPicker:()=>dr,DOMSVGFactory:()=>kn,DrawLayer:()=>Ec,FeatureTest:()=>Et,GlobalWorkerOptions:()=>ni,ImageKind:()=>Ns,InvalidPDFException:()=>js,MissingPDFException:()=>si,OPS:()=>ie,OutputScale:()=>Sn,PDFDataRangeTransport:()=>Qs,PDFDateString:()=>Us,PDFWorker:()=>ki,PasswordResponses:()=>pf,PermissionFlag:()=>hf,PixelsPerInch:()=>Oe,RenderingCancelledException:()=>En,TextLayer:()=>Mn,UnexpectedResponseException:()=>Di,Util:()=>M,VerbosityLevel:()=>pr,XfaLayer:()=>er,build:()=>ig,createValidAbsoluteUrl:()=>bf,fetchData:()=>br,getDocument:()=>Qf,getFilenameFromUrl:()=>Sf,getPdfFilenameFromUrl:()=>Cf,getXfaPageViewport:()=>Tf,isDataScheme:()=>vr,isPdfFile:()=>Tc,noContextMenu:()=>se,normalizeUnicode:()=>Af,setLayerDimensions:()=>ri,shadow:()=>H,stopEvent:()=>ne,version:()=>eg});var Pt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Mu=[1,0,0,1,0,0],ro=[.001,0,0,.001,0,0],lf=1e7,Fs=1.35,df=.35,Yy=df/Fs,Ut={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Pe={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},uf="pdfjs_internal_editor_",j={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},V={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},hf={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ct={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ns={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},vt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var gn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var pr={ERRORS:0,WARNINGS:1,INFOS:5},ie={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},pf={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},mr=pr.WARNINGS;function mf(s){Number.isInteger(s)&&(mr=s)}function ff(){return mr}function fr(s){mr>=pr.INFOS&&console.log(`Info: ${s}`)}function U(s){mr>=pr.WARNINGS&&console.log(`Warning: ${s}`)}function Z(s){throw new Error(s)}function mt(s,e){s||Z(e)}function gf(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function bf(s,e=null,t=null){if(!s)return null;try{if(t&&typeof s=="string"&&(t.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),t.tryConvertEncoding))try{s=wf(s)}catch{}let i=e?new URL(s,e):new URL(s);if(gf(i))return i}catch{}return null}function H(s,e,t,i=!1){return Object.defineProperty(s,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}var Fe=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}(),wn=class extends Fe{constructor(e,t){super(e,"PasswordException"),this.code=t}},An=class extends Fe{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},js=class extends Fe{constructor(e){super(e,"InvalidPDFException")}},si=class extends Fe{constructor(e){super(e,"MissingPDFException")}},Di=class extends Fe{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},ao=class extends Fe{constructor(e){super(e,"FormatError")}},Se=class extends Fe{constructor(e){super(e,"AbortException")}};function Ru(s){(typeof s!="object"||s?.length===void 0)&&Z("Invalid argument for bytesToString");let e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);let i=[];for(let n=0;n<e;n+=t){let r=Math.min(n+t,e),a=s.subarray(n,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function gr(s){typeof s!="string"&&Z("Invalid argument for stringToBytes");let e=s.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=s.charCodeAt(i)&255;return t}function vf(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function Sc(s){let e=Object.create(null);for(let[t,i]of s)e[t]=i;return e}function yf(){let s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function _f(){try{return new Function(""),!0}catch{return!1}}var Et=class{static get isLittleEndian(){return H(this,"isLittleEndian",yf())}static get isEvalSupported(){return H(this,"isEvalSupported",_f())}static get isOffscreenCanvasSupported(){return H(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return H(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?H(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):H(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return H(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},to=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0")),M=class{static makeHexColor(e,t,i){return`#${to[e]}${to[t]}${to[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let i=e[0]*t[0]+e[1]*t[2]+t[4],n=e[0]*t[1]+e[1]*t[3]+t[5];return[i,n]}static applyInverseTransform(e,t){let i=t[0]*t[3]-t[1]*t[2],n=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[n,r]}static getAxialAlignedBoundingBox(e,t){let i=this.applyTransform(e,t),n=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],r[0],a[0]),Math.min(i[1],n[1],r[1],a[1]),Math.max(i[0],n[0],r[0],a[0]),Math.max(i[1],n[1],r[1],a[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,c=Math.sqrt((i+a)**2-4*(i*a-r*n))/2,l=o+c||1,d=o-c||1;return[Math.sqrt(l),Math.sqrt(d)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;let r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,n,a]}static#t(e,t,i,n,r,a,o,c,l,d){if(l<=0||l>=1)return;let u=1-l,h=l*l,p=h*l,m=u*(u*(u*e+3*l*t)+3*h*i)+p*n,f=u*(u*(u*r+3*l*a)+3*h*o)+p*c;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],f),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],f)}static#e(e,t,i,n,r,a,o,c,l,d,u,h){if(Math.abs(l)<1e-12){Math.abs(d)>=1e-12&&this.#t(e,t,i,n,r,a,o,c,-u/d,h);return}let p=d**2-4*u*l;if(p<0)return;let m=Math.sqrt(p),f=2*l;this.#t(e,t,i,n,r,a,o,c,(-d+m)/f,h),this.#t(e,t,i,n,r,a,o,c,(-d-m)/f,h)}static bezierBoundingBox(e,t,i,n,r,a,o,c,l){return l?(l[0]=Math.min(l[0],e,o),l[1]=Math.min(l[1],t,c),l[2]=Math.max(l[2],e,o),l[3]=Math.max(l[3],t,c)):l=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],this.#e(e,i,r,o,t,n,a,c,3*(-e+3*(i-r)+o),6*(e-2*i+r),3*(i-e),l),this.#e(e,i,r,o,t,n,a,c,3*(-t+3*(n-a)+c),6*(t-2*n+a),3*(n-t),l),l}};function wf(s){return decodeURIComponent(escape(s))}var eo=null,pu=null;function Af(s){return eo||(eo=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,pu=new Map([["\uFB05","\u017Ft"]])),s.replaceAll(eo,(e,t,i)=>t?t.normalize("NFKC"):pu.get(i))}function xf(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let s=new Uint8Array(32);return crypto.getRandomValues(s),Ru(s)}var Cc="pdfjs_internal_id_",xe={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Ef(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(Ru(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});var Ee="http://www.w3.org/2000/svg",Oe=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function br(s,e="text"){return C(this,null,function*(){if(yn(s,document.baseURI)){let t=yield fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{let n=new XMLHttpRequest;n.open("GET",s,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(n.response);return}t(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})})}var xn=class s{constructor({viewBox:e,scale:t,rotation:i,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=n,this.offsetY=r;let o=(e[2]+e[0])/2,c=(e[3]+e[1])/2,l,d,u,h;switch(i%=360,i<0&&(i+=360),i){case 180:l=-1,d=0,u=0,h=1;break;case 90:l=0,d=1,u=1,h=0;break;case 270:l=0,d=-1,u=-1,h=0;break;case 0:l=1,d=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,h=-h);let p,m,f,b;l===0?(p=Math.abs(c-e[1])*t+n,m=Math.abs(o-e[0])*t+r,f=(e[3]-e[1])*t,b=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+n,m=Math.abs(c-e[1])*t+r,f=(e[2]-e[0])*t,b=(e[3]-e[1])*t),this.transform=[l*t,d*t,u*t,h*t,p-l*t*o-u*t*c,m-d*t*o-h*t*c],this.width=f,this.height=b}get rawDims(){let{viewBox:e}=this;return H(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new s({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){return M.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=M.applyTransform([e[0],e[1]],this.transform),i=M.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return M.applyInverseTransform([e,t],this.transform)}},En=class extends Fe{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};function vr(s){let e=s.length,t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function Tc(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function Sf(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function Cf(s,e="document.pdf"){if(typeof s!="string")return e;if(vr(s))return U('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=t.exec(s),r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}var Bs=class{started=Object.create(null);times=[];time(e){e in this.started&&U(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||U(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:i}of this.times)t=Math.max(i.length,t);for(let{name:i,start:n,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-n}ms
`);return e.join("")}};function yn(s,e){try{let{protocol:t}=e?new URL(s,e):new URL(s);return t==="http:"||t==="https:"}catch{return!1}}function se(s){s.preventDefault()}function ne(s){s.preventDefault(),s.stopPropagation()}function mu(s){console.log("Deprecated API usage: "+s)}var Us=class{static#t;static toDateObject(e){if(!e||typeof e!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let t=this.#t.exec(e);if(!t)return null;let i=parseInt(t[1],10),n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;let l=t[7]||"Z",d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,l==="-"?(a+=d,o+=u):l==="+"&&(a-=d,o-=u),new Date(Date.UTC(i,n,r,a,o,c))}};function Tf(s,{scale:e=1,rotation:t=0}){let{width:i,height:n}=s.attributes.style,r=[0,0,parseInt(i),parseInt(n)];return new xn({viewBox:r,scale:e,rotation:t})}function Ic(s){if(s.startsWith("#")){let e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(U(`Not a valid color format: "${s}"`),[0,0,0])}function If(s){let e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(let t of s.keys()){e.style.color=t;let i=window.getComputedStyle(e).color;s.set(t,Ic(i))}e.remove()}function nt(s){let{a:e,b:t,c:i,d:n,e:r,f:a}=s.getTransform();return[e,t,i,n,r,a]}function he(s){let{a:e,b:t,c:i,d:n,e:r,f:a}=s.getTransform().invertSelf();return[e,t,i,n,r,a]}function ri(s,e,t=!1,i=!0){if(e instanceof xn){let{pageWidth:n,pageHeight:r}=e.rawDims,{style:a}=s,o=Et.isCSSRoundSupported,c=`var(--scale-factor) * ${n}px`,l=`var(--scale-factor) * ${r}px`,d=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,u=o?`round(down, ${l}, var(--scale-round-y, 1px))`:`calc(${l})`;!t||e.rotation%180===0?(a.width=d,a.height=u):(a.width=u,a.height=d)}i&&s.setAttribute("data-main-rotation",e.rotation)}var Sn=class{constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},oo=class s{#t=null;#e=null;#i;#n=null;#r=null;static#s=null;constructor(e){this.#i=e,s.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let e=this.#t=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=this.#i._uiManager._signal;e.addEventListener("contextmenu",se,{signal:t}),e.addEventListener("pointerdown",s.#l,{signal:t});let i=this.#n=document.createElement("div");i.className="buttons",e.append(i);let n=this.#i.toolbarPosition;if(n){let{style:r}=e,a=this.#i._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),e}get div(){return this.#t}static#l(e){e.stopPropagation()}#o(e){this.#i._focusEventsAllowed=!1,ne(e)}#d(e){this.#i._focusEventsAllowed=!0,ne(e)}#c(e){let t=this.#i._uiManager._signal;e.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",se,{signal:t})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown()}#u(){let{editorType:e,_uiManager:t}=this.#i,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",s.#s[e]),this.#c(i),i.addEventListener("click",n=>{t.delete()},{signal:t._signal}),this.#n.append(i)}get#a(){let e=document.createElement("div");return e.className="divider",e}addAltText(e){return C(this,null,function*(){let t=yield e.render();this.#c(t),this.#n.prepend(t,this.#a),this.#r=e})}addColorPicker(e){this.#e=e;let t=e.renderButton();this.#c(t),this.#n.prepend(t,this.#a)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},co=class{#t=null;#e=null;#i;constructor(e){this.#i=e}#n(){let e=this.#e=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",se,{signal:this.#i._signal});let t=this.#t=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#r(e,t){let i=0,n=0;for(let r of e){let a=r.y+r.height;if(a<i)continue;let o=r.x+(t?r.width:0);if(a>i){n=o,i=a;continue}t?o>n&&(n=o):o<n&&(n=o)}return[t?1-n:n,i]}show(e,t,i){let[n,r]=this.#r(t,i),{style:a}=this.#e||=this.#n();e.append(this.#e),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let i=this.#i._signal;e.addEventListener("contextmenu",se,{signal:i}),e.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:i}),this.#t.append(e)}};function zs(s,e,t){for(let i of t)e.addEventListener(i,s[i].bind(s))}var lo=class{#t=0;get id(){return`${uf}${this.#t++}`}},uo=class s{#t=xf();#e=0;#i=null;static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=e;let r=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return H(this,"_isSVGFittingCanvas",r)}#n(e,t){return C(this,null,function*(){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let n;if(typeof t=="string"?(i.url=t,n=yield br(t,"blob")):t instanceof File?n=i.file=t:t instanceof Blob&&(n=t),n.type==="image/svg+xml"){let r=s._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((l,d)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,l()},a.onload=()=>C(this,null,function*(){let u=i.svgUrl=a.result;o.src=(yield r)?`${u}#svgView(preserveAspectRatio(none))`:u}),o.onerror=a.onerror=d});a.readAsDataURL(n),yield c}else i.bitmap=yield createImageBitmap(n);i.refCounter=1}catch(n){U(n),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i})}getFromFile(e){return C(this,null,function*(){let{lastModified:t,name:i,size:n,type:r}=e;return this.#n(`${t}_${i}_${n}_${r}`,e)})}getFromUrl(e){return C(this,null,function*(){return this.#n(e,e)})}getFromBlob(e,t){return C(this,null,function*(){let i=yield t;return this.#n(e,i)})}getFromId(e){return C(this,null,function*(){this.#i||=new Map;let t=this.#i.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)})}getFromCanvas(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;let n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){let t=this.#i.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#i||=new Map;let t=this.#i.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:i}=t;if(!t.url&&!t.file){let n=new OffscreenCanvas(i.width,i.height);n.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=n.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#t}_`)}},ho=class{#t=[];#e=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:t,post:i,mustExec:n,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(n&&e(),this.#e)return;let c={cmd:e,undo:t,post:i,type:r};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(c);return}if(a&&this.#t[this.#n].type===r){o&&(c.undo=this.#t[this.#n].undo),this.#t[this.#n]=c;return}let l=this.#n+1;l===this.#i?this.#t.splice(0,1):(this.#n=l,l<this.#t.length&&this.#t.splice(l)),this.#t.push(c)}undo(){if(this.#n===-1)return;this.#e=!0;let{undo:e,post:t}=this.#t[this.#n];e(),t?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;let{cmd:e,post:t}=this.#t[this.#n];e(),t?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#t[t].type!==e){this.#t.splice(t+1,this.#n-t),this.#n=t;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}},ai=class{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=Et.platform;for(let[i,n,r={}]of e)for(let a of i){let o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1)))}}#t(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;let i=this.callbacks.get(this.#t(t));if(!i)return;let{callback:n,options:{bubbles:r=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(n.bind(e,...a,t)(),r||ne(t))}},po=class s{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return If(e),H(this,"_colors",e)}convert(e){let t=Ic(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[i,n]of this._colors)if(n.every((r,a)=>r===t[a]))return s._colorsMapping.get(i);return t}getHexCode(e){let t=this._colors.get(e);return t?M.makeHexColor(...t):e}},Cn=(()=>{class s{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#r=null;#s=null;#l=null;#o=new ho;#d=null;#c=null;#u=0;#a=new Set;#h=null;#p=null;#m=new Set;_editorUndoBar=null;#g=!1;#f=!1;#b=!1;#v=null;#_=null;#w=null;#E=null;#S=!1;#C=null;#I=new lo;#A=!1;#M=!1;#T=null;#R=null;#L=null;#j=null;#x=j.NONE;#y=new Set;#P=null;#B=null;#z=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#F=[0,0];#D=null;#U=null;#W=null;#O=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=s.prototype,i=o=>o.#U.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:c})=>{if(c instanceof HTMLInputElement){let{type:l}=c;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return H(this,"_keyboardManager",new ai([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#U.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#U.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:i}]]))}constructor(t,i,n,r,a,o,c,l,d,u,h,p){let m=this._signal=this.#t.signal;this.#U=t,this.#W=i,this.#r=n,this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:m}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),r._on("setpreference",this.onSetPreference.bind(this),{signal:m}),r._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:m}),this.#et(),this.#rt(),this.#X(),this.#s=a.annotationStorage,this.#v=a.filterFactory,this.#B=o,this.#E=c||null,this.#g=l,this.#f=d,this.#b=u,this.#j=h||null,this.viewParameters={realScale:Oe.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null}destroy(){this.#O?.resolve(),this.#O=null,this.#t?.abort(),this.#t=null,this._signal=null;for(let t of this.#n.values())t.destroy();this.#n.clear(),this.#i.clear(),this.#m.clear(),this.#e=null,this.#y.clear(),this.#o.destroy(),this.#r?.destroy(),this.#C?.hide(),this.#C=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#D&&(clearTimeout(this.#D),this.#D=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#f}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return H(this,"hcmFilter",this.#B?this.#v.addHCMFilter(this.#B.foreground,this.#B.background):"none")}get direction(){return H(this,"direction",getComputedStyle(this.#U).direction)}get highlightColors(){return H(this,"highlightColors",this.#E?new Map(this.#E.split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return H(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=t}setMainHighlightColorPicker(t){this.#L=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:t}){this.#u=t-1}focusMainContainer(){this.#U.focus()}findParent(t,i){for(let n of this.#n.values()){let{x:r,y:a,width:o,height:c}=n.div.getBoundingClientRect();if(t>=r&&t<=r+o&&i>=a&&i<=a+c)return n}return null}disableUserSelect(t=!1){this.#W.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Oe.PDF_TO_CSS_UNITS;for(let i of this.#m)i.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#V({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#q(t){let{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(let n of this.#n.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){let i=document.getSelection();if(!i||i.isCollapsed)return;let{anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:o}=i,c=i.toString(),d=this.#V(i).closest(".textLayer"),u=this.getSelectionBoxes(d);if(!u)return;i.empty();let h=this.#q(d),p=this.#x===j.NONE,m=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:o,text:c}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(j.HIGHLIGHT,m);return}m()}#J(){let t=document.getSelection();if(!t||t.isCollapsed)return;let n=this.#V(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#C||=new co(this),this.#C.show(n,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#tt(){let t=document.getSelection();if(!t||t.isCollapsed){this.#P&&(this.#C?.hide(),this.#P=null,this.#k({hasSelectedText:!1}));return}let{anchorNode:i}=t;if(i===this.#P)return;let r=this.#V(t).closest(".textLayer");if(!r){this.#P&&(this.#C?.hide(),this.#P=null,this.#k({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#P=i,this.#k({hasSelectedText:!0}),!(this.#x!==j.HIGHLIGHT&&this.#x!==j.NONE)&&(this.#x===j.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){let a=this.#x===j.HIGHLIGHT?this.#q(r):null;a?.toggleDrawing();let o=new AbortController,c=this.combinedSignal(o),l=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#G("main_toolbar"))};window.addEventListener("pointerup",l,{signal:c}),window.addEventListener("blur",l,{signal:c})}}#G(t=""){this.#x===j.HIGHLIGHT?this.highlightSelection(t):this.#g&&this.#J()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#it(){if(this.#w)return;this.#w=new AbortController;let t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#nt(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#G("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let i of this.#y)if(i.div.contains(t)){this.#R=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;let[t,i]=this.#R;this.#R=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#X(){if(this.#T)return;this.#T=new AbortController;let t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#st(){this.#T?.abort(),this.#T=null}#Y(){if(this.#d)return;this.#d=new AbortController;let t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#K(){this.#d?.abort(),this.#d=null}#rt(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#X(),this.#Y()}removeEditListeners(){this.#st(),this.#K()}dragOver(t){for(let{type:i}of t.dataTransfer.items)for(let n of this.#p)if(n.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let i of t.dataTransfer.items)for(let n of this.#p)if(n.isHandlingMimeForPasting(i.type)){n.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let i=[];for(let n of this.#y){let r=n.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}paste(t){return C(this,null,function*(){t.preventDefault();let{clipboardData:i}=t;for(let a of i.items)for(let o of this.#p)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let n=i.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){U(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let r=this.currentLayer;try{let a=[];for(let l of n){let d=yield r.deserialize(l);if(!d)return;a.push(d)}let o=()=>{for(let l of a)this.#Z(l);this.#Q(a)},c=()=>{for(let l of a)l.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(a){U(`paste: "${a.message}".`)}})}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==j.NONE&&!this.isEditorHandlingKeyboard&&s._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#G("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#k(t){Object.entries(t).some(([n,r])=>this.#$[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#x===j.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#N([[V.HIGHLIGHT_FREE,!0]]))}#N(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#it(),this.#Y(),this.#k({isEditing:this.#x!==j.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#nt(),this.#K(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(let i of this.#p)this.#N(i.defaultPropertiesToUpdate)}}getId(){return this.#I.id}get currentLayer(){return this.#n.get(this.#u)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#u}addLayer(t){this.#n.set(t.pageIndex,t),this.#A?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}updateMode(t,i=null,n=!1){return C(this,null,function*(){if(this.#x!==t&&!(this.#O&&(yield this.#O.promise,!this.#O))){if(this.#O=Promise.withResolvers(),this.#x=t,t===j.NONE){this.setEditingState(!1),this.#ot(),this._editorUndoBar?.hide(),this.#O.resolve();return}this.setEditingState(!0),yield this.#at(),this.unselectAll();for(let r of this.#n.values())r.updateMode(t);if(!i){n&&this.addNewEditorFromKeyboard(),this.#O.resolve();return}for(let r of this.#i.values())r.annotationElementId===i?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#O.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,i){if(this.#p){switch(t){case V.CREATE:this.currentLayer.addNewEditor();return;case V.HIGHLIGHT_DEFAULT_COLOR:this.#L?.updateColor(i);break;case V.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#z||=new Map).set(t,i),this.showAllEditors("highlight",i);break}for(let n of this.#y)n.updateParams(t,i);for(let n of this.#p)n.updateDefaultParams(t,i)}}showAllEditors(t,i,n=!1){for(let a of this.#i.values())a.editorType===t&&a.show(i);(this.#z?.get(V.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#N([[V.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#M!==t){this.#M=t;for(let i of this.#n.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}#at(){return C(this,null,function*(){if(!this.#A){this.#A=!0;let t=[];for(let i of this.#n.values())t.push(i.enable());yield Promise.all(t);for(let i of this.#i.values())i.enable()}})}#ot(){if(this.unselectAll(),this.#A){this.#A=!1;for(let t of this.#n.values())t.disable();for(let t of this.#i.values())t.disable()}}getEditors(t){let i=[];for(let n of this.#i.values())n.pageIndex===t&&i.push(n);return i}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#a.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#a.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#a.has(t)}removeDeletedAnnotationElement(t){this.#a.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Z(t){let i=this.#n.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#N(t.propertiesToUpdate))}get#ct(){let t=null;for(t of this.#y);return t}updateUI(t){this.#ct===t&&this.#N(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#N(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#y.has(t)){this.#y.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#y.add(t),t.select(),this.#N(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){this.#c?.commitOrRemove();for(let i of this.#y)i!==t&&i.unselect();this.#y.clear(),this.#y.add(t),t.select(),this.#N(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#y.has(t)}get firstSelectedEditor(){return this.#y.values().next().value}unselect(t){t.unselect(),this.#y.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#y.size!==0}get isEnterHandled(){return this.#y.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#k({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(t){this.#o.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}cleanUndoStack(t){this.#o.cleanType(t)}#H(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(let t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();let t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let i=t?[t]:[...this.#y],n=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(let a of i)a.remove()},r=()=>{for(let a of i)this.#Z(a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#Q(t){for(let i of this.#y)i.unselect();this.#y.clear();for(let i of t)i.isEmpty()||(this.#y.add(i),i.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#y)t.commit();this.#Q(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#x!==j.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(let t of this.#y)t.unselect();this.#y.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#F[0]+=t,this.#F[1]+=i;let[r,a]=this.#F,o=[...this.#y],c=1e3;this.#D&&clearTimeout(this.#D),this.#D=setTimeout(()=>{this.#D=null,this.#F[0]=this.#F[1]=0,this.addCommands({cmd:()=>{for(let l of o)this.#i.has(l.id)&&l.translateInPage(r,a)},undo:()=>{for(let l of o)this.#i.has(l.id)&&l.translateInPage(-r,-a)},mustExec:!1})},c);for(let l of o)l.translateInPage(t,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#h=new Map;for(let t of this.#y)this.#h.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#h)return!1;this.disableUserSelect(!1);let t=this.#h;this.#h=null;let i=!1;for(let[{x:r,y:a,pageIndex:o},c]of t)c.newX=r,c.newY=a,c.newPageIndex=o,i||=r!==c.savedX||a!==c.savedY||o!==c.savedPageIndex;if(!i)return!1;let n=(r,a,o,c)=>{if(this.#i.has(r.id)){let l=this.#n.get(c);l?r._setParentAndPosition(l,a,o):(r.pageIndex=c,r.x=a,r.y=o)}};return this.addCommands({cmd:()=>{for(let[r,{newX:a,newY:o,newPageIndex:c}]of t)n(r,a,o,c)},undo:()=>{for(let[r,{savedX:a,savedY:o,savedPageIndex:c}]of t)n(r,a,o,c)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#h)for(let n of this.#h.keys())n.drag(t,i)}rebuild(t){if(t.parent===null){let i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#y.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#x}get imageManager(){return H(this,"imageManager",new uo)}getSelectionBoxes(t){if(!t)return null;let i=document.getSelection();for(let d=0,u=i.rangeCount;d<u;d++)if(!t.contains(i.getRangeAt(d).commonAncestorContainer))return null;let{x:n,y:r,width:a,height:o}=t.getBoundingClientRect(),c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,u,h,p)=>({x:(u-r)/o,y:1-(d+h-n)/a,width:p/o,height:h/a});break;case"180":c=(d,u,h,p)=>({x:1-(d+h-n)/a,y:1-(u+p-r)/o,width:h/a,height:p/o});break;case"270":c=(d,u,h,p)=>({x:1-(u+p-r)/o,y:(d-n)/a,width:p/o,height:h/a});break;default:c=(d,u,h,p)=>({x:(d-n)/a,y:(u-r)/o,width:h/a,height:p/o});break}let l=[];for(let d=0,u=i.rangeCount;d<u;d++){let h=i.getRangeAt(d);if(!h.collapsed)for(let{x:p,y:m,width:f,height:b}of h.getClientRects())f===0||b===0||l.push(c(p,m,f,b))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#l||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){let i=this.#l?.get(t.data.id);if(!i)return;let n=this.#s.getRawValue(i);n&&(this.#x===j.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}}return s})(),fu=(()=>{class s{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#l=!1;#o=null;#d=null;#c=null;#u=null;#a=!1;static#h=null;static _l10n=null;constructor(t){this.#d=t,this.#a=t._uiManager.useNewAltTextFlow,s.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){s._l10n??=t}render(){return C(this,null,function*(){let t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";let i=this.#n=document.createElement("span");t.append(i),this.#a?(t.classList.add("new"),t.setAttribute("data-l10n-id",s.#h.missing),i.setAttribute("data-l10n-id",s.#h["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=this.#d._uiManager._signal;t.addEventListener("contextmenu",se,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});let r=a=>{a.preventDefault(),this.#d._uiManager.editAltText(this.#d),this.#a&&this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#l=!0,r(a))},{signal:n}),yield this.#m(),t})}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#a?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#a?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}setGuessedText(t){return C(this,null,function*(){this.#t===null&&(this.#c=t,this.#u=yield s._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())})}toggleAltTextBadge(t=!1){if(!this.#a||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){let i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#d.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#c===i&&(i=this.#u),{altText:i,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#u}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:n,textWithDisclaimer:r,cancel:a=!1}){n&&(this.#c=n,this.#u=r),!(this.#t===t&&this.#e===i)&&(a||(this.#t=t,this.#e=i),this.#m())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}#m(){return C(this,null,function*(){let t=this.#i;if(!t)return;if(this.#a){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",s.#h[this.#p]),this.#n?.setAttribute("data-l10n-id",s.#h[`${this.#p}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#d.id}`;let r=100,a=this.#d._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#d._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:a})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#d.getImageForAltText()?.setAttribute("aria-describedby",i.id)})}}return s})(),ot=class s{#t=null;#e=null;#i=null;#n=!1;#r=null;#s="";#l=!1;#o=null;#d=null;#c=null;#u=null;#a="";#h=!1;#p=null;#m=!1;#g=!1;#f=!1;#b=null;#v=0;#_=0;#w=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#S=s._zIndex++;static _borderLineWidth=-1;static _colorManager=new po;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let e=s.prototype._resizeWithKeyboard,t=Cn.TRANSLATE_SMALL,i=Cn.TRANSLATE_BIG;return H(this,"_resizerKeyboardManager",new ai([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],s.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[r,a];let[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return H(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new mo({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(s._l10n??=e,s._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),s._borderLineWidth!==-1)return;let i=getComputedStyle(document.documentElement);s._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Z("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(e){this.#E=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#D(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#h?this.#h=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,n){let[r,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(e+i)/r,this.y=(t+n)/a,this.fixAndSetPosition()}#C([e,t],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/e,this.y+=n/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#C(this.parentDimensions,e,t)}translateInPage(e,t){this.#p||=[this.x,this.y,this.width,this.height],this.#C(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#p||=[this.x,this.y,this.width,this.height];let{div:i,parentDimensions:[n,r]}=this;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this,[c,l]=this.getBaseTranslation();a+=c,o+=l;let{style:d}=i;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:i}=s,n=i/e,r=i/t;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[i,n]}=this,{x:r,y:a,width:o,height:c}=this;if(o*=i,c*=n,r*=i,a*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(i-o,r)),a=Math.max(0,Math.min(n-c,a));break;case 90:r=Math.max(0,Math.min(i-c,r)),a=Math.min(n,Math.max(o,a));break;case 180:r=Math.min(i,Math.max(o,r)),a=Math.min(n,Math.max(c,a));break;case 270:r=Math.min(i,Math.max(c,r)),a=Math.max(0,Math.min(n-o,a));break}this.x=r/=i,this.y=a/=n;let[l,d]=this.getBaseTranslation();r+=l,a+=d,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#I(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return s.#I(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return s.#I(e,t,360-this.parentRotation)}#A(e){switch(e){case 90:{let[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){let[i,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/i).toFixed(2)}%`,this.#l||(r.height=`${(100*t/n).toFixed(2)}%`)}fixDims(){let{style:e}=this.div,{height:t,width:i}=e,n=i.endsWith("%"),r=!this.#l&&t.endsWith("%");if(n&&r)return;let[a,o]=this.parentDimensions;n||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#l&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#M(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let i of e){let n=document.createElement("div");this.#o.append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",this.#T.bind(this,i),{signal:t}),n.addEventListener("contextmenu",se,{signal:t}),n.tabIndex=-1}this.div.prepend(this.#o)}#T(e,t){t.preventDefault();let{isMac:i}=Et.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#i?.toggle(!1);let n=this._isDraggable;this._isDraggable=!1,this.#d=[t.screenX,t.screenY];let r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",ne,{passive:!1,signal:a}),window.addEventListener("contextmenu",se,{signal:a}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let l=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=o,this.div.style.cursor=c,this.#L()};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}#R(e,t,i,n){this.width=i,this.height=n,this.x=e,this.y=t;let[r,a]=this.parentDimensions;this.setDims(r*i,a*n),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#c)return;let{savedX:e,savedY:t,savedWidth:i,savedHeight:n}=this.#c;this.#c=null;let r=this.x,a=this.y,o=this.width,c=this.height;r===e&&a===t&&o===i&&c===n||this.addCommands({cmd:this.#R.bind(this,r,a,o,c),undo:this.#R.bind(this,e,t,i,n),mustExec:!0})}#j(e,t){let[i,n]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,l=s.MIN_SIZE/i,d=s.MIN_SIZE/n,u=I=>Math.round(I*1e4)/1e4,h=this.#A(this.rotation),p=(I,L)=>[h[0]*I+h[2]*L,h[1]*I+h[3]*L],m=this.#A(360-this.rotation),f=(I,L)=>[m[0]*I+m[2]*L,m[1]*I+m[3]*L],b,g,v=!1,y=!1;switch(e){case"topLeft":v=!0,b=(I,L)=>[0,0],g=(I,L)=>[I,L];break;case"topMiddle":b=(I,L)=>[I/2,0],g=(I,L)=>[I/2,L];break;case"topRight":v=!0,b=(I,L)=>[I,0],g=(I,L)=>[0,L];break;case"middleRight":y=!0,b=(I,L)=>[I,L/2],g=(I,L)=>[0,L/2];break;case"bottomRight":v=!0,b=(I,L)=>[I,L],g=(I,L)=>[0,0];break;case"bottomMiddle":b=(I,L)=>[I/2,L],g=(I,L)=>[I/2,0];break;case"bottomLeft":v=!0,b=(I,L)=>[0,L],g=(I,L)=>[I,0];break;case"middleLeft":y=!0,b=(I,L)=>[0,L/2],g=(I,L)=>[I,L/2];break}let _=b(o,c),A=g(o,c),x=p(...A),E=u(r+x[0]),R=u(a+x[1]),D=1,W=1,$,Q;if(t.fromKeyboard)({deltaX:$,deltaY:Q}=t);else{let{screenX:I,screenY:L}=t,[re,me]=this.#d;[$,Q]=this.screenToPageTranslation(I-re,L-me),this.#d[0]=I,this.#d[1]=L}if([$,Q]=f($/i,Q/n),v){let I=Math.hypot(o,c);D=W=Math.max(Math.min(Math.hypot(A[0]-_[0]-$,A[1]-_[1]-Q)/I,1/o,1/c),l/o,d/c)}else y?D=Math.max(l,Math.min(1,Math.abs(A[0]-_[0]-$)))/o:W=Math.max(d,Math.min(1,Math.abs(A[1]-_[1]-Q)))/c;let ft=u(o*D),Y=u(c*W);x=p(...g(ft,Y));let Lt=E-x[0],J=R-x[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=ft,this.height=Y,this.x=Lt,this.y=J,this.setDims(i*ft,n*Y),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}addEditToolbar(){return C(this,null,function*(){return this._editToolbar||this.#g?this._editToolbar:(this._editToolbar=new oo(this),this.div.append(this._editToolbar.render()),this.#i&&(yield this._editToolbar.addAltText(this.#i)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return C(this,null,function*(){this.#i||(fu.initialize(s._l10n),this.#i=new fu(this),this.#t&&(this.#i.data=this.#t,this.#t=null),yield this.addEditToolbar())})}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}setGuessedAltText(e){return C(this,null,function*(){yield this.#i?.setGuessedText(e)})}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#n?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#P();let[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);let[i,n]=this.getInitialTranslation();return this.translate(i,n),zs(this,this.div,["pointerdown"]),this._uiManager._editorUndoBar?.hide(),this.div}pointerdown(e){let{isMac:t}=Et.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#h=!0,this._isDraggable){this.#y(e);return}this.#x(e)}get isSelected(){return this._uiManager.isSelected(this)}#x(e){let{isMac:t}=Et.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#y(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let i=new AbortController,n=this._uiManager.combinedSignal(i),r={capture:!0,passive:!1,signal:n},a=c=>{i.abort(),this.#r=null,this.#h=!1,this._uiManager.endDragSession()||this.#x(c)};t&&(this.#v=e.clientX,this.#_=e.clientY,this.#r=e.pointerId,this.#s=e.pointerType,window.addEventListener("pointermove",c=>{let{clientX:l,clientY:d,pointerId:u}=c;if(u!==this.#r){ne(c);return}let[h,p]=this.screenToPageTranslation(l-this.#v,d-this.#_);this.#v=l,this.#_=d,this._uiManager.dragSelectedEditors(h,p)},r),window.addEventListener("touchmove",ne,r),window.addEventListener("pointerdown",c=>{c.isPrimary&&c.pointerType===this.#s&&a(c),ne(c)},r)),this._onStartDragging();let o=c=>{if(!this.#r||this.#r===c.pointerId){a(c),this._onStopDragging();return}ne(c)};window.addEventListener("pointerup",o,{signal:n}),window.addEventListener("blur",o,{signal:n})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){let n=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,l=e/n,d=t/n,u=this.x*r,h=this.y*a,p=this.width*r,m=this.height*a;switch(i){case 0:return[u+l+o,a-h-d-m+c,u+l+p+o,a-h-d+c];case 90:return[u+d+o,a-h+l+c,u+d+m+o,a-h+l+p+c];case 180:return[u-l-p+o,a-h+d+c,u-l+o,a-h+d+m+c];case 270:return[u-d-m+o,a-h-l-p+c,u-d+o,a-h-l+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[i,n,r,a]=e,o=r-i,c=a-n;switch(this.rotation){case 0:return[i,t-a,o,c];case 90:return[i,t-n,c,o];case 180:return[r,t-n,o,c];case 270:return[r,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#f}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&n>0&&e<r&&i>0}#P(){if(this.#u||!this.div)return;this.#u=new AbortController;let e=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#P()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Z("An editor must be serializable")}static deserialize(e,t,i){return C(this,null,function*(){let n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});n.rotation=e.rotation,n.#t=e.accessibilityData;let[r,a]=n.pageDimensions,[o,c,l,d]=n.getRectInCurrentCoords(e.rect,a);return n.x=o/r,n.y=c/a,n.width=l/r,n.height=d/a,n})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#D(),this.removeEditToolbar(),this.#w){for(let e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#o.classList.remove("hidden"),zs(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let t=this.#o.children;if(!this.#e){this.#e=Array.from(t);let a=this.#B.bind(this),o=this.#z.bind(this),c=this._uiManager._signal;for(let l of this.#e){let d=l.getAttribute("data-resizer-name");l.setAttribute("role","spinbutton"),l.addEventListener("keydown",a,{signal:c}),l.addEventListener("blur",o,{signal:c}),l.addEventListener("focus",this.#$.bind(this,d),{signal:c}),l.setAttribute("data-l10n-id",s._l10nResizer[d])}}let i=this.#e[0],n=0;for(let a of t){if(a===i)break;n++}let r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==n){if(r<n)for(let o=0;o<n-r;o++)this.#o.append(this.#o.firstChild);else if(r>n)for(let o=0;o<r-n;o++)this.#o.firstChild.before(this.#o.lastChild);let a=0;for(let o of t){let l=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",s._l10nResizer[l])}}this.#F(0),this.#f=!0,this.#o.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#B(e){s._resizerKeyboardManager.exec(this,e)}#z(e){this.#f&&e.relatedTarget?.parentNode!==this.#o&&this.#D()}#$(e){this.#a=this.#f?e:""}#F(e){if(this.#e)for(let t of this.#e)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#f&&this.#j(this.#a,{deltaX:e,deltaY:t,fromKeyboard:!0})}#D(){this.#f=!1,this.#F(-1),this.#L()}_stopResizingWithKeyboard(){this.#D(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#l=!0;let i=e/t,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;let{action:i}=e,n=this.#w.get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},s._telemetryTimeout),this.#w.set(i,n);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){let{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}},mo=class extends ot{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},gu=3285377520,Kt=4294901760,pe=65535,$s=class{constructor(e){this.h1=e?e&4294967295:gu,this.h2=e?e&4294967295:gu}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let f=0,b=e.length;f<b;f++){let g=e.charCodeAt(f);g<=255?t[i++]=g:(t[i++]=g>>>8,t[i++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let n=i>>2,r=i-n*4,a=new Uint32Array(t.buffer,0,n),o=0,c=0,l=this.h1,d=this.h2,u=3432918353,h=461845907,p=u&pe,m=h&pe;for(let f=0;f<n;f++)f&1?(o=a[f],o=o*u&Kt|o*p&pe,o=o<<15|o>>>17,o=o*h&Kt|o*m&pe,l^=o,l=l<<13|l>>>19,l=l*5+3864292196):(c=a[f],c=c*u&Kt|c*p&pe,c=c<<15|c>>>17,c=c*h&Kt|c*m&pe,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,r){case 3:o^=t[n*4+2]<<16;case 2:o^=t[n*4+1]<<8;case 1:o^=t[n*4],o=o*u&Kt|o*p&pe,o=o<<15|o>>>17,o=o*h&Kt|o*m&pe,n&1?l^=o:d^=o}this.h1=l,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Kt|e*36045&pe,t=t*4283543511&Kt|((t<<16|e>>>16)*2950163797&Kt)>>>16,e^=t>>>1,e=e*444984403&Kt|e*60499&pe,t=t*3301882366&Kt|((t<<16|e>>>16)*3120437893&Kt)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},fo=Object.freeze({map:null,hash:"",transfer:void 0}),Tn=class{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let i=this.#i.get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return this.#i.get(e)}remove(e){if(this.#i.delete(e),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let t of this.#i.values())if(t instanceof ot)return;this.onAnnotationEditor(null)}}setValue(e,t){let i=this.#i.get(e),n=!1;if(i!==void 0)for(let[r,a]of Object.entries(t))i[r]!==a&&(n=!0,i[r]=a);else n=!0,this.#i.set(e,t);n&&this.#n(),t instanceof ot&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#i.has(e)}getAll(){return this.#i.size>0?Sc(this.#i):null}setAll(e){for(let[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Hs(this)}get serializable(){if(this.#i.size===0)return fo;let e=new Map,t=new $s,i=[],n=Object.create(null),r=!1;for(let[a,o]of this.#i){let c=o instanceof ot?o.serialize(!1,n):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||=!!c.bitmap)}if(r)for(let a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:fo}get editorStats(){let e=null,t=new Map;for(let i of this.#i.values()){if(!(i instanceof ot))continue;let n=i.telemetryFinalData;if(!n)continue;let{type:r}=n;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||=Object.create(null);let a=e[r]||=new Map;for(let[o,c]of Object.entries(n)){if(o==="type")continue;let l=a.get(o);l||(l=new Map,a.set(o,l));let d=l.get(c)??0;l.set(c,d+1)}}for(let[i,n]of t)e[i]=n.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;let e=[];for(let t of this.#i.values())!(t instanceof ot)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#e={ids:new Set(e),hash:e.join(",")}}},Hs=class extends Tn{#t;constructor(e){super();let{map:t,hash:i,transfer:n}=e.serializable,r=structuredClone(t,n?{transfer:n}:null);this.#t={map:r,hash:i,transfer:n}}get print(){Z("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return H(this,"modifiedIds",{ids:new Set,hash:""})}},go=class{#t=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(i){return C(this,arguments,function*({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#t.has(e.loadedName))){if(mt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:n,src:r,style:a}=e,o=new FontFace(n,r,a);this.addNativeFontFace(o);try{yield o.load(),this.#t.add(n),t?.(e)}catch{U(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Z("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(e){return C(this,null,function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){yield this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{yield i.loaded}catch(n){throw U(`Failed to load font '${i.family}': '${n}'.`),e.disableFontFace=!0,n}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;yield new Promise(i=>{let n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,n)})}})}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return H(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Pt||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),H(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(mt(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){let r=i.shift();setTimeout(r.callback,0)}}let{loadingRequests:i}=this,n={done:!1,complete:t,callback:e};return i.push(n),n}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return H(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(_,A){return _.charCodeAt(A)<<24|_.charCodeAt(A+1)<<16|_.charCodeAt(A+2)<<8|_.charCodeAt(A+3)&255}function n(_,A,x,E){let R=_.substring(0,A),D=_.substring(A+x);return R+E+D}let r,a,o=this._document.createElement("canvas");o.width=1,o.height=1;let c=o.getContext("2d"),l=0;function d(_,A){if(++l>30){U("Load test font never loaded."),A();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(d.bind(null,_,A))}let u=`lt${Date.now()}${this.loadTestFontId++}`,h=this._loadTestFont;h=n(h,976,u.length,u);let m=16,f=1482184792,b=i(h,m);for(r=0,a=u.length-3;r<a;r+=4)b=b-f+i(u,r)|0;r<u.length&&(b=b-f+i(u+"XXX",r)|0),h=n(h,m,4,vf(b));let g=`url(data:font/opentype;base64,${btoa(h)});`,v=`@font-face {font-family:"${u}";src:${g}}`;this.insertRule(v);let y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(let _ of[e.loadedName,u]){let A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=_,y.append(A)}this._document.body.append(y),d(u,()=>{y.remove(),t.complete()})}},bo=class{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(let n in e)this[n]=e[n];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${Ef(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){U(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(r,a){};let n=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case xe.BEZIER_CURVE_TO:{let[o,c,l,d,u,h]=i.slice(r,r+6);n.push(p=>p.bezierCurveTo(o,c,l,d,u,h)),r+=6}break;case xe.MOVE_TO:{let[o,c]=i.slice(r,r+2);n.push(l=>l.moveTo(o,c)),r+=2}break;case xe.LINE_TO:{let[o,c]=i.slice(r,r+2);n.push(l=>l.lineTo(o,c)),r+=2}break;case xe.QUADRATIC_CURVE_TO:{let[o,c,l,d]=i.slice(r,r+4);n.push(u=>u.quadraticCurveTo(o,c,l,d)),r+=4}break;case xe.RESTORE:n.push(o=>o.restore());break;case xe.SAVE:n.push(o=>o.save());break;case xe.SCALE:mt(n.length===2,"Scale command is only valid at the third position.");break;case xe.TRANSFORM:{let[o,c,l,d,u,h]=i.slice(r,r+6);n.push(p=>p.transform(o,c,l,d,u,h)),r+=6}break;case xe.TRANSLATE:{let[o,c]=i.slice(r,r+2);n.push(l=>l.translate(o,c)),r+=2}break}return n.push(r=>r.closePath()),this.compiledGlyphs[t]=function(a,o){n[0](a),n[1](a),a.scale(o,-o);for(let c=2,l=n.length;c<l;c++)n[c](a)}}},Vs=class{#t=!1;constructor({enableHWA:e=!1}){this.#t=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Z("Abstract method `_createCanvas` called.")}},vo=class extends Vs{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let i=this._document.createElement("canvas");return i.width=e,i.height=t,i}},Gs=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(t){return C(this,arguments,function*({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let i=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(i).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})})}_fetch(e){return C(this,null,function*(){Z("Abstract method `_fetch` called.")})}},Ws=class extends Gs{_fetch(e){return C(this,null,function*(){let t=yield br(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):gr(t)})}},qs=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,n,r){return"none"}destroy(e=!1){}},yo=class extends qs{#t;#e;#i;#n;#r;#s;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#r=t}get#o(){return this.#e||=new Map}get#d(){return this.#s||=new Map}get#c(){if(!this.#i){let e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let i=this.#r.createElementNS(Ee,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(Ee,"defs"),e.append(i),i.append(this.#i),this.#r.body.append(e)}return this.#i}#u(e){if(e.length===1){let c=e[0],l=new Array(256);for(let u=0;u<256;u++)l[u]=c[u]/255;let d=l.join(",");return[d,d,d]}let[t,i,n]=e,r=new Array(256),a=new Array(256),o=new Array(256);for(let c=0;c<256;c++)r[c]=t[c]/255,a[c]=i[c]/255,o[c]=n[c]/255;return[r.join(","),a.join(","),o.join(",")]}#a(e){if(this.#t===void 0){this.#t="";let t=this.#r.URL;t!==this.#r.baseURI&&(vr(t)?U('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=t.split("#",1)[0])}return`url(${this.#t}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;let[i,n,r]=this.#u(e),a=e.length===1?i:`${i}${n}${r}`;if(t=this.#o.get(a),t)return this.#o.set(e,t),t;let o=`g_${this.#n}_transfer_map_${this.#l++}`,c=this.#a(o);this.#o.set(e,c),this.#o.set(a,c);let l=this.#m(o);return this.#f(i,n,r,l),c}addHCMFilter(e,t){let i=`${e}-${t}`,n="base",r=this.#d.get(n);if(r?.key===i||(r?(r.filter?.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},this.#d.set(n,r)),!e||!t))return r.url;let a=this.#v(e);e=M.makeHexColor(...a);let o=this.#v(t);if(t=M.makeHexColor(...o),this.#c.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return r.url;let c=new Array(256);for(let p=0;p<=255;p++){let m=p/255;c[p]=m<=.03928?m/12.92:((m+.055)/1.055)**2.4}let l=c.join(","),d=`g_${this.#n}_hcm_filter`,u=r.filter=this.#m(d);this.#f(l,l,l,u),this.#p(u);let h=(p,m)=>{let f=a[p]/255,b=o[p]/255,g=new Array(m+1);for(let v=0;v<=m;v++)g[v]=f+v/m*(b-f);return g.join(",")};return this.#f(h(0,5),h(1,5),h(2,5),u),r.url=this.#a(d),r.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;let[i]=this.#u([e]),n=`alpha_${i}`;if(t=this.#o.get(n),t)return this.#o.set(e,t),t;let r=`g_${this.#n}_alpha_map_${this.#l++}`,a=this.#a(r);this.#o.set(e,a),this.#o.set(n,a);let o=this.#m(r);return this.#b(i,o),a}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let i,n;if(e?([i]=this.#u([e]),n=`luminosity_${i}`):n="luminosity",t=this.#o.get(n),t)return this.#o.set(e,t),t;let r=`g_${this.#n}_luminosity_map_${this.#l++}`,a=this.#a(r);this.#o.set(e,a),this.#o.set(n,a);let o=this.#m(r);return this.#h(o),e&&this.#b(i,o),a}addHighlightHCMFilter(e,t,i,n,r){let a=`${t}-${i}-${n}-${r}`,o=this.#d.get(e);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#d.set(e,o)),!t||!i))return o.url;let[c,l]=[t,i].map(this.#v.bind(this)),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[h,p]=[n,r].map(this.#v.bind(this));u<d&&([d,u,h,p]=[u,d,p,h]),this.#c.style.color="";let m=(g,v,y)=>{let _=new Array(256),A=(u-d)/y,x=g/255,E=(v-g)/(255*y),R=0;for(let D=0;D<=y;D++){let W=Math.round(d+D*A),$=x+D*E;for(let Q=R;Q<=W;Q++)_[Q]=$;R=W+1}for(let D=R;D<256;D++)_[D]=_[R-1];return _.join(",")},f=`g_${this.#n}_hcm_${e}_filter`,b=o.filter=this.#m(f);return this.#p(b),this.#f(m(h[0],p[0],5),m(h[1],p[1],5),m(h[2],p[2],5),b),o.url=this.#a(f),o.url}destroy(e=!1){e&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#l=0)}#h(e){let t=this.#r.createElementNS(Ee,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){let t=this.#r.createElementNS(Ee,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){let t=this.#r.createElementNS(Ee,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#g(e,t,i){let n=this.#r.createElementNS(Ee,t);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),e.append(n)}#f(e,t,i,n){let r=this.#r.createElementNS(Ee,"feComponentTransfer");n.append(r),this.#g(r,"feFuncR",e),this.#g(r,"feFuncG",t),this.#g(r,"feFuncB",i)}#b(e,t){let i=this.#r.createElementNS(Ee,"feComponentTransfer");t.append(i),this.#g(i,"feFuncA",e)}#v(e){return this.#c.style.color=e,Ic(getComputedStyle(this.#c).getPropertyValue("color"))}},Xs=class{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(t){return C(this,arguments,function*({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let i=`${this.baseUrl}${e}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load font data at: ${i}`)})})}_fetch(e){return C(this,null,function*(){Z("Abstract method `_fetch` called.")})}},Ys=class extends Xs{_fetch(e){return C(this,null,function*(){let t=yield br(e,"arraybuffer");return new Uint8Array(t)})}};function ku(s){return C(this,null,function*(){let t=yield process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)})}var _o=class extends qs{},wo=class extends Vs{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}},Ao=class extends Gs{_fetch(e){return C(this,null,function*(){return ku(e)})}},xo=class extends Xs{_fetch(e){return C(this,null,function*(){return ku(e)})}},Tt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Eo(s,e){if(!e)return;let t=e[2]-e[0],i=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],t,i),s.clip(n)}var In=class{getPattern(){Z("Abstract method `getPattern` called.")}},So=class extends In{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,n){let r;if(n===Tt.STROKE||n===Tt.FILL){let a=t.current.getClippedPathBoundingBox(n,nt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,l=t.cachedCanvases.getCanvas("pattern",o,c),d=l.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),i=M.transform(i,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),Eo(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=e.createPattern(l.canvas,"no-repeat");let u=new DOMMatrix(i);r.setTransform(u)}else Eo(e,this._bbox),r=this._createGradient(e);return r}};function io(s,e,t,i,n,r,a,o){let c=e.coords,l=e.colors,d=s.data,u=s.width*4,h;c[t+1]>c[i+1]&&(h=t,t=i,i=h,h=r,r=a,a=h),c[i+1]>c[n+1]&&(h=i,i=n,n=h,h=a,a=o,o=h),c[t+1]>c[i+1]&&(h=t,t=i,i=h,h=r,r=a,a=h);let p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,f=(c[i]+e.offsetX)*e.scaleX,b=(c[i+1]+e.offsetY)*e.scaleY,g=(c[n]+e.offsetX)*e.scaleX,v=(c[n+1]+e.offsetY)*e.scaleY;if(m>=v)return;let y=l[r],_=l[r+1],A=l[r+2],x=l[a],E=l[a+1],R=l[a+2],D=l[o],W=l[o+1],$=l[o+2],Q=Math.round(m),ft=Math.round(v),Y,Lt,J,I,L,re,me,zt;for(let yt=Q;yt<=ft;yt++){if(yt<b){let et=yt<m?0:(m-yt)/(m-b);Y=p-(p-f)*et,Lt=y-(y-x)*et,J=_-(_-E)*et,I=A-(A-R)*et}else{let et;yt>v?et=1:b===v?et=0:et=(b-yt)/(b-v),Y=f-(f-g)*et,Lt=x-(x-D)*et,J=E-(E-W)*et,I=R-(R-$)*et}let ht;yt<m?ht=0:yt>v?ht=1:ht=(m-yt)/(m-v),L=p-(p-g)*ht,re=y-(y-D)*ht,me=_-(_-W)*ht,zt=A-(A-$)*ht;let ci=Math.round(Math.min(Y,L)),Pi=Math.round(Math.max(Y,L)),$t=u*yt+ci*4;for(let et=ci;et<=Pi;et++)ht=(Y-et)/(Y-L),ht<0?ht=0:ht>1&&(ht=1),d[$t++]=Lt-(Lt-re)*ht|0,d[$t++]=J-(J-me)*ht|0,d[$t++]=I-(I-zt)*ht|0,d[$t++]=255}}function Mf(s,e,t){let i=e.coords,n=e.colors,r,a;switch(e.type){case"lattice":let o=e.verticesPerRow,c=Math.floor(i.length/o)-1,l=o-1;for(r=0;r<c;r++){let d=r*o;for(let u=0;u<l;u++,d++)io(s,t,i[d],i[d+1],i[d+o],n[d],n[d+1],n[d+o]),io(s,t,i[d+o+1],i[d+1],i[d+o],n[d+o+1],n[d+1],n[d+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)io(s,t,i[r],i[r+1],i[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}var Co=class extends In{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){let o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-c,u=Math.min(Math.ceil(Math.abs(l*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=l/u,m=d/h,f={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/m},b=u+2*2,g=h+2*2,v=i.getCanvas("mesh",b,g),y=v.context,_=y.createImageData(u,h);if(t){let x=_.data;for(let E=0,R=x.length;E<R;E+=4)x[E]=t[0],x[E+1]=t[1],x[E+2]=t[2],x[E+3]=255}for(let x of this._figures)Mf(_,x,f);return y.putImageData(_,2,2),{canvas:v.canvas,offsetX:o-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(e,t,i,n){Eo(e,this._bbox);let r;if(n===Tt.SHADING)r=M.singularValueDecompose2dScale(nt(e));else if(r=M.singularValueDecompose2dScale(t.baseTransform),this.matrix){let o=M.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}let a=this._createMeshCanvas(r,n===Tt.SHADING?null:this._background,t.cachedCanvases);return n!==Tt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}},To=class extends In{getPattern(){return"hotpink"}};function Rf(s){switch(s[0]){case"RadialAxial":return new So(s);case"Mesh":return new Co(s);case"Dummy":return new To}throw new Error(`Unknown IR type: ${s[0]}`)}var bu={COLORED:1,UNCOLORED:2},kf=(()=>{class s{static MAX_PATTERN_SIZE=3e3;constructor(t,i,n,r,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=i,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(t){let{bbox:i,operatorList:n,paintType:r,tilingType:a,color:o,canvasGraphicsFactory:c}=this,{xstep:l,ystep:d}=this;l=Math.abs(l),d=Math.abs(d),fr("TilingType: "+a);let u=i[0],h=i[1],p=i[2],m=i[3],f=p-u,b=m-h,g=M.singularValueDecompose2dScale(this.matrix),v=M.singularValueDecompose2dScale(this.baseTransform),y=g[0]*v[0],_=g[1]*v[1],A=f,x=b,E=!1,R=!1,D=Math.ceil(l*y),W=Math.ceil(d*_),$=Math.ceil(f*y),Q=Math.ceil(b*_);D>=$?A=l:E=!0,W>=Q?x=d:R=!0;let ft=this.getSizeAndScale(A,this.ctx.canvas.width,y),Y=this.getSizeAndScale(x,this.ctx.canvas.height,_),Lt=t.cachedCanvases.getCanvas("pattern",ft.size,Y.size),J=Lt.context,I=c.createCanvasGraphics(J);if(I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,r,o),J.translate(-ft.scale*u,-Y.scale*h),I.transform(ft.scale,0,0,Y.scale,0,0),J.save(),this.clipBbox(I,u,h,p,m),I.baseTransform=nt(I.ctx),I.executeOperatorList(n),I.endDrawing(),J.restore(),E||R){let L=Lt.canvas;E&&(A=l),R&&(x=d);let re=this.getSizeAndScale(A,this.ctx.canvas.width,y),me=this.getSizeAndScale(x,this.ctx.canvas.height,_),zt=re.size,yt=me.size,ht=t.cachedCanvases.getCanvas("pattern-workaround",zt,yt),ci=ht.context,Pi=E?Math.floor(f/l):0,$t=R?Math.floor(b/d):0;for(let et=0;et<=Pi;et++)for(let ae=0;ae<=$t;ae++)ci.drawImage(L,zt*et,yt*ae,zt,yt,0,0,zt,yt);return{canvas:ht.canvas,scaleX:re.scale,scaleY:me.scale,offsetX:u,offsetY:h}}return{canvas:Lt.canvas,scaleX:ft.scale,scaleY:Y.scale,offsetX:u,offsetY:h}}getSizeAndScale(t,i,n){let r=Math.max(s.MAX_PATTERN_SIZE,i),a=Math.ceil(t*n);return a>=r?a=r:n=a/t,{scale:n,size:a}}clipBbox(t,i,n,r,a){let o=r-i,c=a-n;t.ctx.rect(i,n,o,c),t.current.updateRectMinMax(nt(t.ctx),[i,n,r,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,n){let r=t.ctx,a=t.current;switch(i){case bu.COLORED:let o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case bu.UNCOLORED:let c=M.makeHexColor(n[0],n[1],n[2]);r.fillStyle=c,r.strokeStyle=c,a.fillColor=c,a.strokeColor=c;break;default:throw new ao(`Unsupported paint type: ${i}`)}}getPattern(t,i,n,r){let a=n;r!==Tt.SHADING&&(a=M.transform(a,i.baseTransform),this.matrix&&(a=M.transform(a,this.matrix)));let o=this.createPatternCanvas(i),c=new DOMMatrix(a);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);let l=t.createPattern(o.canvas,"repeat");return l.setTransform(c),l}}return s})();function Df({src:s,srcPos:e=0,dest:t,width:i,height:n,nonBlackColor:r=4294967295,inverseDecode:a=!1}){let o=Et.isLittleEndian?4278190080:255,[c,l]=a?[r,o]:[o,r],d=i>>3,u=i&7,h=s.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<n;m++){for(let b=e+d;e<b;e++){let g=e<h?s[e]:255;t[p++]=g&128?l:c,t[p++]=g&64?l:c,t[p++]=g&32?l:c,t[p++]=g&16?l:c,t[p++]=g&8?l:c,t[p++]=g&4?l:c,t[p++]=g&2?l:c,t[p++]=g&1?l:c}if(u===0)continue;let f=e<h?s[e++]:255;for(let b=0;b<u;b++)t[p++]=f&1<<7-b?l:c}return{srcPos:e,destPos:p}}var vu=16,yu=100,Pf=15,_u=10,wu=1e3,Ft=16;function Lf(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(i,n){e.translate(i,n),this.__originalTranslate(i,n)},s.scale=function(i,n){e.scale(i,n),this.__originalScale(i,n)},s.transform=function(i,n,r,a,o,c){e.transform(i,n,r,a,o,c),this.__originalTransform(i,n,r,a,o,c)},s.setTransform=function(i,n,r,a,o,c){e.setTransform(i,n,r,a,o,c),this.__originalSetTransform(i,n,r,a,o,c)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(i){e.rotate(i),this.__originalRotate(i)},s.clip=function(i){e.clip(i),this.__originalClip(i)},s.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},s.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},s.bezierCurveTo=function(t,i,n,r,a,o){e.bezierCurveTo(t,i,n,r,a,o),this.__originalBezierCurveTo(t,i,n,r,a,o)},s.rect=function(t,i,n,r){e.rect(t,i,n,r),this.__originalRect(t,i,n,r)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}var Io=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let n;return this.cache[e]!==void 0?(n=this.cache[e],this.canvasFactory.reset(n,t,i)):(n=this.canvasFactory.create(t,i),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};function ks(s,e,t,i,n,r,a,o,c,l){let[d,u,h,p,m,f]=nt(s);if(u===0&&h===0){let v=a*d+m,y=Math.round(v),_=o*p+f,A=Math.round(_),x=(a+c)*d+m,E=Math.abs(Math.round(x)-y)||1,R=(o+l)*p+f,D=Math.abs(Math.round(R)-A)||1;return s.setTransform(Math.sign(d),0,0,Math.sign(p),y,A),s.drawImage(e,t,i,n,r,0,0,E,D),s.setTransform(d,u,h,p,m,f),[E,D]}if(d===0&&p===0){let v=o*h+m,y=Math.round(v),_=a*u+f,A=Math.round(_),x=(o+l)*h+m,E=Math.abs(Math.round(x)-y)||1,R=(a+c)*u+f,D=Math.abs(Math.round(R)-A)||1;return s.setTransform(0,Math.sign(u),Math.sign(h),0,y,A),s.drawImage(e,t,i,n,r,0,0,D,E),s.setTransform(d,u,h,p,m,f),[D,E]}s.drawImage(e,t,i,n,r,a,o,c,l);let b=Math.hypot(d,u),g=Math.hypot(h,p);return[b*c,g*l]}function Of(s){let{width:e,height:t}=s;if(e>wu||t>wu)return null;let i=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1,a=new Uint8Array(r*(t+1)),o,c,l,d=e+7&-8,u=new Uint8Array(d*t),h=0;for(let g of s.data){let v=128;for(;v>0;)u[h++]=g&v?0:255,v>>=1}let p=0;for(h=0,u[h]!==0&&(a[0]=1,++p),c=1;c<e;c++)u[h]!==u[h+1]&&(a[c]=u[h]?2:1,++p),h++;for(u[h]!==0&&(a[c]=2,++p),o=1;o<t;o++){h=o*d,l=o*r,u[h-d]!==u[h]&&(a[l]=u[h]?1:8,++p);let g=(u[h]?4:0)+(u[h-d]?8:0);for(c=1;c<e;c++)g=(g>>2)+(u[h+1]?4:0)+(u[h-d+1]?8:0),n[g]&&(a[l+c]=n[g],++p),h++;if(u[h-d]!==u[h]&&(a[l+c]=u[h]?2:4,++p),p>i)return null}for(h=d*(t-1),l=o*r,u[h]!==0&&(a[l]=8,++p),c=1;c<e;c++)u[h]!==u[h+1]&&(a[l+c]=u[h]?4:8,++p),h++;if(u[h]!==0&&(a[l+c]=4,++p),p>i)return null;let m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),f=new Path2D;for(o=0;p&&o<=t;o++){let g=o*r,v=g+e;for(;g<v&&!a[g];)g++;if(g===v)continue;f.moveTo(g%r,o);let y=g,_=a[g];do{let A=m[_];do g+=A;while(!a[g]);let x=a[g];x!==5&&x!==10?(_=x,a[g]=0):(_=x&51*_>>4,a[g]&=_>>2|_<<2),f.lineTo(g%r,g/r|0),a[g]||--p}while(y!==g);--o}return u=null,a=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(f),g.beginPath(),g.restore()}}var Ks=class{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Mu,this.textMatrixScale=1,this.fontMatrix=ro,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ct.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=M.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){let i=M.applyTransform(t,e),n=M.applyTransform(t.slice(2),e),r=M.applyTransform([t[0],t[3]],e),a=M.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],n[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],n[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],n[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],n[1],r[1],a[1])}updateScalingPathMinMax(e,t){M.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,n,r,a,o,c,l,d){let u=M.bezierBoundingBox(t,i,n,r,a,o,c,l,d);d||this.updateRectMinMax(e,u)}getPathBoundingBox(e=Tt.FILL,t=null){let i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Tt.STROKE){t||Z("Stroke bounding box must include transform.");let n=M.singularValueDecompose2dScale(t),r=n[0]*this.lineWidth/2,a=n[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){let e=M.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Tt.FILL,t=null){return M.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};function Au(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}let t=e.height,i=e.width,n=t%Ft,r=(t-n)/Ft,a=n===0?r:r+1,o=s.createImageData(i,Ft),c=0,l,d=e.data,u=o.data,h,p,m,f;if(e.kind===Ns.GRAYSCALE_1BPP){let b=d.byteLength,g=new Uint32Array(u.buffer,0,u.byteLength>>2),v=g.length,y=i+7>>3,_=4294967295,A=Et.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(m=h<r?Ft:n,l=0,p=0;p<m;p++){let x=b-c,E=0,R=x>y?i:x*8-7,D=R&-8,W=0,$=0;for(;E<D;E+=8)$=d[c++],g[l++]=$&128?_:A,g[l++]=$&64?_:A,g[l++]=$&32?_:A,g[l++]=$&16?_:A,g[l++]=$&8?_:A,g[l++]=$&4?_:A,g[l++]=$&2?_:A,g[l++]=$&1?_:A;for(;E<R;E++)W===0&&($=d[c++],W=128),g[l++]=$&W?_:A,W>>=1}for(;l<v;)g[l++]=0;s.putImageData(o,0,h*Ft)}}else if(e.kind===Ns.RGBA_32BPP){for(p=0,f=i*Ft*4,h=0;h<r;h++)u.set(d.subarray(c,c+f)),c+=f,s.putImageData(o,0,p),p+=Ft;h<a&&(f=i*n*4,u.set(d.subarray(c,c+f)),s.putImageData(o,0,p))}else if(e.kind===Ns.RGB_24BPP)for(m=Ft,f=i*m,h=0;h<a;h++){for(h>=r&&(m=n,f=i*m),l=0,p=f;p--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;s.putImageData(o,0,h*Ft)}else throw new Error(`bad image kind: ${e.kind}`)}function xu(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}let t=e.height,i=e.width,n=t%Ft,r=(t-n)/Ft,a=n===0?r:r+1,o=s.createImageData(i,Ft),c=0,l=e.data,d=o.data;for(let u=0;u<a;u++){let h=u<r?Ft:n;({srcPos:c}=Df({src:l,srcPos:c,dest:d,width:i,height:h,nonBlackColor:0})),s.putImageData(o,0,u*Ft)}}function bn(s,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let i of t)s[i]!==void 0&&(e[i]=s[i]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Ds(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!Pt){let{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}}function Eu(s,e){if(e)return!0;let t=M.singularValueDecompose2dScale(s);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);let i=Math.fround((globalThis.devicePixelRatio||1)*Oe.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}var Ff=["butt","round","square"],Nf=["miter","round","bevel"],jf={},Su={},Ri=class s{constructor(e,t,i,n,r,{optionalContentConfig:a,markedContentStack:o=null},c,l){this.ctx=e,this.current=new Ks(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Io(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:n=null}){let r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){let c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...nt(this.compositeCtx))}this.ctx.save(),Ds(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=nt(this.ctx)}executeOperatorList(e,t,i,n){let r=e.argsArray,a=e.fnArray,o=t||0,c=r.length;if(c===o)return o;let l=c-o>_u&&typeof i=="function",d=l?Date.now()+Pf:0,u=0,h=this.commonObjs,p=this.objs,m;for(;;){if(n!==void 0&&o===n.nextBreakPoint)return n.breakIt(o,i),o;if(m=a[o],m!==ie.dependency)this[m].apply(this,r[o]);else for(let f of r[o]){let b=f.startsWith("g_")?h:p;if(!b.has(f))return b.get(f,i),o}if(o++,o===c)return o;if(l&&++u>_u){if(Date.now()>d)return i(),o;u=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){let i=e.width??e.displayWidth,n=e.height??e.displayHeight,r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,c=n,l="prescale1",d,u;for(;r>2&&o>1||a>2&&c>1;){let h=o,p=c;r>2&&o>1&&(h=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/h),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),d=this.cachedCanvases.getCanvas(l,h,p),u=d.context,u.clearRect(0,0,h,p),u.drawImage(e,0,0,o,c,0,0,h,p),e=d.canvas,o=h,c=p,l=l==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){let t=this.ctx,{width:i,height:n}=e,r=this.current.fillColor,a=this.current.patternFill,o=nt(t),c,l,d,u;if((e.bitmap||e.data)&&e.count>1){let R=e.bitmap||e.data.buffer;l=JSON.stringify(a?o:[o.slice(0,4),r]),c=this._cachedBitmapsMap.get(R),c||(c=new Map,this._cachedBitmapsMap.set(R,c));let D=c.get(l);if(D&&!a){let W=Math.round(Math.min(o[0],o[2])+o[4]),$=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:D,offsetX:W,offsetY:$}}d=D}d||(u=this.cachedCanvases.getCanvas("maskCanvas",i,n),xu(u.context,e));let h=M.transform(o,[1/i,0,0,-1/n,0,0]);h=M.transform(h,[1,0,0,1,0,-n]);let[p,m,f,b]=M.getAxialAlignedBoundingBox([0,0,i,n],h),g=Math.round(f-p)||1,v=Math.round(b-m)||1,y=this.cachedCanvases.getCanvas("fillCanvas",g,v),_=y.context,A=p,x=m;_.translate(-A,-x),_.transform(...h),d||(d=this._scaleImage(u.canvas,he(_)),d=d.img,c&&a&&c.set(l,d)),_.imageSmoothingEnabled=Eu(nt(_),e.interpolate),ks(_,d,0,0,d.width,d.height,0,0,i,n),_.globalCompositeOperation="source-in";let E=M.transform(he(_),[1,0,0,1,-A,-x]);return _.fillStyle=a?r.getPattern(t,this,E,Tt.FILL):r,_.fillRect(0,0,i,n),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(l,y.canvas)),{canvas:y.canvas,offsetX:Math.round(A),offsetY:Math.round(x)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Ff[e]}setLineJoin(e){this.ctx.lineJoin=Nf[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=n.context;let r=this.ctx;r.setTransform(...nt(this.suspendedCtx)),bn(this.suspendedCtx,r),Lf(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,n){let r=n[0],a=n[1],o=n[2]-r,c=n[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,i,o,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,n,r,a,o,c,l,d,u){let h=e.canvas,p=c-d,m=l-u;if(a){let b=M.makeHexColor(...a);if(p<0||m<0||p+i>h.width||m+n>h.height){let g=this.cachedCanvases.getCanvas("maskExtension",i,n),v=g.context;v.drawImage(h,-p,-m),v.globalCompositeOperation="destination-atop",v.fillStyle=b,v.fillRect(0,0,i,n),v.globalCompositeOperation="source-over",h=g.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let g=new Path2D;g.rect(p,m,i,n),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=b,e.fillRect(p,m,i,n),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));let f=new Path2D;f.rect(c,l,i,n),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(h,p,m,i,n,c,l,i,n),t.restore()}save(){this.inSMaskMode?(bn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),bn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,n,r,a){this.ctx.transform(e,t,i,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){let n=this.ctx,r=this.current,a=r.x,o=r.y,c,l,d=nt(n),u=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,h=u?i.slice(0):null;for(let p=0,m=0,f=e.length;p<f;p++)switch(e[p]|0){case ie.rectangle:a=t[m++],o=t[m++];let b=t[m++],g=t[m++],v=a+b,y=o+g;n.moveTo(a,o),b===0||g===0?n.lineTo(v,y):(n.lineTo(v,o),n.lineTo(v,y),n.lineTo(a,y)),u||r.updateRectMinMax(d,[a,o,v,y]),n.closePath();break;case ie.moveTo:a=t[m++],o=t[m++],n.moveTo(a,o),u||r.updatePathMinMax(d,a,o);break;case ie.lineTo:a=t[m++],o=t[m++],n.lineTo(a,o),u||r.updatePathMinMax(d,a,o);break;case ie.curveTo:c=a,l=o,a=t[m+4],o=t[m+5],n.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),r.updateCurvePathMinMax(d,c,l,t[m],t[m+1],t[m+2],t[m+3],a,o,h),m+=6;break;case ie.curveTo2:c=a,l=o,n.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(d,c,l,a,o,t[m],t[m+1],t[m+2],t[m+3],h),a=t[m+2],o=t[m+3],m+=4;break;case ie.curveTo3:c=a,l=o,a=t[m+2],o=t[m+3],n.bezierCurveTo(t[m],t[m+1],a,o,a,o),r.updateCurvePathMinMax(d,c,l,t[m],t[m+1],a,o,a,o,h),m+=4;break;case ie.closePath:n.closePath();break}u&&r.updateScalingPathMinMax(d,h),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){let t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,he(t),Tt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){let t=this.ctx,i=this.current.fillColor,n=this.current.patternFill,r=!1;n&&(t.save(),t.fillStyle=i.getPattern(t,this,he(t),Tt.FILL),r=!0);let a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=jf}eoClip(){this.pendingClip=Su}beginText(){this.current.textMatrix=Mu,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(let i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){let i=this.commonObjs.get(e),n=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=i.fontMatrix||ro,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&U("Invalid font matrix for font "+e),t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;let r=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${r}", ${i.fallbackName}`,o="normal";i.black?o="900":i.bold&&(o="bold");let c=i.italic?"italic":"normal",l=t;t<vu?l=vu:t>yu&&(l=yu),this.current.fontSizeScale=t/l,this.ctx.font=`${c} ${o} ${l}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,n,r,a){this.current.textMatrix=[e,t,i,n,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,n,r){let a=this.ctx,o=this.current,c=o.font,l=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,u=l&Ct.FILL_STROKE_MASK,h=!!(l&Ct.ADD_TO_PATH_FLAG),p=o.patternFill&&!c.missingFile,m=o.patternStroke&&!c.missingFile,f;(c.disableFontFace||h||p||m)&&(f=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||p||m?(a.save(),a.translate(t,i),a.beginPath(),f(a,d),(u===Ct.FILL||u===Ct.FILL_STROKE)&&(n&&a.setTransform(...n),a.fill()),(u===Ct.STROKE||u===Ct.FILL_STROKE)&&(r&&a.setTransform(...r),a.stroke()),a.restore()):((u===Ct.FILL||u===Ct.FILL_STROKE)&&a.fillText(e,t,i),(u===Ct.STROKE||u===Ct.FILL_STROKE)&&a.strokeText(e,t,i)),h&&(this.pendingTextPaths||=[]).push({transform:nt(a),x:t,y:i,fontSize:d,addToPath:f})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,i=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){i=!0;break}return H(this,"isFontSubpixelAAEnabled",i)}showText(e){let t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);let n=t.fontSize;if(n===0)return;let r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,l=t.fontDirection,d=t.textHScale*l,u=e.length,h=i.vertical,p=h?1:-1,m=i.defaultVMetrics,f=n*t.fontMatrix[0],b=t.textRenderingMode===Ct.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),l>0?r.scale(d,-1):r.scale(d,1);let g,v;if(t.patternFill){r.save();let E=t.fillColor.getPattern(r,this,he(r),Tt.FILL);g=nt(r),r.restore(),r.fillStyle=E}if(t.patternStroke){r.save();let E=t.strokeColor.getPattern(r,this,he(r),Tt.STROKE);v=nt(r),r.restore(),r.strokeStyle=E}let y=t.lineWidth,_=t.textMatrixScale;if(_===0||y===0){let E=t.textRenderingMode&Ct.FILL_STROKE_MASK;(E===Ct.STROKE||E===Ct.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=_;if(a!==1&&(r.scale(a,a),y/=a),r.lineWidth=y,i.isInvalidPDFjsFont){let E=[],R=0;for(let D of e)E.push(D.unicode),R+=D.width;r.fillText(E.join(""),0,0),t.x+=R*f*d,r.restore(),this.compose();return}let A=0,x;for(x=0;x<u;++x){let E=e[x];if(typeof E=="number"){A+=p*E*n/1e3;continue}let R=!1,D=(E.isSpace?c:0)+o,W=E.fontChar,$=E.accent,Q,ft,Y=E.width;if(h){let J=E.vmetric||m,I=-(E.vmetric?J[1]:Y*.5)*f,L=J[2]*f;Y=J?-J[0]:Y,Q=I/a,ft=(A+L)/a}else Q=A/a,ft=0;if(i.remeasure&&Y>0){let J=r.measureText(W).width*1e3/n*a;if(Y<J&&this.isFontSubpixelAAEnabled){let I=Y/J;R=!0,r.save(),r.scale(I,1),Q/=I}else Y!==J&&(Q+=(Y-J)/2e3*n/a)}if(this.contentVisible&&(E.isInFont||i.missingFile)){if(b&&!$)r.fillText(W,Q,ft);else if(this.paintChar(W,Q,ft,g,v),$){let J=Q+n*$.offset.x/a,I=ft-n*$.offset.y/a;this.paintChar($.fontChar,J,I,g,v)}}let Lt=h?Y*f-D*l:Y*f+D*l;A+=Lt,R&&r.restore()}h?t.y-=A:t.x+=A*d,r.restore(),this.compose()}showType3Text(e){let t=this.ctx,i=this.current,n=i.font,r=i.fontSize,a=i.fontDirection,o=n.vertical?1:-1,c=i.charSpacing,l=i.wordSpacing,d=i.textHScale*a,u=i.fontMatrix||ro,h=e.length,p=i.textRenderingMode===Ct.INVISIBLE,m,f,b,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,a),m=0;m<h;++m){if(f=e[m],typeof f=="number"){g=o*f*r/1e3,this.ctx.translate(g,0),i.x+=g*d;continue}let v=(f.isSpace?l:0)+c,y=n.charProcOperatorList[f.operatorListId];if(!y){U(`Type3 character "${f.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=f,this.save(),t.scale(r,r),t.transform(...u),this.executeOperatorList(y),this.restore()),b=M.applyTransform([f.width,0],u)[0]*r+v,t.translate(b,0),i.x+=b*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,r,a){this.ctx.rect(i,n,r-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){let i=e[1],n=this.baseTransform||nt(this.ctx),r={createCanvasGraphics:a=>new s(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new kf(e,i,this.ctx,r,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=M.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=M.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=Rf(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save();let i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,he(t),Tt.SHADING);let n=he(t);if(n){let{width:r,height:a}=t.canvas,[o,c,l,d]=M.getAxialAlignedBoundingBox([0,0,r,a],n);this.ctx.fillRect(o,c,l-o,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Z("Should not call beginInlineImage")}beginImageData(){Z("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=nt(this.ctx),t)){let i=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],i,n),this.current.updateRectMinMax(nt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||fr("TODO: Support non-isolated groups."),e.knockout&&U("Knockout groups not supported.");let i=nt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=M.getAxialAlignedBoundingBox(e.bbox,nt(t)),r=[0,0,t.canvas.width,t.canvas.height];n=M.intersect(n,r)||[0,0,0,0];let a=Math.floor(n[0]),o=Math.floor(n[1]),c=Math.max(Math.ceil(n[2])-a,1),l=Math.max(Math.ceil(n[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,l]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);let u=this.cachedCanvases.getCanvas(d,c,l),h=u.context;h.translate(-a,-o),h.transform(...i),e.smask?this.smaskStack.push({canvas:u.canvas,context:h,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),bn(t,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let n=nt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);let r=M.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],n);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,n,r){if(this.#t(),Ds(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;let[c,l]=M.singularValueDecompose2dScale(nt(this.ctx)),{viewportScale:d}=this,u=Math.ceil(a*this.outputScaleX*d),h=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(u,h);let{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-l,0,o*l),Ds(this.ctx)}else Ds(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Ks(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;e=this.getObject(e.data,e),e.count=t;let i=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=Of(e)),n.compiled)){n.compiled(i);return}let r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,n=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);let o=this.ctx;o.save();let c=nt(o);o.transform(t,i,n,r,0,0);let l=this._createMaskCanvas(e);o.setTransform(1,0,0,1,l.offsetX-c[4],l.offsetY-c[5]);for(let d=0,u=a.length;d<u;d+=2){let h=M.transform(c,[t,i,n,r,a[d],a[d+1]]),[p,m]=M.applyTransform([0,0],h);o.drawImage(l.canvas,p,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(let r of e){let{data:a,width:o,height:c,transform:l}=r,d=this.cachedCanvases.getCanvas("maskCanvas",o,c),u=d.context;u.save();let h=this.getObject(a,r);xu(u,h),u.globalCompositeOperation="source-in",u.fillStyle=n?i.getPattern(u,this,he(t),Tt.FILL):i,u.fillRect(0,0,o,c),u.restore(),t.save(),t.transform(...l),t.scale(1,-1),ks(t,d.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t){U("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,n){if(!this.contentVisible)return;let r=this.getObject(e);if(!r){U("Dependent image isn't ready yet");return}let a=r.width,o=r.height,c=[];for(let l=0,d=n.length;l<d;l+=2)c.push({transform:[t,0,0,i,n[l],n[l+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:i,height:n}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;let t=e.width,i=e.height,n=this.ctx;if(this.save(),!Pt){let{filter:o}=n;o!=="none"&&o!==""&&(n.filter="none")}n.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{let c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Au(c,e),r=this.applyTransferMapsToCanvas(c)}let a=this._scaleImage(r,he(n));n.imageSmoothingEnabled=Eu(nt(n),e.interpolate),ks(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;let i=this.ctx,n;if(e.bitmap)n=e.bitmap;else{let r=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;Au(c,e),n=this.applyTransferMapsToCanvas(c)}for(let r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),ks(i,n,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let i=this.ctx;this.pendingClip&&(t||(this.pendingClip===Su?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=nt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:i,c:n,d:r}=this.ctx.getTransform(),a,o;if(i===0&&n===0){let c=Math.abs(t),l=Math.abs(r);if(c===l)if(e===0)a=o=1/c;else{let d=c*e;a=o=d<1?1/d:1}else if(e===0)a=1/c,o=1/l;else{let d=c*e,u=l*e;a=d<1?1/d:1,o=u<1?1/u:1}}else{let c=Math.abs(t*r-i*n),l=Math.hypot(t,i),d=Math.hypot(n,r);if(e===0)a=d/c,o=l/c;else{let u=e*c;a=d>u?d/u:1,o=l>u?l/u:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(t.lineWidth=i||1,n===1&&r===1){t.stroke();return}let a=t.getLineDash();if(e&&t.save(),t.scale(n,r),a.length>0){let o=Math.max(n,r);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let s in ie)Ri.prototype[s]!==void 0&&(Ri.prototype[ie[s]]=Ri.prototype[s]);var ni=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#t=e}static get workerSrc(){return this.#e}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#e=e}},Ps={UNKNOWN:0,DATA:1,ERROR:2},pt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Cu(){}function Zt(s){switch(s instanceof Error||typeof s=="object"&&s!==null||Z('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Se(s.message);case"MissingPDFException":return new si(s.message);case"PasswordException":return new wn(s.message,s.code);case"UnexpectedResponseException":return new Di(s.message,s.status);case"UnknownErrorException":return new An(s.message,s.details);default:return new An(s.message,s.toString())}}var ii=class{#t=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){let i=e.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Ps.DATA)n.resolve(e.data);else if(e.callback===Ps.ERROR)n.reject(Zt(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let i=this.sourceName,n=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:i,targetName:n,callback:Ps.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:i,targetName:n,callback:Ps.ERROR,callbackId:e.callbackId,reason:Zt(a)})});return}if(e.streamId){this.#i(e);return}t(e.data)}on(e,t){let i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){let n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},i)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,i,n){let r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:l=>{let d=Promise.withResolvers();return this.streamControllers[r]={controller:l,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:l.desiredSize},n),d.promise},pull:l=>{let d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,c.postMessage({sourceName:a,targetName:o,stream:pt.PULL,streamId:r,desiredSize:l.desiredSize}),d.promise},cancel:l=>{mt(l instanceof Error,"cancel must have a valid reason");let d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:pt.CANCEL,streamId:r,reason:Zt(l)}),d.promise}},i)}#i(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(l,d=1,u){if(this.isCancelled)return;let h=this.desiredSize;this.desiredSize-=d,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:pt.ENQUEUE,streamId:t,chunk:l},u)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:pt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(l){mt(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:pt.ERROR,streamId:t,reason:Zt(l)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){r.postMessage({sourceName:i,targetName:n,stream:pt.START_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:i,targetName:n,stream:pt.START_COMPLETE,streamId:t,reason:Zt(l)})})}#n(e){let t=e.streamId,i=this.sourceName,n=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case pt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Zt(e.reason));break;case pt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Zt(e.reason));break;case pt.PULL:if(!o){r.postMessage({sourceName:i,targetName:n,stream:pt.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Cu).then(function(){r.postMessage({sourceName:i,targetName:n,stream:pt.PULL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:i,targetName:n,stream:pt.PULL_COMPLETE,streamId:t,reason:Zt(l)})});break;case pt.ENQUEUE:if(mt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case pt.CLOSE:if(mt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#r(a,t);break;case pt.ERROR:mt(a,"error should have stream controller"),a.controller.error(Zt(e.reason)),this.#r(a,t);break;case pt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Zt(e.reason)),this.#r(a,t);break;case pt.CANCEL:if(!o)break;let c=Zt(e.reason);Promise.try(o.onCancel||Cu,c).then(function(){r.postMessage({sourceName:i,targetName:n,stream:pt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:i,targetName:n,stream:pt.CANCEL_COMPLETE,streamId:t,reason:Zt(l)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#r(e,t){return C(this,null,function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]})}destroy(){this.#t?.abort(),this.#t=null}},Mo=class{#t;#e;constructor({parsedData:e,rawData:t}){this.#t=e,this.#e=t}getRaw(){return this.#e}get(e){return this.#t.get(e)??null}getAll(){return Sc(this.#t)}has(e){return this.#t.has(e)}},Mi=Symbol("INTERNAL"),Ro=class{#t=!1;#e=!1;#i=!1;#n=!0;constructor(e,{name:t,intent:i,usage:n,rbGroups:r}){this.#t=!!(e&Ut.DISPLAY),this.#e=!!(e&Ut.PRINT),this.name=t,this.intent=i,this.usage=n,this.rbGroups=r}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;let{print:e,view:t}=this.usage;return this.#t?t?.viewState!=="OFF":this.#e?e?.printState!=="OFF":!0}_setVisible(e,t,i=!1){e!==Mi&&Z("Internal method `_setVisible` called."),this.#i=i,this.#n=t}},ko=class{#t=null;#e=new Map;#i=null;#n=null;constructor(e,t=Ut.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(let i of e.groups)this.#e.set(i.id,new Ro(t,i));if(e.baseState==="OFF")for(let i of this.#e.values())i._setVisible(Mi,!1);for(let i of e.on)this.#e.get(i)._setVisible(Mi,!0);for(let i of e.off)this.#e.get(i)._setVisible(Mi,!1);this.#i=this.getHash()}}#r(e){let t=e.length;if(t<2)return!0;let i=e[0];for(let n=1;n<t;n++){let r=e[n],a;if(Array.isArray(r))a=this.#r(r);else if(this.#e.has(r))a=this.#e.get(r).visible;else return U(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(e){if(this.#e.size===0)return!0;if(!e)return fr("Optional content group not defined."),!0;if(e.type==="OCG")return this.#e.has(e.id)?this.#e.get(e.id).visible:(U(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!this.#e.has(t))return U(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!this.#e.has(t))return U(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!this.#e.has(t))return U(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!this.#e.has(t))return U(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!1}return!0}return U(`Unknown optional content policy ${e.policy}.`),!0}return U(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){let n=this.#e.get(e);if(!n){U(`Optional content group not found: ${e}`);return}if(i&&t&&n.rbGroups.length)for(let r of n.rbGroups)for(let a of r)a!==e&&this.#e.get(a)?._setVisible(Mi,!1,!0);n._setVisible(Mi,!!t,!0),this.#t=null}setOCGState({state:e,preserveRB:t}){let i;for(let n of e){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}let r=this.#e.get(n);if(r)switch(i){case"ON":this.setVisibility(n,!0,t);break;case"OFF":this.setVisibility(n,!1,t);break;case"Toggle":this.setVisibility(n,!r.visible,t);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?Sc(this.#e):null}getGroup(e){return this.#e.get(e)||null}getHash(){if(this.#t!==null)return this.#t;let e=new $s;for(let[t,i]of this.#e)e.update(`${t}:${i.visible}`);return this.#t=e.hexdigest()}},Do=class{constructor(e,{disableRange:t=!1,disableStream:i=!1}){mt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,r?.length>0){let c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,l)=>{this._onReceiveData({begin:c,chunk:l})}),e.addProgressListener((c,l)=>{this._onProgress({loaded:c,total:l})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{let n=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});mt(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new Po(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new Lo(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},Po=class{constructor(e,t,i=!1,n=null){this._stream=e,this._done=i||!1,this._filename=Tc(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(let r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return C(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Lo=class{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return C(this,null,function*(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function Bf(s){let e=!0,t=i("filename\\*","i").exec(s);if(t){t=t[1];let d=o(t);return d=unescape(d),d=c(d),d=l(d),r(d)}if(t=a(s),t){let d=l(t);return r(d)}if(t=i("filename","i").exec(s),t){t=t[1];let d=o(t);return d=l(d),r(d)}function i(d,u){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function n(d,u){if(d){if(!/^[\x00-\xFF]+$/.test(u))return u;try{let h=new TextDecoder(d,{fatal:!0}),p=gr(u);u=h.decode(p),e=!1}catch{}}return u}function r(d){return e&&/[\x80-\xff]/.test(d)&&(d=n("utf-8",d),e&&(d=n("iso-8859-1",d))),d}function a(d){let u=[],h,p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=p.exec(d))!==null;){let[,f,b,g]=h;if(f=parseInt(f,10),f in u){if(f===0)break;continue}u[f]=[b,g]}let m=[];for(let f=0;f<u.length&&f in u;++f){let[b,g]=u[f];g=o(g),b&&(g=unescape(g),f===0&&(g=c(g))),m.push(g)}return m.join("")}function o(d){if(d.startsWith('"')){let u=d.slice(1).split('\\"');for(let h=0;h<u.length;++h){let p=u[h].indexOf('"');p!==-1&&(u[h]=u[h].slice(0,p),u.length=h+1),u[h]=u[h].replaceAll(/\\(.)/g,"$1")}d=u.join('"')}return d}function c(d){let u=d.indexOf("'");if(u===-1)return d;let h=d.slice(0,u),m=d.slice(u+1).replace(/^[^']*'/,"");return n(h,m)}function l(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,h,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(f,b){return String.fromCharCode(parseInt(b,16))}),n(h,m);try{m=atob(m)}catch{}return n(h,m)})}return""}function Du(s,e){let t=new Headers;if(!s||!e||typeof e!="object")return t;for(let i in e){let n=e[i];n!==void 0&&t.append(i,n)}return t}function yr(s){try{return new URL(s).origin}catch{}return null}function Pu({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:i}){let n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*t)||i||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function Lu(s){let e=s.get("Content-Disposition");if(e){let t=Bf(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Tc(t))return t}return null}function _r(s,e){return s===404||s===0&&e.startsWith("file:")?new si('Missing PDF "'+e+'".'):new Di(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s)}function Ou(s){return s===200||s===206}function Fu(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Nu(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(U(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}var Zs=class{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Du(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Oo(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new Fo(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},Oo=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let i=new Headers(e.headers),n=t.url;fetch(n,Fu(i,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=yr(r.url),!Ou(r.status))throw _r(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();let a=r.headers,{allowRangeRequests:o,suggestedLength:c}=Pu({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=Lu(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Se("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return C(this,null,function*(){yield this._headersCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Nu(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},Fo=class{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;let n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;let r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);let a=n.url;fetch(a,Fu(r,this._withCredentials,this._abortController)).then(o=>{let c=yr(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!Ou(o.status))throw _r(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return C(this,null,function*(){yield this._readCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Nu(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},no=200,so=206;function Uf(s){let e=s.response;return typeof e!="string"?e:gr(e).buffer}var No=class{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Du(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){let n={begin:e,end:t};for(let r in i)n[r]=i[r];return this.request(n)}requestFull(e){return this.request(e)}request(e){let t=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=so):n.expectedStatus=no,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){let i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){let i=this.pendingRequests[e];if(!i)return;let n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],n.status===0&&this.isHttp){i.onError?.(n.status);return}let r=n.status||no;if(!(r===no&&i.expectedStatus===so)&&r!==i.expectedStatus){i.onError?.(n.status);return}let o=Uf(n);if(r===so){let c=n.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);i.onDone({begin:parseInt(l[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},jo=class{constructor(e){this._source=e,this._manager=new No(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Bo(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let i=new Uo(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},Bo=class{constructor(e,t){this._manager=e;let i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=yr(t.responseURL);let i=t.getAllResponseHeaders(),n=new Headers(i?i.trim().split(/[\r\n]+/).map(o=>{let[c,...l]=o.split(": ");return[c,l.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=Pu({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Lu(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=_r(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return C(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},Uo=class{constructor(e,t,i){this._manager=e;let n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=yr(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=_r(e,this._url);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){return C(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},zf=/^[a-z][a-z0-9\-+.]+:/i;function $f(s){if(zf.test(s))return new URL(s);let e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}var zo=class{constructor(e){this.source=e,this.url=$f(e.url),mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $o(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new Ho(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},$o=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new si(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return C(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Se("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Ho=class{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let n=e.source;this._isStreamingSupported=!n.disableStream;let r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return C(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Hf=1e5,Ot=30,Vf=.8,Mn=class s{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#l=0;#o=0;#d=null;#c=null;#u=0;#a=0;#h=Object.create(null);#p=[];#m=null;#g=[];#f=new WeakMap;#b=null;static#v=new Map;static#_=new Map;static#w=new WeakMap;static#E=null;static#S=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=t,this.#a=i.scale*(globalThis.devicePixelRatio||1),this.#u=i.rotation,this.#s={div:null,properties:null,ctx:null};let{pageWidth:n,pageHeight:r,pageX:a,pageY:o}=i.rawDims;this.#b=[1,0,0,-1,-a,o+r],this.#o=n,this.#l=r,s.#R(),ri(t,i),this.#t.promise.finally(()=>{s.#S.delete(this),this.#s=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=Et.platform;return H(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{this.#d.read().then(({value:t,done:i})=>{if(i){this.#t.resolve();return}this.#r??=t.lang,Object.assign(this.#h,t.styles),this.#C(t.items),e()},this.#t.reject)};return this.#d=this.#m.getReader(),s.#S.add(this),e(),this.#t.promise}update({viewport:e,onBefore:t=null}){let i=e.scale*(globalThis.devicePixelRatio||1),n=e.rotation;if(n!==this.#u&&(t?.(),this.#u=n,ri(this.#c,{rotation:n})),i!==this.#a){t?.(),this.#a=i;let r={div:null,properties:null,ctx:s.#M(this.#r)};for(let a of this.#g)r.properties=this.#f.get(a),r.div=a,this.#A(r)}}cancel(){let e=new Se("TextLayer task cancelled.");this.#d?.cancel(e).catch(()=>{}),this.#d=null,this.#t.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#C(e){if(this.#i)return;this.#s.ctx??=s.#M(this.#r);let t=this.#g,i=this.#p;for(let n of e){if(t.length>Hf){U("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){let r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),n.id!==null&&this.#e.setAttribute("id",`${n.id}`),r.append(this.#e)}else n.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(n.str),this.#I(n)}}#I(e){let t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);let n=M.transform(this.#b,e.transform),r=Math.atan2(n[1],n[0]),a=this.#h[e.fontName];a.vertical&&(r+=Math.PI/2);let o=this.#n&&a.fontSubstitution||a.fontFamily;o=s.fontFamilyMap.get(o)||o;let c=Math.hypot(n[2],n[3]),l=c*s.#L(o,this.#r),d,u;r===0?(d=n[4],u=n[5]-l):(d=n[4]+l*Math.sin(r),u=n[5]-l*Math.cos(r));let h="calc(var(--scale-factor)*",p=t.style;this.#e===this.#c?(p.left=`${(100*d/this.#o).toFixed(2)}%`,p.top=`${(100*u/this.#l).toFixed(2)}%`):(p.left=`${h}${d.toFixed(2)}px)`,p.top=`${h}${u.toFixed(2)}px)`),p.fontSize=`${h}${(s.#E*c).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let f=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);f!==b&&Math.max(f,b)/Math.min(f,b)>1.5&&(m=!0)}if(m&&(i.canvasWidth=a.vertical?e.height:e.width),this.#f.set(t,i),this.#s.div=t,this.#s.properties=i,this.#A(this.#s),i.hasText&&this.#e.append(t),i.hasEOL){let f=document.createElement("br");f.setAttribute("role","presentation"),this.#e.append(f)}}#A(e){let{div:t,properties:i,ctx:n}=e,{style:r}=t,a="";if(s.#E>1&&(a=`scale(${1/s.#E})`),i.canvasWidth!==0&&i.hasText){let{fontFamily:o}=r,{canvasWidth:c,fontSize:l}=i;s.#T(n,l*this.#a,o);let{width:d}=n.measureText(t.textContent);d>0&&(a=`scaleX(${c*this.#a/d}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(r.transform=a)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(let{canvas:e}of this.#_.values())e.remove();this.#_.clear()}}static#M(e=null){let t=this.#_.get(e||="");if(!t){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(e,t),this.#w.set(t,{size:0,family:""})}return t}static#T(e,t,i){let n=this.#w.get(e);t===n.size&&i===n.family||(e.font=`${t}px ${i}`,n.size=t,n.family=i)}static#R(){if(this.#E!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#E=e.getBoundingClientRect().height,e.remove()}static#L(e,t){let i=this.#v.get(e);if(i)return i;let n=this.#M(t);n.canvas.width=n.canvas.height=Ot,this.#T(n,Ot,e);let r=n.measureText(""),a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){let d=a/(a+o);return this.#v.set(e,d),n.canvas.width=n.canvas.height=0,d}n.strokeStyle="red",n.clearRect(0,0,Ot,Ot),n.strokeText("g",0,0);let c=n.getImageData(0,0,Ot,Ot).data;o=0;for(let d=c.length-1-3;d>=0;d-=4)if(c[d]>0){o=Math.ceil(d/4/Ot);break}n.clearRect(0,0,Ot,Ot),n.strokeText("A",0,Ot),c=n.getImageData(0,0,Ot,Ot).data,a=0;for(let d=0,u=c.length;d<u;d+=4)if(c[d]>0){a=Ot-Math.floor(d/4/Ot);break}n.canvas.width=n.canvas.height=0;let l=a?a/(a+o):Vf;return this.#v.set(e,l),l}},Rn=class s{static textContent(e){let t=[],i={items:t,styles:Object.create(null)};function n(r){if(!r)return;let a=null,o=r.name;if(o==="#text")a=r.value;else if(s.shouldBuildText(o))r?.attributes?.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(let c of r.children)n(c)}return n(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},Gf=65536,Wf=100,qf=5e3,Xf=Pt?wo:vo,Yf=Pt?Ao:Ws,Kf=Pt?_o:yo,Zf=Pt?xo:Ys;function Qf(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});let e=new Vo,{docId:t}=e,i=s.url?Jf(s.url):null,n=s.data?tg(s.data):null,r=s.httpHeaders||null,a=s.withCredentials===!0,o=s.password??null,c=s.range instanceof Qs?s.range:null,l=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:Gf,d=s.worker instanceof ki?s.worker:null,u=s.verbosity,h=typeof s.docBaseUrl=="string"&&!vr(s.docBaseUrl)?s.docBaseUrl:null,p=typeof s.cMapUrl=="string"?s.cMapUrl:null,m=s.cMapPacked!==!1,f=s.CMapReaderFactory||Yf,b=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,g=s.StandardFontDataFactory||Zf,v=s.stopAtErrors!==!0,y=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,_=s.isEvalSupported!==!1,A=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Pt,x=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Pt&&(Et.platform.isFirefox||!globalThis.chrome),E=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,R=typeof s.disableFontFace=="boolean"?s.disableFontFace:Pt,D=s.fontExtraProperties===!0,W=s.enableXfa===!0,$=s.ownerDocument||globalThis.document,Q=s.disableRange===!0,ft=s.disableStream===!0,Y=s.disableAutoFetch===!0,Lt=s.pdfBug===!0,J=s.CanvasFactory||Xf,I=s.FilterFactory||Kf,L=s.enableHWA===!0,re=c?c.length:s.length??NaN,me=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Pt&&!R,zt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:f===Ws&&g===Ys&&p&&b&&yn(p,document.baseURI)&&yn(b,document.baseURI);s.canvasFactory&&mu("`canvasFactory`-instance option, please use `CanvasFactory` instead."),s.filterFactory&&mu("`filterFactory`-instance option, please use `FilterFactory` instead.");let yt=null;mf(u);let ht={canvasFactory:new J({ownerDocument:$,enableHWA:L}),filterFactory:new I({docId:t,ownerDocument:$}),cMapReaderFactory:zt?null:new f({baseUrl:p,isCompressed:m}),standardFontDataFactory:zt?null:new g({baseUrl:b})};if(!d){let $t={verbosity:u,port:ni.workerPort};d=$t.port?ki.fromPort($t):new ki($t),e._worker=d}let ci={docId:t,apiVersion:"4.9.155",data:n,password:o,disableAutoFetch:Y,rangeChunkSize:l,length:re,docBaseUrl:h,enableXfa:W,evaluatorOptions:{maxImageSize:y,disableFontFace:R,ignoreErrors:v,isEvalSupported:_,isOffscreenCanvasSupported:A,isImageDecoderSupported:x,canvasMaxAreaInBytes:E,fontExtraProperties:D,useSystemFonts:me,cMapUrl:zt?p:null,standardFontDataUrl:zt?b:null}},Pi={disableFontFace:R,fontExtraProperties:D,ownerDocument:$,pdfBug:Lt,styleElement:yt,loadingParams:{disableAutoFetch:Y,enableXfa:W}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");let $t=d.messageHandler.sendWithPromise("GetDocRequest",ci,n?[n.buffer]:null),et;if(c)et=new Do(c,{disableRange:Q,disableStream:ft});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");let ae;if(Pt)if(yn(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");ae=Zs}else ae=zo;else ae=yn(i)?Zs:jo;et=new ae({url:i,length:re,httpHeaders:r,withCredentials:a,rangeChunkSize:l,disableRange:Q,disableStream:ft})}return $t.then(ae=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");let Mc=new ii(t,ae,d.port),$u=new Xo(Mc,e,et,Pi,ht);e._transport=$u,Mc.send("Ready",null)})}).catch(e._capability.reject),e}function Jf(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(Pt&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function tg(s){if(Pt&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return gr(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Tu(s){return typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0}var Vo=class s{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${s.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return C(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null})}},Qs=class{constructor(e,t,i=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Z("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Go=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return H(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},Wo=class{#t=null;#e=!1;constructor(e,t,i,n=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=n?new Bs:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Js,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}={}){return new xn({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return H(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return C(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:n=Pe.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:l=null,printAnnotationStorage:d=null,isEditing:u=!1}){this._stats?.time("Overall");let h=this._transport.getRenderingIntent(i,n,d,u),{renderingIntent:p,cacheKey:m}=h;this.#e=!1,this.#n(),o||=this._transport.getOptionalContentConfig(p);let f=this._intentStates.get(m);f||(f=Object.create(null),this._intentStates.set(m,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);let b=!!(p&Ut.PRINT);f.displayReadyCapability||(f.displayReadyCapability=Promise.withResolvers(),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));let g=_=>{f.renderTasks.delete(v),(this._maybeCleanupAfterRender||b)&&(this.#e=!0),this.#i(!b),_?(v.capability.reject(_),this._abortOperatorList({intentState:f,reason:_ instanceof Error?_:new Error(_)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Ko({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:l});(f.renderTasks||=new Set).add(v);let y=v.task;return Promise.all([f.displayReadyCapability.promise,o]).then(([_,A])=>{if(this.destroyed){g();return}if(this._stats?.time("Rendering"),!(A.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:_,optionalContentConfig:A}),v.operatorListChanged()}).catch(g),y}getOperatorList({intent:e="display",annotationMode:t=Pe.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}let a=this._transport.getRenderingIntent(e,t,i,n,!0),o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Rn.textContent(i));let t=this.streamTextContent(e);return new Promise(function(i,n){function r(){a.read().then(function({value:c,done:l}){if(l){i(o);return}o.lang??=c.lang,Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},n)}let a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(e)}cleanup(e=!1){this.#e=!0;let t=this.#i(!1);return e&&t&&(this._stats&&=new Bs),t}#i(e=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(e)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},qf),!1;for(let{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(e,t){let i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:n}){let{map:r,transfer:a}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:n},a).getReader(),l=this._intentStates.get(t);l.streamReader=c;let d=()=>{c.read().then(({value:u,done:h})=>{if(h){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),d())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(let h of l.renderTasks)h.operatorListChanged();this.#i(!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};d()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof En){let n=Wf;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new Se(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[n,r]of this._intentStates)if(r===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}},qo=class{#t=new Map;#e=Promise.resolve();postMessage(e,t){let i={data:structuredClone(e,t?{transfer:t}:null)};this.#e.then(()=>{for(let[n]of this.#t)n.call(this,i)})}addEventListener(e,t,i=null){let n=null;if(i?.signal instanceof AbortSignal){let{signal:r}=i;if(r.aborted){U("LoopbackPort - cannot use an `aborted` signal.");return}let a=()=>this.removeEventListener(e,t);n=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}this.#t.set(t,n)}removeEventListener(e,t){this.#t.get(t)?.(),this.#t.delete(t)}terminate(){for(let[,e]of this.#t)e?.();this.#t.clear()}},ki=class s{static#t=0;static#e=!1;static#i;static{Pt&&(this.#e=!0,ni.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}let n=new URL(t,i);return i.origin===n.origin},this._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}}constructor({name:e=null,port:t=null,verbosity:i=ff()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(s.#i?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(s.#i||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}#n(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ii("main","worker",e),this._messageHandler.on("ready",function(){}),this.#n()}_initialize(){if(s.#e||s.#r){this._setupFakeWorker();return}let{workerSrc:e}=s;try{s._isSameOrigin(window.location.href,e)||(e=s._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),i=new ii("main","worker",t),n=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),i.on("test",o=>{if(r.abort(),this.destroyed||!o){n();return}this._messageHandler=i,this._port=t,this._webWorker=t,this.#n()}),i.on("ready",o=>{if(r.abort(),this.destroyed){n();return}try{a()}catch{this._setupFakeWorker()}});let a=()=>{let o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{fr("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){s.#e||(U("Setting up fake worker."),s.#e=!0),s._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let t=new qo;this._port=t;let i=`fake${s.#t++}`,n=new ii(i+"_worker",i,t);e.setup(n,t),this._messageHandler=new ii(i,i+"_worker",t),this.#n()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,s.#i?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let t=this.#i?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new s(e)}static get workerSrc(){if(ni.workerSrc)return ni.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#r(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return H(this,"_setupFakeWorkerGlobal",C(this,null,function*(){return this.#r?this.#r:(yield import(this.workerSrc)).WorkerMessageHandler}))}},Xo=class{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(e,t,i,n,r){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Js,this.fontLoader=new go({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){let i=this.#t.get(e);if(i)return i;let n=this.messageHandler.sendWithPromise(e,t);return this.#t.set(e,n),n}get annotationStorage(){return H(this,"annotationStorage",new Tn)}getRenderingIntent(e,t=Pe.ENABLE,i=null,n=!1,r=!1){let a=Ut.DISPLAY,o=fo;switch(e){case"any":a=Ut.ANY;break;case"display":break;case"print":a=Ut.PRINT;break;default:U(`getRenderingIntent - invalid intent: ${e}`)}let c=a&Ut.PRINT&&i instanceof Hs?i:this.annotationStorage;switch(t){case Pe.DISABLE:a+=Ut.ANNOTATIONS_DISABLE;break;case Pe.ENABLE:break;case Pe.ENABLE_FORMS:a+=Ut.ANNOTATIONS_FORMS;break;case Pe.ENABLE_STORAGE:a+=Ut.ANNOTATIONS_STORAGE,o=c.serializable;break;default:U(`getRenderingIntent - invalid annotationMode: ${t}`)}n&&(a+=Ut.IS_EDITING),r&&(a+=Ut.OPLIST);let{ids:l,hash:d}=c.modifiedIds,u=[a,o.hash,d];return{renderingIntent:a,cacheKey:u.join("_"),annotationStorageSerializable:o,modifiedIds:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let i of this.#e.values())e.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Mn.cleanup(),this._networkStream?.cancelAllRequests(new Se("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,n)=>{mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){n.close();return}mt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",i=>C(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:n,isRangeSupported:r,contentLength:a}=this._fullReader;return(!n||!r)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:a}})),e.on("GetRangeReader",(i,n)=>{mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){n.close();return}mt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{r.cancel(a),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new Go(i,this))}),e.on("DocException",function(i){let n;switch(i.name){case"PasswordException":n=new wn(i.message,i.code);break;case"InvalidPDFException":n=new js(i.message);break;case"MissingPDFException":n=new si(i.message);break;case"UnexpectedResponseException":n=new Di(i.message,i.status);break;case"UnknownErrorException":n=new An(i.message,i.details);break;default:Z("DocException - expected a valid Error.")}t._capability.reject(n)}),e.on("PasswordRequest",i=>{if(this.#r=Promise.withResolvers(),t.onPassword){let n=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};try{t.onPassword(n,i.code)}catch(r){this.#r.reject(r)}}else this.#r.reject(new wn(i.message,i.code));return this.#r.promise}),e.on("DataLoaded",i=>{t.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,n,r])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":let{disableFontFace:a,fontExtraProperties:o,pdfBug:c}=this._params;if("error"in r){let h=r.error;U(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}let l=c&&globalThis.FontInspector?.enabled?(h,p)=>globalThis.FontInspector.fontAdded(h,p):null,d=new bo(r,{disableFontFace:a,inspectFont:l});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":let{imageRef:u}=r;mt(u,"The imageRef must be defined.");for(let h of this.#e.values())for(let[,p]of h.objs)if(p?.ref===u)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([i,n,r,a])=>{if(this.destroyed)return;let o=this.#e.get(n);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(r){case"Image":o.objs.resolve(i,a),a?.dataLen>lf&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{this.destroyed||t.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>C(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)})),e.on("FetchStandardFontData",i=>C(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&U("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,i=this.#i.get(t);if(i)return i;let n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,e);let a=new Wo(t,r,this,this._params.pdfBug);return this.#e.set(t,a),a});return this.#i.set(t,n),n}getPageIndex(e){return Tu(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new ko(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=this.#t.get(e);if(t)return t;let i=this.messageHandler.sendWithPromise(e,null).then(n=>({info:n[0],metadata:n[1]?new Mo(n[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return C(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let t of this.#e.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Mn.cleanup()}})}cachedPageNumber(e){if(!Tu(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}},Ls=Symbol("INITIAL_DATA"),Js=class{#t=Object.create(null);#e(e){return this.#t[e]||=ct(S({},Promise.withResolvers()),{data:Ls})}get(e,t=null){if(t){let n=this.#e(e);return n.promise.then(()=>t(n.data)),null}let i=this.#t[e];if(!i||i.data===Ls)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){let t=this.#t[e];return!!t&&t.data!==Ls}resolve(e,t=null){let i=this.#e(e);i.data=t,i.resolve()}clear(){for(let e in this.#t){let{data:t}=this.#t[e];t?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(let e in this.#t){let{data:t}=this.#t[e];t!==Ls&&(yield[e,t])}}},Yo=class{#t=null;constructor(e){this.#t=e,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(e=0){this.#t.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#t.operatorList;if(!e)return!1;let{annotationCanvasMap:t}=this.#t;return e.form||e.canvas&&t?.size>0}},Ko=class s{#t=null;static#e=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:l,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=l,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Yo(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(s.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");s.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:i,viewport:n,transform:r,background:a}=this.params;this.gfx=new Ri(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),s.#e.delete(this._canvas),this.callback(e||new En(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return C(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),s.#e.delete(this._canvas),this.callback())))})}},eg="4.9.155",ig="a4eb8407c";function Iu(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function vn(s){return Math.max(0,Math.min(255,255*s))}var tr=class{static CMYK_G([e,t,i,n]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=vn(e),[e,e,e]}static G_HTML([e]){let t=Iu(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(vn)}static RGB_HTML(e){return`#${e.map(Iu).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,i+n),1-Math.min(1,t+n)]}static CMYK_rgb([e,t,i,n]){return[vn(1-Math.min(1,e+n)),vn(1-Math.min(1,i+n)),vn(1-Math.min(1,t+n))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){let n=1-e,r=1-t,a=1-i,o=Math.min(n,r,a);return["CMYK",n,r,a,o]}},Zo=class{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${t}`),n}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Z("Abstract method `_createSVG` called.")}},kn=class extends Zo{_createSVG(e){return document.createElementNS(Ee,e)}},er=class{static setupStorage(e,t,i,n,r){let a=n.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{n.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{n.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{n.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(let o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{let c=o.target.options,l=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(t,{value:l})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:n,linkService:r}){let{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(let[c,l]of Object.entries(a))if(l!=null)switch(c){case"class":l.length&&e.setAttribute(c,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,l)}o&&r.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){let t=e.annotationStorage,i=e.linkService,n=e.xfaHtml,r=e.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:i});let o=r!=="richText",c=e.div;if(c.append(a),e.viewport){let u=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=u}o&&c.setAttribute("class","xfaLayer xfaFont");let l=[];if(n.children.length===0){if(n.value){let u=document.createTextNode(n.value);a.append(u),o&&Rn.shouldBuildText(n.name)&&l.push(u)}return{textDivs:l}}let d=[[n,-1,a]];for(;d.length>0;){let[u,h,p]=d.at(-1);if(h+1===u.children.length){d.pop();continue}let m=u.children[++d.at(-1)[1]];if(m===null)continue;let{name:f}=m;if(f==="#text"){let g=document.createTextNode(m.value);l.push(g),p.append(g);continue}let b=m?.attributes?.xmlns?document.createElementNS(m.attributes.xmlns,f):document.createElement(f);if(p.append(b),m.attributes&&this.setAttributes({html:b,element:m,storage:t,intent:r,linkService:i}),m.children?.length>0)d.push([m,-1,b]);else if(m.value){let g=document.createTextNode(m.value);o&&Rn.shouldBuildText(f)&&l.push(g),b.append(g)}}for(let u of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},Fn=1e3,ng=9,oi=new WeakSet;function Le(s){return{width:s[2]-s[0],height:s[3]-s[1]}}var Qo=class{static create(e){switch(e.data.annotationType){case vt.LINK:return new ir(e);case vt.TEXT:return new Jo(e);case vt.WIDGET:switch(e.data.fieldType){case"Tx":return new tc(e);case"Btn":return e.data.radioButton?new nr(e):e.data.checkBox?new ic(e):new nc(e);case"Ch":return new sc(e);case"Sig":return new ec(e)}return new Ce(e);case vt.POPUP:return new Dn(e);case vt.FREETEXT:return new sr(e);case vt.LINE:return new ac(e);case vt.SQUARE:return new oc(e);case vt.CIRCLE:return new cc(e);case vt.POLYLINE:return new rr(e);case vt.CARET:return new dc(e);case vt.INK:return new Pn(e);case vt.POLYGON:return new lc(e);case vt.HIGHLIGHT:return new ar(e);case vt.UNDERLINE:return new uc(e);case vt.SQUIGGLY:return new hc(e);case vt.STRIKEOUT:return new pc(e);case vt.STAMP:return new or(e);case vt.FILEATTACHMENT:return new mc(e);default:return new ut(e)}}},ut=class s{#t=null;#e=!1;#i=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return s._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};let{rect:t}=e;t&&this.#n(t),this.#i?.popup.updateEdited(e)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(e){let{container:{style:t},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;i?.splice(0,4,...e);let{width:l,height:d}=Le(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,n===0?(t.width=`${100*l/r}%`,t.height=`${100*d/a}%`):this.setRotation(n)}_createContainer(e){let{data:t,parent:{page:i,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Ce||(r.tabIndex=Fn);let{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Dn){let{rotation:f}=t;return!t.hasOwnCanvas&&f!==0&&this.setRotation(f,r),r}let{width:o,height:c}=Le(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;let f=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(f>0||b>0){let v=`calc(${f}px * var(--scale-factor)) / calc(${b}px * var(--scale-factor))`;a.borderRadius=v}else if(this instanceof nr){let v=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=v}switch(t.borderStyle.style){case gn.SOLID:a.borderStyle="solid";break;case gn.DASHED:a.borderStyle="dashed";break;case gn.BEVELED:U("Unimplemented border style: beveled");break;case gn.INSET:U("Unimplemented border style: inset");break;case gn.UNDERLINE:a.borderBottomStyle="solid";break;default:break}let g=t.borderColor||null;g?(this.#e=!0,a.borderColor=M.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}let l=M.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:u,pageX:h,pageY:p}=n.rawDims;a.left=`${100*(l[0]-h)/d}%`,a.top=`${100*(l[1]-p)/u}%`;let{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/d}%`,a.height=`${100*c/u}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:a}=Le(this.data.rect),o,c;e%180===0?(o=100*r/i,c=100*a/n):(o=100*a/i,c=100*r/n),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,i,n)=>{let r=n.detail[t],a=r[0],o=r.slice(1);n.target.style[i]=tr[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:tr[`${a}_rgb`](o)})};return H(this,"_commonActions",{display:t=>{let{display:i}=t.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){let i=this._commonActions;for(let n of Object.keys(t.detail))(e[n]||i[n])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let i=this._commonActions;for(let[n,r]of Object.entries(t)){let a=i[n];if(a){let o={detail:{[n]:r},target:e};a(o),delete t[n]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,i,n,r]=this.data.rect.map(f=>Math.fround(f));if(e.length===8){let[f,b,g,v]=e.subarray(2,6);if(n===f&&r===b&&t===g&&i===v)return}let{style:a}=this.container,o;if(this.#e){let{borderColor:f,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${f}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}let c=n-t,l=r-i,{svgFactory:d}=this,u=d.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);let h=d.createElement("defs");u.append(h);let p=d.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),h.append(p);for(let f=2,b=e.length;f<b;f+=8){let g=e[f],v=e[f+1],y=e[f+2],_=e[f+3],A=d.createElement("rect"),x=(y-t)/c,E=(r-v)/l,R=(g-y)/c,D=(v-_)/l;A.setAttribute("x",x),A.setAttribute("y",E),A.setAttribute("width",R),A.setAttribute("height",D),p.append(A),o?.push(`<rect vector-effect="non-scaling-stroke" x="${x}" y="${E}" width="${R}" height="${D}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath=`url(#${m})`}_createPopup(){let{data:e}=this,t=this.#i=new Dn({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Z("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let i=[];if(this._fieldObjects){let n=this._fieldObjects[e];if(n)for(let{page:r,id:a,exportValues:o}of n){if(r===-1||a===t)continue;let c=typeof o=="string"?o:null,l=document.querySelector(`[data-element-id="${a}"]`);if(l&&!oi.has(l)){U(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:c,domElement:l})}return i}for(let n of document.getElementsByName(e)){let{exportValue:r}=n,a=n.getAttribute("data-element-id");a!==t&&oi.has(n)&&i.push({id:a,exportValue:r,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}},ir=class extends ut{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let n=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),n=!0):e.action?(this._bindNamedAction(i,e.action),n=!0):e.attachment?(this.#e(i,e.attachment,e.attachmentDest),n=!0):e.setOCGState?(this.#i(i,e.setOCGState),n=!0):e.dest?(this._bindLink(i,e.dest),n=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),n=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#t()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#t()}#e(e,t,i=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#t()}#i(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#t()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let n of Object.keys(t.actions)){let r=i.get(n);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:n}}),!1))}e.onclick||(e.onclick=()=>!1),this.#t()}_bindResetFormAction(e,t){let i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){U('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();let{fields:n,refs:r,include:a}=t,o=[];if(n.length!==0||r.length!==0){let d=new Set(r);for(let u of n){let h=this._fieldObjects[u]||[];for(let{id:p}of h)d.add(p)}for(let u of Object.values(this._fieldObjects))for(let h of u)d.has(h.id)===a&&o.push(h)}else for(let d of Object.values(this._fieldObjects))o.push(...d);let c=this.annotationStorage,l=[];for(let d of o){let{id:u}=d;switch(l.push(u),d.type){case"text":{let p=d.defaultValue||"";c.setValue(u,{value:p});break}case"checkbox":case"radiobutton":{let p=d.defaultValue===d.exportValues;c.setValue(u,{value:p});break}case"combobox":case"listbox":{let p=d.defaultValue||"";c.setValue(u,{value:p});break}default:continue}let h=document.querySelector(`[data-element-id="${u}"]`);if(h){if(!oi.has(h)){U(`_bindResetFormAction - element not allowed: ${u}`);continue}}else continue;h.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}}),!1}}},Jo=class extends ut{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}},Ce=class extends ut{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Et.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,n,r){i.includes("mouse")?e.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a)}})})}_setEventListeners(e,t,i,n){for(let[r,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,r,a,n),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":M.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||ng,r=e.style,a,o=2,c=l=>Math.round(10*l)/10;if(this.data.multiLine){let l=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(l/(Fs*n))||1,u=l/d;a=Math.min(n,c(u/Fs))}else{let l=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(n,c(l/Fs))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=M.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},tc=class extends Ce{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,n){let r=this.annotationStorage;for(let a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[n]:i})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){let n=e.getValue(t,{value:this.data.fieldValue}),r=n.value||"",a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&r.length>a&&(r=r.slice(0,a));let o=n.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let c={userValue:r,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),oi.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Fn,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",d=>{e.setValue(t,{value:d.target.value}),this.setPropertyOnSiblings(i,"value",d.target.value,"value"),c.formattedValue=null}),i.addEventListener("resetform",d=>{let u=this.data.defaultFieldValue??"";i.value=c.userValue=u,c.formattedValue=null});let l=d=>{let{formattedValue:u}=c;u!=null&&(d.target.value=u),d.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",u=>{if(c.focused)return;let{target:h}=u;c.userValue&&(h.value=c.userValue),c.lastCommittedValue=h.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),i.addEventListener("updatefromsandbox",u=>{this.showElementAndHideCanvas(u.target);let h={value(p){c.userValue=p.detail.value??"",e.setValue(t,{value:c.userValue.toString()}),p.target.value=c.userValue},formattedValue(p){let{formattedValue:m}=p.detail;c.formattedValue=m,m!=null&&p.target!==document.activeElement&&(p.target.value=m),e.setValue(t,{formattedValue:m})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{let{charLimit:m}=p.detail,{target:f}=p;if(m===0){f.removeAttribute("maxLength");return}f.setAttribute("maxLength",m);let b=c.userValue;!b||b.length<=m||(b=b.slice(0,m),f.value=c.userValue=b,e.setValue(t,{value:b}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:f.selectionStart,selEnd:f.selectionEnd}}))}};this._dispatchEventFromSandbox(h,u)}),i.addEventListener("keydown",u=>{c.commitKey=1;let h=-1;if(u.key==="Escape"?h=0:u.key==="Enter"&&!this.data.multiLine?h=2:u.key==="Tab"&&(c.commitKey=3),h===-1)return;let{value:p}=u.target;c.lastCommittedValue!==p&&(c.lastCommittedValue=p,c.userValue=p,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:h,selStart:u.target.selectionStart,selEnd:u.target.selectionEnd}}))});let d=l;l=null,i.addEventListener("blur",u=>{if(!c.focused||!u.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);let{value:h}=u.target;c.userValue=h,c.lastCommittedValue!==h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,willCommit:!0,commitKey:c.commitKey,selStart:u.target.selectionStart,selEnd:u.target.selectionEnd}}),d(u)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",u=>{c.lastCommittedValue=null;let{data:h,target:p}=u,{value:m,selectionStart:f,selectionEnd:b}=p,g=f,v=b;switch(u.inputType){case"deleteWordBackward":{let y=m.substring(0,f).match(/\w*[^\w]*$/);y&&(g-=y[0].length);break}case"deleteWordForward":{let y=m.substring(f).match(/^[^\w]*\w*/);y&&(v+=y[0].length);break}case"deleteContentBackward":f===b&&(g-=1);break;case"deleteContentForward":f===b&&(v+=1);break}u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,change:h||"",willCommit:!1,selStart:g,selEnd:v}})}),this._setEventListeners(i,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.value)}if(l&&i.addEventListener("blur",l),this.data.comb){let u=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${u}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},ec=class extends Ce{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},ic=class extends Ce{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",e.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let r=document.createElement("input");return oi.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=Fn,r.addEventListener("change",a=>{let{name:o,checked:c}=a.target;for(let l of this._getElementsByName(o,i)){let d=c&&l.exportValue===t.exportValue;l.domElement&&(l.domElement.checked=d),e.setValue(l.id,{value:d})}e.setValue(i,{value:c})}),r.addEventListener("resetform",a=>{let o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{let o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},nr=class extends Ce{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,i=t.id,n=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof n=="string"&&(n=n!==t.buttonValue,e.setValue(i,{value:n})),n)for(let a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});let r=document.createElement("input");if(oi.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=Fn,r.addEventListener("change",a=>{let{name:o,checked:c}=a.target;for(let l of this._getElementsByName(o,i))e.setValue(l.id,{value:!1});e.setValue(i,{value:c})}),r.addEventListener("resetform",a=>{let o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){let a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{let c={value:l=>{let d=a===l.detail.value;for(let u of this._getElementsByName(l.target.name)){let h=d&&u.id===i;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},nc=class extends ir{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}},sc=class extends Ce{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");oi.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Fn;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",d=>{let u=this.data.defaultFieldValue;for(let h of n.options)h.selected=h.value===u});for(let d of this.data.options){let u=document.createElement("option");u.textContent=d.displayValue,u.value=d.exportValue,i.value.includes(d.exportValue)&&(u.setAttribute("selected",!0),r=!1),n.append(u)}let a=null;if(r){let d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),n.prepend(d),a=()=>{d.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}let o=d=>{let u=d?"value":"textContent",{options:h,multiple:p}=n;return p?Array.prototype.filter.call(h,m=>m.selected).map(m=>m[u]):h.selectedIndex===-1?null:h[h.selectedIndex][u]},c=o(!1),l=d=>{let u=d.target.options;return Array.prototype.map.call(u,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",d=>{let u={value(h){a?.();let p=h.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(let f of n.options)f.selected=m.has(f.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(h){n.multiple=!0},remove(h){let p=n.options,m=h.detail.remove;p[m].selected=!1,n.remove(m),p.length>0&&Array.prototype.findIndex.call(p,b=>b.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:l(h)}),c=o(!1)},clear(h){for(;n.length!==0;)n.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(h){let{index:p,displayValue:m,exportValue:f}=h.detail.insert,b=n.children[p],g=document.createElement("option");g.textContent=m,g.value=f,b?b.before(g):n.append(g),e.setValue(t,{value:o(!0),items:l(h)}),c=o(!1)},items(h){let{items:p}=h.detail;for(;n.length!==0;)n.remove(0);for(let m of p){let{displayValue:f,exportValue:b}=m,g=document.createElement("option");g.textContent=f,g.value=b,n.append(g)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:o(!0),items:l(h)}),c=o(!1)},indices(h){let p=new Set(h.detail.indices);for(let m of h.target.options)m.selected=p.has(m.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(u,d)}),n.addEventListener("input",d=>{let u=o(!0),h=o(!1);e.setValue(t,{value:u}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:h,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):n.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},Dn=class extends ut{constructor(e){let{data:t,elements:i}=e;super(e,{isRenderable:ut._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");let e=this.popup=new rc({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Cc}${i}`).join(",")),this.container}},rc=class{#t=this.#C.bind(this);#e=this.#T.bind(this);#i=this.#M.bind(this);#n=this.#A.bind(this);#r=null;#s=null;#l=null;#o=null;#d=null;#c=null;#u=null;#a=!1;#h=null;#p=null;#m=null;#g=null;#f=null;#b=null;#v=!1;constructor({container:e,color:t,elements:i,titleObj:n,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:l,parentRect:d,open:u}){this.#s=e,this.#f=n,this.#l=a,this.#g=o,this.#c=c,this.#r=t,this.#m=l,this.#u=d,this.#d=i,this.#o=Us.toDateObject(r),this.trigger=i.flatMap(h=>h.getElementsToTriggerPopup());for(let h of this.trigger)h.addEventListener("click",this.#n),h.addEventListener("mouseenter",this.#i),h.addEventListener("mouseleave",this.#e),h.classList.add("popupTriggerArea");for(let h of i)h.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,u&&this.#A()}render(){if(this.#h)return;let e=this.#h=document.createElement("div");if(e.className="popup",this.#r){let r=e.style.outlineColor=M.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=M.makeHexColor(...this.#r.map(o=>Math.floor(.7*(255-o)+o)))}let t=document.createElement("span");t.className="header";let i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=this.#f,e.append(t),this.#o){let r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),t.append(r)}let n=this.#_;if(n)er.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let r=this._formatContents(this.#l);e.append(r)}this.#s.append(e)}get#_(){let e=this.#g,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#w(){return this.#_?.attributes?.style?.fontSize||0}get#E(){return this.#_?.attributes?.style?.color||null}#S(e){let t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:this.#E,fontSize:this.#w?`calc(${this.#w}px * var(--scale-factor))`:""}};for(let r of e.split(`
`))t.push({name:"span",value:r,attributes:n});return i}_formatContents({str:e,dir:t}){let i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;let n=e.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){let o=n[r];i.append(document.createTextNode(o)),r<a-1&&i.append(document.createElement("br"))}return i}#C(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#a)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#b||={contentsObj:this.#l,richText:this.#g},e&&(this.#p=null),t&&(this.#g=this.#S(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#b&&({contentsObj:this.#l,richText:this.#g}=this.#b,this.#b=null,this.#h?.remove(),this.#h=null,this.#p=null)}#I(){if(this.#p!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:n,pageY:r}}}=this.#c,a=!!this.#u,o=a?this.#u:this.#m;for(let m of this.#d)if(!o||M.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}let c=M.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,u=c[0]+d,h=c[1];this.#p=[100*(u-n)/t,100*(h-r)/i];let{style:p}=this.#s;p.left=`${this.#p[0]}%`,p.top=`${this.#p[1]}%`}#A(){this.#a=!this.#a,this.#a?(this.#M(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#t)):(this.#T(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#t))}#M(){this.#h||this.render(),this.isVisible?this.#a&&this.#s.classList.add("focused"):(this.#I(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#T(){this.#s.classList.remove("focused"),!(this.#a||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#s.hidden=!0)}maybeShow(){this.#v&&(this.#h||this.#M(),this.#v=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}},sr=class extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=j.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},ac=class extends ut{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:i}=Le(e.rect),n=this.svgFactory.create(t,i,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},oc=class extends ut{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:i}=Le(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",t-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},cc=class extends ut{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:i}=Le(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",i/2),a.setAttribute("rx",t/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},rr=class extends ut{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:i,popupRef:n}}=this;if(!t)return this.container;let{width:r,height:a}=Le(e),o=this.svgFactory.create(r,a,!0),c=[];for(let d=0,u=t.length;d<u;d+=2){let h=t[d]-e[0],p=e[3]-t[d+1];c.push(`${h},${p}`)}c=c.join(" ");let l=this.#t=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",c),l.setAttribute("stroke-width",i.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},lc=class extends rr{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},dc=class extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Pn=class extends ut{#t=null;#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?j.HIGHLIGHT:j.INK}#i(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:i,borderStyle:n,popupRef:r}}=this,{transform:a,width:o,height:c}=this.#i(t,e),l=this.svgFactory.create(o,c,!0),d=this.#t=this.svgFactory.createElement("svg:g");l.append(d),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let u=0,h=i.length;u<h;u++){let p=this.svgFactory.createElement(this.svgElementName);this.#e.push(p),p.setAttribute("points",i[u].join(",")),d.append(p)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:i,rect:n}=e,r=this.#t;if(t>=0&&r.setAttribute("stroke-width",t||1),i)for(let a=0,o=this.#e.length;a<o;a++)this.#e[a].setAttribute("points",i[a].join(","));if(n){let{transform:a,width:o,height:c}=this.#i(this.data.rotation,n);r.parentElement.setAttribute("viewBox",`0 0 ${o} ${c}`),r.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},ar=class extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=j.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},uc=class extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},hc=class extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},pc=class extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},or=class extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=j.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},mc=class extends ut{#t=null;constructor(e){super(e,{isRenderable:!0});let{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",S({source:this},t))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:e,data:t}=this,i;t.hasAppearance||t.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;let{isMac:n}=Et.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(n?r.metaKey:r.ctrlKey)&&this.#e()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},fc=class{#t=null;#e=null;#i=new Map;#n=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:n,page:r,viewport:a,structTreeLayer:o}){this.div=e,this.#t=t,this.#e=i,this.#n=o||null,this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return this.#i.size>0}#r(e,t){return C(this,null,function*(){let i=e.firstChild||e,n=i.id=`${Cc}${t}`,r=yield this.#n?.getAriaAttributes(n);if(r)for(let[a,o]of r)i.setAttribute(a,o);this.div.append(e),this.#t?.moveElementInDOM(this.div,e,i,!1)})}render(e){return C(this,null,function*(){let{annotations:t}=e,i=this.div;ri(i,this.viewport);let n=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new kn,annotationStorage:e.annotationStorage||new Tn,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let a of t){if(a.noHTML)continue;let o=a.annotationType===vt.POPUP;if(o){let d=n.get(a.id);if(!d)continue;r.elements=d}else{let{width:d,height:u}=Le(a.rect);if(d<=0||u<=0)continue}r.data=a;let c=Qo.create(r);if(!c.isRenderable)continue;if(!o&&a.popupRef){let d=n.get(a.popupRef);d?d.push(c):n.set(a.popupRef,[c])}let l=c.render();a.hidden&&(l.style.visibility="hidden"),yield this.#r(l,a.id),c._isEditable&&(this.#i.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}this.#s()})}update({viewport:e}){let t=this.div;this.viewport=e,ri(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#e)return;let e=this.div;for(let[t,i]of this.#e){let n=e.querySelector(`[data-annotation-id="${t}"]`);if(!n)continue;i.className="annotationContent";let{firstChild:r}=n;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):n.append(i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(e){return this.#i.get(e)}},Os=/\r\n?|\n/g,gc=class s extends ot{#t;#e="";#i=`${this.id}-editor`;#n=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let e=s.prototype,t=r=>r.isEmpty(),i=Cn.TRANSLATE_SMALL,n=Cn.TRANSLATE_BIG;return H(this,"_keyboardManager",new ai([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}]]))}static _type="freetext";static _editorType=j.FREETEXT;constructor(e){super(ct(S({},e),{name:"freeTextEditor"})),this.#t=e.color||s._defaultColor||ot._defaultLineColor,this.#r=e.fontSize||s._defaultFontSize}static initialize(e,t){ot.initialize(e,t);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case V.FREETEXT_SIZE:s._defaultFontSize=t;break;case V.FREETEXT_COLOR:s._defaultColor=t;break}}updateParams(e,t){switch(e){case V.FREETEXT_SIZE:this.#s(t);break;case V.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[V.FREETEXT_SIZE,s._defaultFontSize],[V.FREETEXT_COLOR,s._defaultColor||ot._defaultLineColor]]}get propertiesToUpdate(){return[[V.FREETEXT_SIZE,this.#r],[V.FREETEXT_COLOR,this.#t]]}#s(e){let t=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--scale-factor))`,this.translate(0,-(n-this.#r)*this.parentScale),this.#r=n,this.#d()},i=this.#r;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){let t=n=>{this.#t=this.editorDiv.style.color=n},i=this.#t;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-s._internalPadding*e,-(s._internalPadding+this.#r)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(j.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;let e=this._uiManager.combinedSignal(this.#n);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){let e=[];this.editorDiv.normalize();let t=null;for(let i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(s.#c(i)),t=i);return e.join(`
`)}#d(){let[e,t]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:n,div:r}=this,a=r.style.display,o=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",n.div.append(this.div),i=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=this.#e,t=this.#e=this.#o().trimEnd();if(e===t)return;let i=n=>{if(this.#e=n,!n){this.remove();return}this.#u(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){s._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),zs(this,this.div,["dblclick","keydown"]),this.width){let[n,r]=this.parentDimensions;if(this.annotationElementId){let{position:a}=this._initialData,[o,c]=this.getInitialTranslation();[o,c]=this.pageTranslationToScreen(o,c);let[l,d]=this.pageDimensions,[u,h]=this.pageTranslation,p,m;switch(this.rotation){case 0:p=e+(a[0]-u)/l,m=t+this.height-(a[1]-h)/d;break;case 90:p=e+(a[0]-u)/l,m=t-(a[1]-h)/d,[o,c]=[c,-o];break;case 180:p=e-this.width+(a[0]-u)/l,m=t-(a[1]-h)/d,[o,c]=[-o,-c];break;case 270:p=e+(a[0]-u-this.height*d)/l,m=t+(a[1]-h-this.width*l)/d,[o,c]=[-c,o];break}this.setAt(p*n,m*r,o,c)}else this.setAt(e*n,t*r,this.width*n,this.height*r);this.#u(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Os,"")}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:i}=t;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();let n=s.#h(t.getData("text")||"").replaceAll(Os,`
`);if(!n)return;let r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();let a=r.getRangeAt(0);if(!n.includes(`
`)){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),r.collapseToStart();return}let{startContainer:o,startOffset:c}=a,l=[],d=[];if(o.nodeType===Node.TEXT_NODE){let p=o.parentElement;if(d.push(o.nodeValue.slice(c).replaceAll(Os,"")),p!==this.editorDiv){let m=l;for(let f of this.editorDiv.childNodes){if(f===p){m=d;continue}m.push(s.#c(f))}}l.push(o.nodeValue.slice(0,c).replaceAll(Os,""))}else if(o===this.editorDiv){let p=l,m=0;for(let f of this.editorDiv.childNodes)m++===c&&(p=d),p.push(s.#c(f))}this.#e=`${l.join(`
`)}${n}${d.join(`
`)}`,this.#u();let u=new Range,h=l.reduce((p,m)=>p+m.length,0);for(let{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){let m=p.nodeValue.length;if(h<=m){u.setStart(p,h),u.setEnd(p,h);break}h-=m}r.removeAllRanges(),r.addRange(u)}#u(){if(this.editorDiv.replaceChildren(),!!this.#e)for(let e of this.#e.split(`
`)){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#a(){return this.#e.replaceAll("\xA0"," ")}static#h(e){return e.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,i){return C(this,null,function*(){let n=null;if(e instanceof sr){let{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:c,rotation:l,id:d,popupRef:u},textContent:h,textPosition:p,parent:{page:{pageNumber:m}}}=e;if(!h||h.length===0)return null;n=e={annotationType:j.FREETEXT,color:Array.from(o),fontSize:a,value:h.join(`
`),position:p,pageIndex:m-1,rect:c.slice(0),rotation:l,id:d,deleted:!1,popupRef:u}}let r=yield Ne(s,this,"deserialize").call(this,e,t,i);return r.#r=e.fontSize,r.#t=M.makeHexColor(...e.color),r.#e=s.#h(e.value),r.annotationElementId=e.id||null,r._initialData=n,r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=s._internalPadding*this.parentScale,i=this.getRect(t,t),n=ot._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),r={annotationType:j.FREETEXT,color:n,fontSize:this.#r,value:this.#a(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!this.#p(r)?null:(r.id=this.annotationElementId,r)}#p(e){let{value:t,fontSize:i,color:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((a,o)=>a!==n[o])||e.pageIndex!==r}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:i}=t;i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#t,t.replaceChildren();for(let r of this.#e.split(`
`)){let a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),t.append(a)}let n=s._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(n,n),popupContent:this.#e}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},T=(()=>{class s{static PRECISION=1e-4;toSVGPath(){Z("Abstract method `toSVGPath` must be implemented.")}get box(){Z("Abstract getter `box` must be implemented.")}serialize(t,i){Z("Abstract method `serialize` must be implemented.")}static _rescale(t,i,n,r,a,o){o||=new Float32Array(t.length);for(let c=0,l=t.length;c<l;c+=2)o[c]=i+t[c]*r,o[c+1]=n+t[c+1]*a;return o}static _rescaleAndSwap(t,i,n,r,a,o){o||=new Float32Array(t.length);for(let c=0,l=t.length;c<l;c+=2)o[c]=i+t[c+1]*r,o[c+1]=n+t[c]*a;return o}static _translate(t,i,n,r){r||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=i+t[a],r[a+1]=n+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,n,r,a){switch(a){case 90:return[1-i/n,t/r];case 180:return[1-t/n,1-i/r];case 270:return[i/n,1-t/r];default:return[t/n,i/r]}}static _normalizePagePoint(t,i,n){switch(n){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,n,r,a,o){return[(t+5*n)/6,(i+5*r)/6,(5*n+a)/6,(5*r+o)/6,(n+a)/2,(r+o)/2]}}return s})(),cr=class s{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#l;#o;#d;#c;#u;#a;#h=[];static#p=8;static#m=2;static#g=s.#p+s.#m;constructor({x:e,y:t},i,n,r,a,o=0){this.#t=i,this.#a=r*n,this.#n=a,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#i=o,this.#c=s.#p*n,this.#d=s.#g*n,this.#u=n,this.#h.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#f(){let e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[i,n,r,a]=this.#t;return[(this.#l+(e[0]-t[0])/2-i)/r,(this.#o+(e[1]-t[1])/2-n)/a,(this.#l+(t[0]-e[0])/2-i)/r,(this.#o+(t[1]-e[1])/2-n)/a]}add({x:e,y:t}){this.#l=e,this.#o=t;let[i,n,r,a]=this.#t,[o,c,l,d]=this.#s.subarray(8,12),u=e-l,h=t-d,p=Math.hypot(u,h);if(p<this.#d)return!1;let m=p-this.#c,f=m/p,b=f*u,g=f*h,v=o,y=c;o=l,c=d,l+=b,d+=g,this.#h?.push(e,t);let _=-g/m,A=b/m,x=_*this.#a,E=A*this.#a;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([l+x,d+E],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([l-x,d-E],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([o+x,c+E],2),this.#r.push(NaN,NaN,NaN,NaN,(o+x-i)/r,(c+E-n)/a),this.#s.set([o-x,c-E],14),this.#e.push(NaN,NaN,NaN,NaN,(o-x-i)/r,(c-E-n)/a)),this.#s.set([v,y,o,c,l,d],6),!this.isEmpty()):(this.#s.set([v,y,o,c,l,d],6),Math.abs(Math.atan2(y-c,v-o)-Math.atan2(g,b))<Math.PI/2?([o,c,l,d]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((o+l)/2-i)/r,((c+d)/2-n)/a),[o,c,v,y]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((v+o)/2-i)/r,((y+c)/2-n)/a),!0):([v,y,o,c,l,d]=this.#s.subarray(0,6),this.#r.push(((v+5*o)/6-i)/r,((y+5*c)/6-n)/a,((5*o+l)/6-i)/r,((5*c+d)/6-n)/a,((o+l)/2-i)/r,((c+d)/2-n)/a),[l,d,o,c,v,y]=this.#s.subarray(12,18),this.#e.push(((v+5*o)/6-i)/r,((y+5*c)/6-n)/a,((5*o+l)/6-i)/r,((5*c+d)/6-n)/a,((o+l)/2-i)/r,((c+d)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";let e=this.#r,t=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#b();let i=[];i.push(`M${e[4]} ${e[5]}`);for(let n=6;n<e.length;n+=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);this.#_(i);for(let n=t.length-6;n>=6;n-=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);return this.#v(i),i.join(" ")}#b(){let[e,t,i,n]=this.#t,[r,a,o,c]=this.#f();return`M${(this.#s[2]-e)/i} ${(this.#s[3]-t)/n} L${(this.#s[4]-e)/i} ${(this.#s[5]-t)/n} L${r} ${a} L${o} ${c} L${(this.#s[16]-e)/i} ${(this.#s[17]-t)/n} L${(this.#s[14]-e)/i} ${(this.#s[15]-t)/n} Z`}#v(e){let t=this.#e;e.push(`L${t[4]} ${t[5]} Z`)}#_(e){let[t,i,n,r]=this.#t,a=this.#s.subarray(4,6),o=this.#s.subarray(16,18),[c,l,d,u]=this.#f();e.push(`L${(a[0]-t)/n} ${(a[1]-i)/r} L${c} ${l} L${d} ${u} L${(o[0]-t)/n} ${(o[1]-i)/r}`)}newFreeDrawOutline(e,t,i,n,r,a){return new lr(e,t,i,n,r,a)}getOutlines(){let e=this.#r,t=this.#e,i=this.#s,[n,r,a,o]=this.#t,c=new Float32Array((this.#h?.length??0)+2);for(let u=0,h=c.length-2;u<h;u+=2)c[u]=(this.#h[u]-n)/a,c[u+1]=(this.#h[u+1]-r)/o;if(c[c.length-2]=(this.#l-n)/a,c[c.length-1]=(this.#o-r)/o,isNaN(i[6])&&!this.isEmpty())return this.#w(c);let l=new Float32Array(this.#r.length+24+this.#e.length),d=e.length;for(let u=0;u<d;u+=2){if(isNaN(e[u])){l[u]=l[u+1]=NaN;continue}l[u]=e[u],l[u+1]=e[u+1]}d=this.#S(l,d);for(let u=t.length-6;u>=6;u-=6)for(let h=0;h<6;h+=2){if(isNaN(t[u+h])){l[d]=l[d+1]=NaN,d+=2;continue}l[d]=t[u+h],l[d+1]=t[u+h+1],d+=2}return this.#E(l,d),this.newFreeDrawOutline(l,c,this.#t,this.#u,this.#i,this.#n)}#w(e){let t=this.#s,[i,n,r,a]=this.#t,[o,c,l,d]=this.#f(),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-n)/a,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-n)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-n)/a,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-n)/a],0),this.newFreeDrawOutline(u,e,this.#t,this.#u,this.#i,this.#n)}#E(e,t){let i=this.#e;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6}#S(e,t){let i=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[r,a,o,c]=this.#t,[l,d,u,h]=this.#f();return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/c,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(n[0]-r)/o,(n[1]-a)/c],t),t+=24}},lr=class extends T{#t;#e=new Float32Array(4);#i;#n;#r;#s;#l;constructor(e,t,i,n,r,a){super(),this.#l=e,this.#r=t,this.#t=i,this.#s=n,this.#i=r,this.#n=a,this.lastPoint=[NaN,NaN],this.#o(a);let[o,c,l,d]=this.#e;for(let u=0,h=e.length;u<h;u+=2)e[u]=(e[u]-o)/l,e[u+1]=(e[u+1]-c)/d;for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-o)/l,t[u+1]=(t[u+1]-c)/d}toSVGPath(){let e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,i=this.#l.length;t<i;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,i,n],r){let a=i-e,o=n-t,c,l;switch(r){case 0:c=T._rescale(this.#l,e,n,a,-o),l=T._rescale(this.#r,e,n,a,-o);break;case 90:c=T._rescaleAndSwap(this.#l,e,t,a,o),l=T._rescaleAndSwap(this.#r,e,t,a,o);break;case 180:c=T._rescale(this.#l,i,t,-a,o),l=T._rescale(this.#r,i,t,-a,o);break;case 270:c=T._rescaleAndSwap(this.#l,i,n,-a,-o),l=T._rescaleAndSwap(this.#r,i,n,-a,-o);break}return{outline:Array.from(c),points:[Array.from(l)]}}#o(e){let t=this.#l,i=t[4],n=t[5],r=i,a=n,o=i,c=n,l=i,d=n,u=e?Math.max:Math.min;for(let p=6,m=t.length;p<m;p+=6){if(isNaN(t[p]))r=Math.min(r,t[p+4]),a=Math.min(a,t[p+5]),o=Math.max(o,t[p+4]),c=Math.max(c,t[p+5]),d<t[p+5]?(l=t[p+4],d=t[p+5]):d===t[p+5]&&(l=u(l,t[p+4]));else{let f=M.bezierBoundingBox(i,n,...t.slice(p,p+6));r=Math.min(r,f[0]),a=Math.min(a,f[1]),o=Math.max(o,f[2]),c=Math.max(c,f[3]),d<f[3]?(l=f[2],d=f[3]):d===f[3]&&(l=u(l,f[2]))}i=t[p+4],n=t[p+5]}let h=this.#e;h[0]=r-this.#i,h[1]=a-this.#i,h[2]=o-r+2*this.#i,h[3]=c-a+2*this.#i,this.lastPoint=[l,d]}get box(){return this.#e}newOutliner(e,t,i,n,r,a=0){return new cr(e,t,i,n,r,a)}getNewOutline(e,t){let[i,n,r,a]=this.#e,[o,c,l,d]=this.#t,u=r*l,h=a*d,p=i*l+o,m=n*d+c,f=this.newOutliner({x:this.#r[0]*u+p,y:this.#r[1]*h+m},this.#t,this.#s,e,this.#n,t??this.#i);for(let b=2;b<this.#r.length;b+=2)f.add({x:this.#r[b]*u+p,y:this.#r[b+1]*h+m});return f.getOutlines()}},Ln=class{#t;#e;#i=[];#n=[];constructor(e,t=0,i=0,n=!0){let r=1/0,a=-1/0,o=1/0,c=-1/0,d=10**-4;for(let{x:g,y:v,width:y,height:_}of e){let A=Math.floor((g-t)/d)*d,x=Math.ceil((g+y+t)/d)*d,E=Math.floor((v-t)/d)*d,R=Math.ceil((v+_+t)/d)*d,D=[A,E,R,!0],W=[x,E,R,!1];this.#i.push(D,W),r=Math.min(r,A),a=Math.max(a,x),o=Math.min(o,E),c=Math.max(c,R)}let u=a-r+2*i,h=c-o+2*i,p=r-i,m=o-i,f=this.#i.at(n?-1:-2),b=[f[0],f[2]];for(let g of this.#i){let[v,y,_]=g;g[0]=(v-p)/u,g[1]=(y-m)/h,g[2]=(_-m)/h}this.#t=new Float32Array([p,m,u,h]),this.#e=b}getOutlines(){this.#i.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);let e=[];for(let t of this.#i)t[3]?(e.push(...this.#d(t)),this.#l(t)):(this.#o(t),e.push(...this.#d(t)));return this.#r(e)}#r(e){let t=[],i=new Set;for(let a of e){let[o,c,l]=a;t.push([o,c,a],[o,l,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){let c=t[a][2],l=t[a+1][2];c.push(l),l.push(c),i.add(c),i.add(l)}let n=[],r;for(;i.size>0;){let a=i.values().next().value,[o,c,l,d,u]=a;i.delete(a);let h=o,p=c;for(r=[o,l],n.push(r);;){let m;if(i.has(d))m=d;else if(i.has(u))m=u;else break;i.delete(m),[o,c,l,d,u]=m,h!==o&&(r.push(h,p,o,p===c?c:l),h=o),p=p===c?l:c}r.push(h,p)}return new bc(n,this.#t,this.#e)}#s(e){let t=this.#n,i=0,n=t.length-1;for(;i<=n;){let r=i+n>>1,a=t[r][0];if(a===e)return r;a<e?i=r+1:n=r-1}return n+1}#l([,e,t]){let i=this.#s(e);this.#n.splice(i,0,[e,t])}#o([,e,t]){let i=this.#s(e);for(let n=i;n<this.#n.length;n++){let[r,a]=this.#n[n];if(r!==e)break;if(r===e&&a===t){this.#n.splice(n,1);return}}for(let n=i-1;n>=0;n--){let[r,a]=this.#n[n];if(r!==e)break;if(r===e&&a===t){this.#n.splice(n,1);return}}}#d(e){let[t,i,n]=e,r=[[t,i,n]],a=this.#s(n);for(let o=0;o<a;o++){let[c,l]=this.#n[o];for(let d=0,u=r.length;d<u;d++){let[,h,p]=r[d];if(!(l<=h||p<=c)){if(h>=c){if(p>l)r[d][1]=l;else{if(u===1)return[];r.splice(d,1),d--,u--}continue}r[d][2]=c,p>l&&r.push([t,l,p])}}}return r}},bc=class extends T{#t;#e;constructor(e,t,i){super(),this.#e=e,this.#t=t,this.lastPoint=i}toSVGPath(){let e=[];for(let t of this.#e){let[i,n]=t;e.push(`M${i} ${n}`);for(let r=2;r<t.length;r+=2){let a=t[r],o=t[r+1];a===i?(e.push(`V${o}`),n=o):o===n&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,t,i,n],r){let a=[],o=i-e,c=n-t;for(let l of this.#e){let d=new Array(l.length);for(let u=0;u<l.length;u+=2)d[u]=e+l[u]*o,d[u+1]=n-l[u+1]*c;a.push(d)}return a}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}},On=class extends cr{newFreeDrawOutline(e,t,i,n,r,a){return new vc(e,t,i,n,r,a)}},vc=class extends lr{newOutliner(e,t,i,n,r,a=0){return new On(e,t,i,n,r,a)}},dr=class s{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#l=null;#o;#d=null;#c=null;#u;static#a=null;static get _keyboardManager(){return H(this,"_keyboardManager",new ai([[["Escape","mac+Escape"],s.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],s.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],s.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],s.prototype._moveToPrevious],[["Home","mac+Home"],s.prototype._moveToBeginning],[["End","mac+End"],s.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#u=V.HIGHLIGHT_COLOR,this.#l=e):(this.#s=!0,this.#u=V.HIGHLIGHT_DEFAULT_COLOR),this.#c=e?._uiManager||t,this.#o=this.#c._eventBus,this.#i=e?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",s.#a||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let e=this.#t=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=this.#c._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#m.bind(this),{signal:t});let i=this.#e=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){let e=this.#n=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){let e=document.createElement("div"),t=this.#c._signal;e.addEventListener("contextmenu",se,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[i,n]of this.#c.highlightColors){let r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=i,r.setAttribute("data-l10n-id",s.#a[i]);let a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=n,r.setAttribute("aria-selected",n===this.#i),r.addEventListener("click",this.#p.bind(this,n),{signal:t}),e.append(r)}return e.addEventListener("keydown",this.#m.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#u,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#t){this.#g(e);return}let t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#b){this.#g(e);return}if(e.target===this.#t){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#t){this.#b&&this._hideDropdownFromKeyboard();return}this.#b||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#b){this.#g(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#b){this.#g(e);return}this.#n.lastChild?.focus()}#m(e){s._keyboardManager.exec(this,e)}#g(e){if(this.#b){this.hideDropdown();return}if(this.#r=e.detail===0,this.#d||(this.#d=new AbortController,window.addEventListener("pointerdown",this.#f.bind(this),{signal:this.#c.combinedSignal(this.#d)})),this.#n){this.#n.classList.remove("hidden");return}let t=this.#n=this.#h();this.#t.append(t)}#f(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#d?.abort(),this.#d=null}get#b(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#b){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#e&&(this.#e.style.backgroundColor=e),!this.#n)return;let t=this.#c.highlightColors.values();for(let i of this.#n.children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}},ur=class s extends ot{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#l=null;#o=0;#d=null;#c=null;#u=null;#a=!1;#h=null;#p;#m=null;#g="";#f;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=j.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let e=s.prototype;return H(this,"_keyboardManager",new ai([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(ct(S({},e),{name:"highlightEditor"})),this.color=e.color||s._defaultColor,this.#f=e.thickness||s._defaultThickness,this.#p=e.opacity||s._defaultOpacity,this.#i=e.boxes||null,this.#b=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#a=!0,this.#_(e),this.#I()):this.#i&&(this.#t=e.anchorNode,this.#e=e.anchorOffset,this.#l=e.focusNode,this.#o=e.focusOffset,this.#v(),this.#I(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#a?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#f,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){let e=new Ln(this.#i,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;let t=new Ln(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=t.getOutlines();let{lastPoint:i}=this.#s;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#_({highlightOutlines:e,highlightId:t,clipPathId:i}){this.#c=e;let n=1.5;if(this.#s=e.getNewOutline(this.#f/2+n,.0025),t>=0)this.#u=t,this.#n=i,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){let d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#u,{bbox:s.#A(this.#c.box,(d-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:s.#A(this.#s.box,d),path:{d:this.#s.toSVGPath()}})}let[r,a,o,c]=e.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=o,this.height=c;break;case 90:{let[d,u]=this.parentDimensions;this.x=a,this.y=1-r,this.width=o*u/d,this.height=c*d/u;break}case 180:this.x=1-r,this.y=1-a,this.width=o,this.height=c;break;case 270:{let[d,u]=this.parentDimensions;this.x=1-a,this.y=r,this.width=o*u/d,this.height=c*d/u;break}}let{lastPoint:l}=this.#s;this.#h=[(l[0]-r)/o,(l[1]-a)/c]}static initialize(e,t){ot.initialize(e,t),s._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case V.HIGHLIGHT_DEFAULT_COLOR:s._defaultColor=t;break;case V.HIGHLIGHT_THICKNESS:s._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case V.HIGHLIGHT_COLOR:this.#w(t);break;case V.HIGHLIGHT_THICKNESS:this.#E(t);break}}static get defaultPropertiesToUpdate(){return[[V.HIGHLIGHT_DEFAULT_COLOR,s._defaultColor],[V.HIGHLIGHT_THICKNESS,s._defaultThickness]]}get propertiesToUpdate(){return[[V.HIGHLIGHT_COLOR,this.color||s._defaultColor],[V.HIGHLIGHT_THICKNESS,this.#f||s._defaultThickness],[V.HIGHLIGHT_FREE,this.#a]]}#w(e){let t=(r,a)=>{this.color=r,this.#p=a,this.parent?.drawLayer.updateProperties(this.#u,{root:{fill:r,"fill-opacity":a}}),this.#r?.updateColor(r)},i=this.color,n=this.#p;this.addCommands({cmd:t.bind(this,e,s._defaultOpacity),undo:t.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#E(e){let t=this.#f,i=n=>{this.#f=n,this.#S(n)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:V.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){return C(this,null,function*(){let e=yield Ne(s.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.highlightColors&&(this.#r=new dr({editor:this}),e.addColorPicker(this.#r)),e):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#R())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#I(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#I(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#S(e){if(!this.#a)return;this.#_({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();let[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}#C(){this.#u===null||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#I(e=this.parent){this.#u===null&&({id:this.#u,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#a},path:{d:this.#c.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#a},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#a),this.#d&&(this.#d.style.clipPath=this.#n))}static#A([e,t,i,n],r){switch(r){case 90:return[1-t-n,e,n,i];case 180:return[1-e-i,1-t-n,i,n];case 270:return[t,1-e-i,n,i]}return[e,t,i,n]}rotate(e){let{drawLayer:t}=this.parent,i;this.#a?(e=(e-this.rotation+360)%360,i=s.#A(this.#c.box,e)):i=s.#A([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#u,{bbox:i,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:s.#A(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#a?e.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});let t=this.#d=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n;let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),zs(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#M(e){s._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#t)return;let t=window.getSelection();e?t.setPosition(this.#t,this.#e):t.setPosition(this.#l,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#a||this.#T(!1))}get _mustFixPosition(){return!this.#a}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#u,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#R(){return this.#a?this.rotation:0}#L(){if(this.#a)return null;let[e,t]=this.pageDimensions,[i,n]=this.pageTranslation,r=this.#i,a=new Float32Array(r.length*8),o=0;for(let{x:c,y:l,width:d,height:u}of r){let h=c*e+i,p=(1-l)*t+n;a[o]=a[o+4]=h,a[o+1]=a[o+3]=p,a[o+2]=a[o+6]=h+d*e,a[o+5]=a[o+7]=p-u*t,o+=8}return a}#j(e){return this.#c.serialize(e,this.#R())}static startHighlighting(e,t,{target:i,x:n,y:r}){let{x:a,y:o,width:c,height:l}=i.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=p=>{d.abort(),this.#y(e,p)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",se,{signal:u}),i.addEventListener("pointermove",this.#x.bind(this,e),{signal:u}),this._freeHighlight=new On({x:n,y:r},[a,o,c,l],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#x(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#y(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,i){return C(this,null,function*(){let n=null;if(e instanceof ar){let{data:{quadPoints:m,rect:f,rotation:b,id:g,color:v,opacity:y,popupRef:_},parent:{page:{pageNumber:A}}}=e;n=e={annotationType:j.HIGHLIGHT,color:Array.from(v),opacity:y,quadPoints:m,boxes:null,pageIndex:A-1,rect:f.slice(0),rotation:b,id:g,deleted:!1,popupRef:_}}else if(e instanceof Pn){let{data:{inkLists:m,rect:f,rotation:b,id:g,color:v,borderStyle:{rawWidth:y},popupRef:_},parent:{page:{pageNumber:A}}}=e;n=e={annotationType:j.HIGHLIGHT,color:Array.from(v),thickness:y,inkLists:m,boxes:null,pageIndex:A-1,rect:f.slice(0),rotation:b,id:g,deleted:!1,popupRef:_}}let{color:r,quadPoints:a,inkLists:o,opacity:c}=e,l=yield Ne(s,this,"deserialize").call(this,e,t,i);l.color=M.makeHexColor(...r),l.#p=c||1,o&&(l.#f=e.thickness),l.annotationElementId=e.id||null,l._initialData=n;let[d,u]=l.pageDimensions,[h,p]=l.pageTranslation;if(a){let m=l.#i=[];for(let f=0;f<a.length;f+=8)m.push({x:(a[f]-h)/d,y:1-(a[f+1]-p)/u,width:(a[f+2]-a[f])/d,height:(a[f+1]-a[f+5])/u});l.#v(),l.#I(),l.rotate(l.rotation)}else if(o){l.#a=!0;let m=o[0],f={x:m[0]-h,y:u-(m[1]-p)},b=new On(f,[0,0,d,u],1,l.#f/2,!0,.001);for(let y=0,_=m.length;y<_;y+=2)f.x=m[y]-h,f.y=u-(m[y+1]-p),b.add(f);let{id:g,clipPathId:v}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:b.toSVGPath()}},!0,!0);l.#_({highlightOutlines:b.getOutlines(),highlightId:g,clipPathId:v}),l.#I()}return l})}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),i=ot._colorManager.convert(this.color),n={annotationType:j.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#f,quadPoints:this.#L(),outlines:this.#j(t),pageIndex:this.pageIndex,rect:t,rotation:this.#R(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#P(n)?null:(n.id=this.annotationElementId,n)}#P(e){let{color:t}=this._initialData;return e.color.some((i,n)=>i!==t[n])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},yc=class{#t=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){this.#t[e]=t}toSVGProperties(){let e=this.#t;return this.#t=Object.create(null),{root:e}}reset(){this.#t=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Z("Not implemented")}},sg=(()=>{class s extends ot{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentDraw=null;static _currentDrawingOptions=null;static _currentParent=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#i(t),this.#s())}#i({drawOutlines:t,drawId:i,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#n(t,this.parent),this.#d(t.box)}#n(t,i){let{id:n}=i.drawLayer.draw(s._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,i){let n=new Set(Object.keys(t));for(let[r,a]of Object.entries(i))n.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Z("Not implemented")}static get typesMap(){Z("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){let n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,i),this._currentParent&&(this._currentDraw.updateProperty(n,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){let n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,i)}static get defaultPropertiesToUpdate(){let t=[],i=this._defaultDrawingOptions;for(let[n,r]of this.typesMap)t.push([n,i[r]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:i}=this;for(let[n,r]of this.constructor.typesMap)t.push([n,i[r]]);return t}_updateProperty(t,i,n){let r=this._drawingOptions,a=r[i],o=c=>{r.updateProperty(i,c);let l=this.#t.updateProperty(i,c);l&&this.#d(l),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:o.bind(this,n),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,s._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#o()),{bbox:this.#c()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,s._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#o()),{bbox:this.#c()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#c(t,i)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,s._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#o(),this.parentDimensions),{bbox:this.#c()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),this.isOnScreen&&this.div.focus())}remove(){this.#r(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#s(),this.#d(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#r()):t&&(this._uiManager.addShouldRescale(this),this.#s(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#r(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#s(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#n(this.#t,t)}}#l([t,i,n,r]){let{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[i,1-t,n*(o/a),r*(a/o)];case 180:return[1-t,1-i,n,r];case 270:return[1-i,t,n*(o/a),r*(a/o)];default:return[t,i,n,r]}}#o(){let{x:t,y:i,width:n,height:r,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-i,t,n*(a/o),r*(o/a)];case 180:return[1-t,1-i,n,r];case 270:return[i,1-t,n*(a/o),r*(o/a)];default:return[t,i,n,r]}}#d(t){if([this.x,this.y,this.width,this.height]=this.#l(t),this.div){this.fixAndSetPosition();let[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)}this._onResized()}#c(){let{x:t,y:i,width:n,height:r,rotation:a,parentRotation:o,parentDimensions:[c,l]}=this;switch((a*4+o)/90){case 1:return[1-i-r,t,r,n];case 2:return[1-t-n,1-i-r,n,r];case 3:return[i,1-t-n,r,n];case 4:return[t,i-n*(c/l),r*(l/c),n*(c/l)];case 5:return[1-i,t,n*(c/l),r*(l/c)];case 6:return[1-t-r*(l/c),1-i,r*(l/c),n*(c/l)];case 7:return[i-n*(c/l),1-t-r*(l/c),n*(c/l),r*(l/c)];case 8:return[t-n,i-r,n,r];case 9:return[1-i,t-n,r,n];case 10:return[1-t,1-i,n,r];case 11:return[i-r,1-t,r,n];case 12:return[t-r*(l/c),i,r*(l/c),n*(c/l)];case 13:return[1-i-n*(c/l),t-r*(l/c),n*(c/l),r*(l/c)];case 14:return[1-t,1-i-n*(c/l),r*(l/c),n*(c/l)];case 15:return[i,1-t,n*(c/l),r*(l/c)];default:return[t,i,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,s._mergeSVGProperties({bbox:this.#c()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t=super.render();t.classList.add("draw");let i=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";let[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,i,n,r,a){Z("Not implemented")}static startDrawing(t,i,n,{target:r,offsetX:a,offsetY:o}){let{viewport:{rotation:c}}=t,{width:l,height:d}=r.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u);if(window.addEventListener("pointerup",p=>{u.abort(),t.toggleDrawing(!0),this._endDraw(p)},{signal:h}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",se,{signal:h}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:h}),t.toggleDrawing(),i._editorUndoBar?.hide(),this._currentDraw){t.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.startNew(a,o,l,d,c));return}i.updateUIForDefaultProperties(this),this._currentDraw=this.createDrawerInstance(a,o,l,d,c),this._currentDrawingOptions=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(this._currentDrawingOptions.toSVGProperties(),this._currentDraw.defaultSVGProperties),!0,!1)}static _drawMove({offsetX:t,offsetY:i}){this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.add(t,i))}static _endDraw({offsetX:t,offsetY:i}){let n=this._currentParent;if(n.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.end(t,i)),this.supportMultipleDrawings){let r=this._currentDraw,a=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(a,r.removeLastElement())},mustExec:!1,type:V.DRAW_STEP});return}this.endDrawing(!1)}static endDrawing(t){let i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(V.DRAW_STEP),!this._currentDraw.isEmpty()){let{pageDimensions:[n,r],scale:a}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:this._currentDraw.getOutlines(n*a,r*a,a,this._INNER_MARGIN),drawingOptions:this._currentDrawingOptions,mustBeCommitted:!t});return this._cleanup(),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(),null}static _cleanup(){this._currentDrawId=-1,this._currentDraw=null,this._currentDrawingOptions=null,this._currentParent=null}createDrawingOptions(t){}static deserializeDraw(t,i,n,r,a,o){Z("Not implemented")}static deserialize(t,i,n){return C(this,null,function*(){let{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}=i.viewport,l=this.deserializeDraw(o,c,r,a,this._INNER_MARGIN,t),d=yield Ne(s,this,"deserialize").call(this,t,i,n);return d.createDrawingOptions(t),d.#i({drawOutlines:l}),d.#s(),d.onScaleChanging(),d.rotate(),d})}serializeDraw(t){let[i,n]=this.pageTranslation,[r,a]=this.pageDimensions;return this.#t.serialize([i,n,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}return s})(),_c=class{#t=new Float64Array(6);#e;#i;#n;#r;#s;#l="";#o=0;#d=new hr;#c;#u;constructor(e,t,i,n,r,a){this.#c=i,this.#u=n,this.#n=r,this.#r=a,[e,t]=this.#a(e,t);let o=this.#e=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t],this.#i=[{line:o,points:this.#s}],this.#t.set(o,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#a(e,t){return T._normalizePoint(e,t,this.#c,this.#u,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}add(e,t){[e,t]=this.#a(e,t);let[i,n,r,a]=this.#t.subarray(2,6),o=e-r,c=t-a;return Math.hypot(this.#c*o,this.#u*c)<=2?null:(this.#s.push(e,t),isNaN(i)?(this.#t.set([r,a,e,t],2),this.#e.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,n,r,a,e,t],0),this.#e.push(...T.createBezierPoints(i,n,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){let i=this.add(e,t);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,n,r){this.#c=i,this.#u=n,this.#n=r,[e,t]=this.#a(e,t);let a=this.#e=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t];let o=this.#i.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#i.push({line:a,points:this.#s}),this.#t.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#e=e.line,this.#s=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#d.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#d.removeLastElement();this.#i.pop(),this.#l="";for(let e=0,t=this.#i.length;e<t;e++){let{line:i,points:n}=this.#i[e];this.#e=i,this.#s=n,this.#o=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){let e=T.svgRound(this.#e[4]),t=T.svgRound(this.#e[5]);if(this.#s.length===2)return this.#l=`${this.#l} M ${e} ${t} Z`,this.#l;if(this.#s.length<=6){let n=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,n)} M ${e} ${t}`,this.#o=6}if(this.#s.length===4){let n=T.svgRound(this.#e[10]),r=T.svgRound(this.#e[11]);return this.#l=`${this.#l} L ${n} ${r}`,this.#o=12,this.#l}let i=[];this.#o===0&&(i.push(`M ${e} ${t}`),this.#o=6);for(let n=this.#o,r=this.#e.length;n<r;n+=6){let[a,o,c,l,d,u]=this.#e.slice(n,n+6).map(T.svgRound);i.push(`C${a} ${o} ${c} ${l} ${d} ${u}`)}return this.#l+=i.join(" "),this.#o=this.#e.length,this.#l}getOutlines(e,t,i,n){let r=this.#i.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#d.build(this.#i,e,t,i,this.#n,this.#r,n),this.#t=null,this.#e=null,this.#i=null,this.#l=null,this.#d}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},hr=class s extends T{#t;#e=0;#i;#n;#r;#s;#l;#o;#d;build(e,t,i,n,r,a,o){this.#r=t,this.#s=i,this.#l=n,this.#o=r,this.#d=a,this.#i=o??0,this.#n=e,this.#a()}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of this.#n){if(e.push(`M${T.svgRound(t[4])} ${T.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12){e.push(`L${T.svgRound(t[10])} ${T.svgRound(t[11])}`);continue}for(let i=6,n=t.length;i<n;i+=6){let[r,a,o,c,l,d]=t.subarray(i,i+6).map(T.svgRound);e.push(`C${r} ${a} ${o} ${c} ${l} ${d}`)}}return e.join("")}serialize([e,t,i,n],r){let a=[],o=[],[c,l,d,u]=this.#u(),h,p,m,f,b,g,v,y,_;switch(this.#o){case 0:_=T._rescale,h=e,p=t+n,m=i,f=-n,b=e+c*i,g=t+(1-l-u)*n,v=e+(c+d)*i,y=t+(1-l)*n;break;case 90:_=T._rescaleAndSwap,h=e,p=t,m=i,f=n,b=e+l*i,g=t+c*n,v=e+(l+u)*i,y=t+(c+d)*n;break;case 180:_=T._rescale,h=e+i,p=t,m=-i,f=n,b=e+(1-c-d)*i,g=t+l*n,v=e+(1-c)*i,y=t+(l+u)*n;break;case 270:_=T._rescaleAndSwap,h=e+i,p=t+n,m=-i,f=-n,b=e+(1-l-u)*i,g=t+(1-c-d)*n,v=e+(1-l)*i,y=t+(1-c)*n;break}for(let{line:A,points:x}of this.#n)a.push(_(A,h,p,m,f,r?new Array(A.length):null)),o.push(_(x,h,p,m,f,r?new Array(x.length):null));return{lines:a,points:o,rect:[b,g,v,y]}}static deserialize(e,t,i,n,r,{paths:{lines:a,points:o},rotation:c,thickness:l}){let d=[],u,h,p,m,f;switch(c){case 0:f=T._rescale,u=-e/i,h=t/n+1,p=1/i,m=-1/n;break;case 90:f=T._rescaleAndSwap,u=-t/n,h=-e/i,p=1/n,m=1/i;break;case 180:f=T._rescale,u=e/i+1,h=-t/n,p=-1/i,m=1/n;break;case 270:f=T._rescaleAndSwap,u=t/n+1,h=e/i+1,p=-1/n,m=-1/i;break}if(!a){a=[];for(let g of o){let v=g.length;if(v===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,g[0],g[1]]));continue}if(v===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,g[0],g[1],NaN,NaN,NaN,NaN,g[2],g[3]]));continue}let y=new Float32Array(3*(v-2));a.push(y);let[_,A,x,E]=g.subarray(0,4);y.set([NaN,NaN,NaN,NaN,_,A],0);for(let R=4;R<v;R+=2){let D=g[R],W=g[R+1];y.set(T.createBezierPoints(_,A,x,E,D,W),(R-2)*3),[_,A,x,E]=[x,E,D,W]}}}for(let g=0,v=a.length;g<v;g++)d.push({line:f(a[g].map(y=>y??NaN),u,h,p,m),points:f(o[g].map(y=>y??NaN),u,h,p,m)});let b=new s;return b.build(d,i,n,1,c,l,r),b}#c(e=this.#d){let t=this.#i+e/2*this.#l;return this.#o%180===0?[t/this.#r,t/this.#s]:[t/this.#s,t/this.#r]}#u(){let[e,t,i,n]=this.#t,[r,a]=this.#c(0);return[e+r,t+a,i-2*r,n-2*a]}#a(){let e=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:n}of this.#n){if(n.length<=12){for(let o=4,c=n.length;o<c;o+=6){let[l,d]=n.subarray(o,o+2);e[0]=Math.min(e[0],l),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],l),e[3]=Math.max(e[3],d)}continue}let r=n[4],a=n[5];for(let o=6,c=n.length;o<c;o+=6){let[l,d,u,h,p,m]=n.subarray(o,o+6);M.bezierBoundingBox(r,a,l,d,u,h,p,m,e),r=p,a=m}}let[t,i]=this.#c();e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#t}updateProperty(e,t){return e==="stroke-width"?this.#h(t):null}#h(e){let[t,i]=this.#c();this.#d=e;let[n,r]=this.#c(),[a,o]=[n-t,r-i],c=this.#t;return c[0]-=a,c[1]-=o,c[2]+=2*a,c[3]+=2*o,c}updateParentDimensions([e,t],i){let[n,r]=this.#c();this.#r=e,this.#s=t,this.#l=i;let[a,o]=this.#c(),c=a-n,l=o-r,d=this.#t;return d[0]-=c,d[1]-=l,d[2]+=2*c,d[3]+=2*l,d}updateRotation(e){return this.#e=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(T.svgRound).join(" ")}get defaultProperties(){let[e,t]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${T.svgRound(e)} ${T.svgRound(t)}`}}}get rotationTransform(){let[,,e,t]=this.#t,i=0,n=0,r=0,a=0,o=0,c=0;switch(this.#e){case 90:n=t/e,r=-e/t,o=e;break;case 180:i=-1,a=-1,o=e,c=t;break;case 270:n=-t/e,r=e/t,c=t;break;default:return""}return`matrix(${i} ${n} ${r} ${a} ${T.svgRound(o)} ${T.svgRound(c)})`}getPathResizingSVGProperties([e,t,i,n]){let[r,a]=this.#c(),[o,c,l,d]=this.#t;if(Math.abs(l-r)<=T.PRECISION||Math.abs(d-a)<=T.PRECISION){let f=e+i/2-(o+l/2),b=t+n/2-(c+d/2);return{path:{"transform-origin":`${T.svgRound(e)} ${T.svgRound(t)}`,transform:`${this.rotationTransform} translate(${f} ${b})`}}}let u=(i-2*r)/(l-2*r),h=(n-2*a)/(d-2*a),p=l/i,m=d/n;return{path:{"transform-origin":`${T.svgRound(o)} ${T.svgRound(c)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${T.svgRound(r)} ${T.svgRound(a)}) scale(${u} ${h}) translate(${T.svgRound(-r)} ${T.svgRound(-a)})`}}}getPathResizedSVGProperties([e,t,i,n]){let[r,a]=this.#c(),o=this.#t,[c,l,d,u]=o;if(o[0]=e,o[1]=t,o[2]=i,o[3]=n,Math.abs(d-r)<=T.PRECISION||Math.abs(u-a)<=T.PRECISION){let b=e+i/2-(c+d/2),g=t+n/2-(l+u/2);for(let{line:v,points:y}of this.#n)T._translate(v,b,g,v),T._translate(y,b,g,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${T.svgRound(e)} ${T.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let h=(i-2*r)/(d-2*r),p=(n-2*a)/(u-2*a),m=-h*(c+r)+e+r,f=-p*(l+a)+t+a;if(h!==1||p!==1||m!==0||f!==0)for(let{line:b,points:g}of this.#n)T._rescale(b,m,f,h,p,b),T._rescale(g,m,f,h,p,g);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${T.svgRound(e)} ${T.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],i){let[n,r]=i,a=this.#t,o=e-a[0],c=t-a[1];if(this.#r===n&&this.#s===r)for(let{line:l,points:d}of this.#n)T._translate(l,o,c,l),T._translate(d,o,c,d);else{let l=this.#r/n,d=this.#s/r;this.#r=n,this.#s=r;for(let{line:u,points:h}of this.#n)T._rescale(u,o,c,l,d,u),T._rescale(h,o,c,l,d,h);a[2]*=l,a[3]*=d}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${T.svgRound(e)} ${T.svgRound(t)}`}}}get defaultSVGProperties(){let e=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${T.svgRound(e[0])} ${T.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}},wc=class s extends yc{#t;constructor(e){super(),this.#t=e,super.updateProperties({fill:"none",stroke:ot._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this.#t.realScale),super.updateSVGProperty(e,t)}clone(){let e=new s(this.#t);return e.updateAll(this),e}},Ac=class s extends sg{static _type="ink";static _editorType=j.INK;static _defaultDrawingOptions=null;constructor(e){super(ct(S({},e),{name:"inkEditor"})),this._willKeepAspectRatio=!0}static initialize(e,t){ot.initialize(e,t),this._defaultDrawingOptions=new wc(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return H(this,"typesMap",new Map([[V.INK_THICKNESS,"stroke-width"],[V.INK_COLOR,"stroke"],[V.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,n,r){return new _c(e,t,i,n,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,n,r,a){return hr.deserialize(e,t,i,n,r,a)}static deserialize(e,t,i){return C(this,null,function*(){let n=null;if(e instanceof Pn){let{data:{inkLists:a,rect:o,rotation:c,id:l,color:d,opacity:u,borderStyle:{rawWidth:h},popupRef:p},parent:{page:{pageNumber:m}}}=e;n=e={annotationType:j.INK,color:Array.from(d),thickness:h,opacity:u,paths:{points:a},boxes:null,pageIndex:m-1,rect:o.slice(0),rotation:c,id:l,deleted:!1,popupRef:p}}let r=yield Ne(s,this,"deserialize").call(this,e,t,i);return r.annotationElementId=e.id||null,r._initialData=n,r})}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:i}){this._drawingOptions=s.getDefaultDrawingOptions({stroke:M.makeHexColor(...e),"stroke-width":t,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:i,rect:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":o}}=this,c={annotationType:j.INK,color:ot._colorManager.convert(r),opacity:a,thickness:o,paths:{lines:t,points:i},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!this.#t(c)?null:(c.id=this.annotationElementId,c)}#t(e){let{color:t,thickness:i,opacity:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,o)=>a!==t[o])||e.thickness!==i||e.opacity!==n||e.pageIndex!==r}renderAnnotationElement(e){let{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t}),null}},xc=class s extends ot{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#l=null;#o=null;#d=null;#c=!1;#u=!1;static _type="stamp";static _editorType=j.STAMP;constructor(e){super(ct(S({},e),{name:"stampEditor"})),this.#n=e.bitmapUrl,this.#r=e.bitmapFile}static initialize(e,t){ot.initialize(e,t)}static get supportedTypes(){return H(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return H(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(j.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#a(e,t=!1){if(!e){this.remove();return}this.#t=e.bitmap,t||(this.#e=e.id,this.#c=e.isSvg),e.file&&(this.#s=e.file.name),this.#m()}#h(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){return C(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!(yield i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:n,width:r,height:a}=e||this.copyCanvas(null,null,!0).imageData,o=yield i.guess({name:"altText",request:{data:n,width:r,height:a,channels:n.length/(r*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");let c=o.output;return yield this.setGuessedAltText(c),t&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c})}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#a(i,!0)).finally(()=>this.#h());return}if(this.#n){let i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(n=>this.#a(n)).finally(()=>this.#h());return}if(this.#r){let i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(n=>this.#a(n)).finally(()=>this.#h());return}let e=document.createElement("input");e.type="file",e.accept=s.supportedTypesStr;let t=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",()=>C(this,null,function*(){if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let n=yield this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#a(n)}i()}),{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#o?.disconnect(),this.#o=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#m():this.#p(),this.width&&!this.annotationElementId){let[i,n]=this.parentDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n)}return this.div}#m(){let{div:e}=this,{width:t,height:i}=this.#t,[n,r]=this.pageDimensions,a=.75;if(this.width)t=this.width*n,i=this.height*r;else if(t>a*n||i>a*r){let d=Math.min(a*n/t,a*r/i);t*=d,i*=d}let[o,c]=this.parentDimensions;this.setDims(t*o/n,i*c/r),this._uiManager.enableWaiting(!1);let l=this.#l=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#b(t,i),this.#_(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&l.setAttribute("aria-label",this.#s)}copyCanvas(e,t,i=!1){e||(e=224);let{width:n,height:r}=this.#t,a=new Sn,o=this.#t,c=n,l=r,d=null;if(t){if(n>t||r>t){let x=Math.min(t/n,t/r);c=Math.floor(n*x),l=Math.floor(r*x)}d=document.createElement("canvas");let h=d.width=Math.ceil(c*a.sx),p=d.height=Math.ceil(l*a.sy);this.#c||(o=this.#f(h,p));let m=d.getContext("2d");m.filter=this._uiManager.hcmFilter;let f="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(f="#8f8f9d",b="#42414d");let g=15,v=g*a.sx,y=g*a.sy,_=new OffscreenCanvas(v*2,y*2),A=_.getContext("2d");A.fillStyle=f,A.fillRect(0,0,v*2,y*2),A.fillStyle=b,A.fillRect(0,0,v,y),A.fillRect(v,y,v,y),m.fillStyle=m.createPattern(_,"repeat"),m.fillRect(0,0,h,p),m.drawImage(o,0,0,o.width,o.height,0,0,h,p)}let u=null;if(i){let h,p;if(a.symmetric&&o.width<e&&o.height<e)h=o.width,p=o.height;else if(o=this.#t,n>e||r>e){let b=Math.min(e/n,e/r);h=Math.floor(n*b),p=Math.floor(r*b),this.#c||(o=this.#f(h,p))}let f=new OffscreenCanvas(h,p).getContext("2d",{willReadFrequently:!0});f.drawImage(o,0,0,o.width,o.height,0,0,h,p),u={width:h,height:p,data:f.getImageData(0,0,h,p).data}}return{canvas:d,width:c,height:l,imageData:u}}#g(e,t){let[i,n]=this.parentDimensions;this.width=e/i,this.height=t/n,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#d!==null&&clearTimeout(this.#d);let r=200;this.#d=setTimeout(()=>{this.#d=null,this.#b(e,t)},r)}#f(e,t){let{width:i,height:n}=this.#t,r=i,a=n,o=this.#t;for(;r>2*e||a>2*t;){let c=r,l=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let d=new OffscreenCanvas(r,a);d.getContext("2d").drawImage(o,0,0,c,l,0,0,r,a),o=d.transferToImageBitmap()}return o}#b(e,t){let i=new Sn,n=Math.ceil(e*i.sx),r=Math.ceil(t*i.sy),a=this.#l;if(!a||a.width===n&&a.height===r)return;a.width=n,a.height=r;let o=this.#c?this.#t:this.#f(n,r),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(o,0,0,o.width,o.height,0,0,n,r)}getImageForAltText(){return this.#l}#v(e){if(e){if(this.#c){let n=this._uiManager.imageManager.getSvgUrl(this.#e);if(n)return n}let t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#c){let[t,i]=this.pageDimensions,n=Math.round(this.width*t*Oe.PDF_TO_CSS_UNITS),r=Math.round(this.height*i*Oe.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,r);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,n,r),a.transferToImageBitmap()}return structuredClone(this.#t)}#_(){this._uiManager._signal&&(this.#o=new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#o.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#o?.disconnect(),this.#o=null},{once:!0}))}static deserialize(e,t,i){return C(this,null,function*(){let n=null;if(e instanceof or){let{data:{rect:m,rotation:f,id:b,structParent:g,popupRef:v},container:y,parent:{page:{pageNumber:_}}}=e,A=y.querySelector("canvas"),x=i.imageManager.getFromCanvas(y.id,A);A.remove();let E=(yield t._structTree.getAriaAttributes(`${Cc}${b}`))?.get("aria-label")||"";n=e={annotationType:j.STAMP,bitmapId:x.id,bitmap:x.bitmap,pageIndex:_-1,rect:m.slice(0),rotation:f,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:E},isSvg:!1,structParent:g,popupRef:v}}let r=yield Ne(s,this,"deserialize").call(this,e,t,i),{rect:a,bitmap:o,bitmapUrl:c,bitmapId:l,isSvg:d,accessibilityData:u}=e;l&&i.imageManager.isValidId(l)?(r.#e=l,o&&(r.#t=o)):r.#n=c,r.#c=d;let[h,p]=r.pageDimensions;return r.width=(a[2]-a[0])/h,r.height=(a[3]-a[1])/p,r.annotationElementId=e.id||null,u&&(r.altTextData=u),r._initialData=n,r.#u=!!n,r})}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i={annotationType:j.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i;let{decorative:n,altText:r}=this.serializeAltText(!1);if(!n&&r&&(i.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){let o=this.#w(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,t===null)return i;t.stamps||=new Map;let a=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#v(!1);else if(this.#c){let o=t.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#v(!1))}return i}#w(e){let{pageIndex:t,accessibilityData:{altText:i}}=this._initialData,n=e.pageIndex===t,r=(e.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&n&&r,isSameAltText:r}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}},rg=(()=>{class s{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#l=!1;#o=!1;#d=null;#c=null;#u=null;#a;static _initialized=!1;static#h=new Map([gc,Ac,xc,ur].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:n,structTreeLayer:r,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:l,viewport:d,l10n:u}){let h=[...s.#h.values()];if(!s._initialized){s._initialized=!0;for(let p of h)p.initialize(u,t)}t.registerEditorTypes(h),this.#a=t,this.pageIndex=i,this.div=n,this.#t=a,this.#i=o,this.viewport=d,this.#c=l,this.drawLayer=c,this._structTree=r,this.#a.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#a.getMode()===j.NONE}updateToolbar(t){this.#a.updateToolbar(t)}updateMode(t=this.#a.getMode()){switch(this.#b(),t){case j.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case j.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case j.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:i}=this.div;for(let n of s.#h.values())i.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#c?.div}setEditingState(t){this.#a.setEditingState(t)}addCommands(t){this.#a.addCommands(t)}cleanUndoStack(t){this.#a.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}enable(){return C(this,null,function*(){this.div.tabIndex=0,this.togglePointerEvents(!0);let t=new Set;for(let n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#a.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#i)return;let i=this.#i.getEditableAnnotations();for(let n of i){if(n.hide(),this.#a.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;let r=yield this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}})}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let t=new Map,i=new Map;for(let r of this.#s.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else i.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#i){let r=this.#i.getEditableAnnotations();for(let a of r){let{id:o}=a.data;if(this.#a.isDeletedAnnotationElement(o))continue;let c=i.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=t.get(o),c&&(this.#a.addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}this.#b(),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let r of s.#h.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#a.getActive()!==t&&this.#a.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#u){this.#u=new AbortController;let t=this.#a.combinedSignal(this.#u);this.#c.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#u&&(this.#u.abort(),this.#u=null,this.#c.div.classList.remove("highlighting"))}#p(t){this.#a.unselectAll();let{target:i}=t;if(i===this.#c.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#c.div.contains(i)){let{isMac:n}=Et.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#a.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),ur.startHighlighting(this,this.#a.direction==="ltr",{target:this.#c.div,x:t.x,y:t.y}),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;let t=this.#a.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);let{annotationElementId:i}=t;i&&this.#a.isDeletedAnnotationElement(i)&&this.#a.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#a.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#a.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#a.addDeletedAnnotationElement(t.annotationElementId),ot.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#a.addEditor(t),this.attach(t),!t.isAttachedToDOM){let i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#a.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let i=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:i,undo:n,mustExec:!1})}getNextId(){return this.#a.getId()}get#m(){return s.#h.get(this.#a.getMode())}combinedSignal(t){return this.#a.combinedSignal(t)}#g(t){let i=this.#m;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#m?.canCreateNewEmptyEditor()}pasteEditor(t,i){this.#a.updateToolbar(t),this.#a.updateMode(t);let{offsetX:n,offsetY:r}=this.#f(),a=this.getNextId(),o=this.#g(S({parent:this,id:a,x:n,y:r,uiManager:this.#a,isCentered:!0},i));o&&this.add(o)}deserialize(t){return C(this,null,function*(){return(yield s.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#a))||null})}createAndAddNewEditor(t,i,n={}){let r=this.getNextId(),a=this.#g(S({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#a,isCentered:i},n));return a&&this.add(a),a}#f(){let{x:t,y:i,width:n,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,t),o=Math.max(0,i),c=Math.min(window.innerWidth,t+n),l=Math.min(window.innerHeight,i+r),d=(a+c)/2-t,u=(o+l)/2-i,[h,p]=this.viewport.rotation%180===0?[d,u]:[u,d];return{offsetX:h,offsetY:p}}addNewEditor(){this.createAndAddNewEditor(this.#f(),!0)}setSelected(t){this.#a.setSelected(t)}toggleSelected(t){this.#a.toggleSelected(t)}unselect(t){this.#a.unselect(t)}pointerup(t){let{isMac:i}=Et.platform;if(!(t.button!==0||t.ctrlKey&&i)&&t.target===this.div&&this.#l&&(this.#l=!1,!(this.#m?.isDrawer&&this.#m.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#a.getMode()===j.STAMP){this.#a.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#a.getMode()===j.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}let{isMac:i}=Et.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#l=!0,this.#m?.isDrawer){this.startDrawingSession(t);return}let n=this.#a.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#d){this.#m.startDrawing(this,this.#a,!1,t);return}this.#a.setCurrentDrawingSession(this),this.#d=new AbortController;let i=this.#a.combinedSignal(this.#d);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&this.commitOrRemove()},{signal:i}),this.#m.startDrawing(this,this.#a,!1,t)}endDrawingSession(t=!1){return this.#d?(this.#a.setCurrentDrawingSession(null),this.#d.abort(),this.#d=null,this.#m.endDrawing(t)):null}findNewParent(t,i,n){let r=this.#a.findParent(i,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#d?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#d&&this.#m.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(let t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#a.removeLayer(this)}#b(){for(let t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ri(this.div,t);for(let i of this.#a.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#a.commitOrRemove(),this.#b();let i=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ri(this.div,{rotation:n}),i!==n)for(let r of this.#s.values())r.rotate(n)}get pageDimensions(){let{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#a.viewParameters.realScale}}return s})(),Ec=class s{#t=null;#e=0;#i=new Map;#n=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#t){this.#t=e;return}if(this.#t!==e){if(this.#i.size>0)for(let t of this.#i.values())t.remove(),e.append(t);this.#t=e}}static get _svgFactory(){return H(this,"_svgFactory",new kn)}static#r(e,[t,i,n,r]){let{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*n}%`,a.height=`${100*r}%`}#s(){let e=s._svgFactory.create(1,1,!0);return this.#t.append(e),e.setAttribute("aria-hidden",!0),e}#l(e,t){let i=s._svgFactory.createElement("clipPath");e.append(i);let n=`clip_${t}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");let r=s._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),n}#o(e,t){for(let[i,n]of Object.entries(t))n===null?e.removeAttribute(i):e.setAttribute(i,n)}draw(e,t=!1,i=!1){let n=this.#e++,r=this.#s(),a=s._svgFactory.createElement("defs");r.append(a);let o=s._svgFactory.createElement("path");a.append(o);let c=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#n.set(n,o);let l=i?this.#l(a,c):null,d=s._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(r,e),this.#i.set(n,r),{id:n,clipPathId:`url(#${l})`}}drawOutline(e,t){let i=this.#e++,n=this.#s(),r=s._svgFactory.createElement("defs");n.append(r);let a=s._svgFactory.createElement("path");r.append(a);let o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){let u=s._svgFactory.createElement("mask");r.append(u),c=`mask_p${this.pageIndex}_${i}`,u.setAttribute("id",c),u.setAttribute("maskUnits","objectBoundingBox");let h=s._svgFactory.createElement("rect");u.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");let p=s._svgFactory.createElement("use");u.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}let l=s._svgFactory.createElement("use");n.append(l),l.setAttribute("href",`#${o}`),c&&l.setAttribute("mask",`url(#${c})`);let d=l.cloneNode();return n.append(d),l.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(n,e),this.#i.set(i,n),i}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:i,bbox:n,rootClass:r,path:a}=t,o=typeof e=="number"?this.#i.get(e):e;if(o){if(i&&this.#o(o,i),n&&s.#r(o,n),r){let{classList:c}=o;for(let[l,d]of Object.entries(r))c.toggle(l,d)}if(a){let l=o.firstChild.firstChild;this.#o(l,a)}}}updateParent(e,t){if(t===this)return;let i=this.#i.get(e);i&&(t.#t.append(i),this.#i.delete(e),t.#i.set(e,i))}remove(e){this.#n.delete(e),this.#t!==null&&(this.#i.get(e).remove(),this.#i.delete(e))}destroy(){this.#t=null;for(let e of this.#i.values())e.remove();this.#i.clear(),this.#n.clear()}};globalThis.pdfjsTestingUtils={HighlightOutliner:Ln};var Ky=O.AbortException,Zy=O.AnnotationEditorLayer,Qy=O.AnnotationEditorParamsType,Jy=O.AnnotationEditorType,t_=O.AnnotationEditorUIManager,e_=O.AnnotationLayer,i_=O.AnnotationMode,n_=O.ColorPicker,s_=O.DOMSVGFactory,r_=O.DrawLayer,a_=O.FeatureTest,ju=O.GlobalWorkerOptions,o_=O.ImageKind,c_=O.InvalidPDFException,l_=O.MissingPDFException,d_=O.OPS,u_=O.OutputScale,h_=O.PDFDataRangeTransport,p_=O.PDFDateString,m_=O.PDFWorker,f_=O.PasswordResponses,g_=O.PermissionFlag,b_=O.PixelsPerInch,v_=O.RenderingCancelledException,y_=O.TextLayer,__=O.UnexpectedResponseException,w_=O.Util,A_=O.VerbosityLevel,x_=O.XfaLayer,E_=O.build,S_=O.createValidAbsoluteUrl,C_=O.fetchData,Bu=O.getDocument,T_=O.getFilenameFromUrl,I_=O.getPdfFilenameFromUrl,M_=O.getXfaPageViewport,R_=O.isDataScheme,k_=O.isPdfFile,D_=O.noContextMenu,P_=O.normalizeUnicode,L_=O.setLayerDimensions,O_=O.shadow,F_=O.stopEvent,N_=O.version;function cg(s,e){s&1&&(z(0,"div",4),dt(1,"mat-spinner",5),B())}function lg(s,e){if(s&1&&(z(0,"mat-card",8)(1,"mat-card-header")(2,"mat-card-title"),At(3),B()(),dt(4,"img",9),B()),s&2){let t=e.$implicit,i=e.index;K(3),We("Page ",i+1,""),K(),wt("src",t,el)("alt","Page "+(i+1))}}function dg(s,e){if(s&1&&(z(0,"div",6),Wt(1,lg,5,3,"mat-card",7),B()),s&2){let t=ve();K(),wt("ngForOf",t.pages)}}function ug(s,e){if(s&1&&(z(0,"div",10),At(1),B()),s&2){let t=ve();K(),We(" ",t.error," ")}}ju.workerSrc=new URL("pdfjs-dist/build/pdf.worker.mjs",import.meta.url).toString();var wr=class s{file=null;pages=[];isLoading=!1;error=null;ngOnChanges(e){e.file&&this.file&&this.loadPdfPreview()}loadPdfPreview(){return C(this,null,function*(){if(this.file){this.isLoading=!0,this.error=null,this.pages=[];try{let e=yield this.file.arrayBuffer(),t=yield Bu(e).promise,i=[];for(let n=1;n<=t.numPages;n++)i.push(this.renderPage(t,n));this.pages=yield Promise.all(i)}catch(e){console.error("Error loading PDF preview:",e),this.error="Failed to load PDF preview"}finally{this.isLoading=!1}}})}renderPage(e,t){return C(this,null,function*(){let i=yield e.getPage(t),r=i.getViewport({scale:.5}),a=document.createElement("canvas"),o=a.getContext("2d");if(!o)throw new Error("Could not get canvas context");return a.width=r.width,a.height=r.height,yield i.render({canvasContext:o,viewport:r}).promise,a.toDataURL()})}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=tt({type:s,selectors:[["app-pdf-preview"]],inputs:{file:"file"},features:[Ni],decls:4,vars:3,consts:[[1,"preview-container"],["class","loading-overlay",4,"ngIf"],["class","pages-grid",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"loading-overlay"],["diameter","40"],[1,"pages-grid"],["class","page-preview",4,"ngFor","ngForOf"],[1,"page-preview"],[3,"src","alt"],[1,"error-message"]],template:function(t,i){t&1&&(z(0,"div",0),Wt(1,cg,2,0,"div",1)(2,dg,2,1,"div",2)(3,ug,2,1,"div",3),B()),t&2&&(K(),wt("ngIf",i.isLoading),K(),wt("ngIf",i.pages.length),K(),wt("ngIf",i.error))},dependencies:[Hi,gl,Yn,Rs,Ts,Ms,Is,hu,uu],styles:[".preview-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;background:#fffc;z-index:1}.pages-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;padding:16px}.page-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}.error-message[_ngcontent-%COMP%]{color:var(--mat-warn-500);text-align:center;padding:16px}"]})};var zu={selectedFile:null,isProcessing:!1,error:null},Ar=class s{state=new St(zu);get state$(){return this.state.asObservable()}setSelectedFile(e){this.updateState({selectedFile:e,error:null})}setProcessing(e){this.updateState({isProcessing:e})}setError(e){this.updateState({error:e})}reset(){this.state.next(zu)}updateState(e){this.state.next(S(S({},this.state.value),e))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})};function pg(s,e){s&1&&dt(0,"mat-progress-bar",10)}function mg(s,e){if(s&1&&(z(0,"div",7)(1,"p"),At(2),B(),Wt(3,pg,1,0,"mat-progress-bar",8),qe(4,"async"),dt(5,"app-pdf-preview",9),B()),s&2){let t,i=e.ngIf,n=ve();K(2),We("Selected file: ",i.name,""),K(),wt("ngIf",(t=Xe(4,3,n.state$))==null?null:t.isProcessing),K(2),wt("file",i)}}function fg(s,e){if(s&1&&(z(0,"p",11),At(1),qe(2,"async"),B()),s&2){let t,i=ve();K(),We(" ",(t=Xe(2,1,i.state$))==null?null:t.error," ")}}var xr=class s{constructor(e){this.pdfSplitterService=e;this.state$=this.pdfSplitterService.state$}state$;ngOnInit(){this.pdfSplitterService.reset()}onFileSelected(e){let t=e.target;t.files?.length&&this.pdfSplitterService.setSelectedFile(t.files[0])}splitPdf(){return C(this,null,function*(){this.pdfSplitterService.setProcessing(!0);try{console.log("Splitting PDF:",(yield this.state$.toPromise())?.selectedFile?.name)}catch(e){this.pdfSplitterService.setError("Failed to split PDF"),console.error("Error splitting PDF:",e)}finally{this.pdfSplitterService.setProcessing(!1)}})}static \u0275fac=function(t){return new(t||s)(Or(Ar))};static \u0275cmp=tt({type:s,selectors:[["app-pdf-splitter"]],decls:26,vars:11,consts:[["fileInput",""],["mat-card-avatar",""],["class","file-info",4,"ngIf"],["class","error-message",4,"ngIf"],["type","file","accept",".pdf",2,"display","none",3,"change"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"file-info"],["mode","indeterminate","color","primary",4,"ngIf"],[3,"file"],["mode","indeterminate","color","primary"],[1,"error-message"]],template:function(t,i){if(t&1){let n=cl();z(0,"mat-card")(1,"mat-card-header")(2,"mat-icon",1),At(3,"file_copy"),B(),z(4,"mat-card-title"),At(5,"PDF Splitter"),B(),z(6,"mat-card-subtitle"),At(7,"Split PDF into single pages"),B()(),z(8,"mat-card-content"),Wt(9,mg,6,5,"div",2),qe(10,"async"),Wt(11,fg,3,3,"p",3),qe(12,"async"),B(),z(13,"mat-card-actions")(14,"input",4,0),hi("change",function(a){return Un(n),zn(i.onFileSelected(a))}),B(),z(16,"button",5),hi("click",function(){Un(n);let a=qn(15);return zn(a.click())}),z(17,"mat-icon"),At(18,"upload_file"),B(),At(19," Select PDF "),B(),z(20,"button",6),qe(21,"async"),qe(22,"async"),hi("click",function(){return Un(n),zn(i.splitPdf())}),z(23,"mat-icon"),At(24,"call_split"),B(),At(25," Split PDF "),B()()()}if(t&2){let n,r,a;K(9),wt("ngIf",(n=Xe(10,3,i.state$))==null?null:n.selectedFile),K(2),wt("ngIf",(r=Xe(12,5,i.state$))==null?null:r.error),K(9),wt("disabled",!((a=Xe(21,7,i.state$))!=null&&a.selectedFile)||((a=Xe(22,9,i.state$))==null?null:a.isProcessing))}},dependencies:[Hi,Yn,vl,eu,tu,Cs,Ss,Rs,Ts,su,ru,iu,Ms,nu,Is,lu,cu,wr],styles:["mat-card[_ngcontent-%COMP%]{max-width:600px;margin:20px auto}mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px}.file-info[_ngcontent-%COMP%]{padding:16px}.error-message[_ngcontent-%COMP%]{color:var(--mat-warn-500);padding:8px 16px}"]})};var Er=class s{static \u0275fac=function(t){return new(t||s)};static \u0275cmp=tt({type:s,selectors:[["app-root"]],decls:7,vars:0,consts:[["color","primary"],[2,"margin-left","8px"],[1,"content"]],template:function(t,i){t&1&&(z(0,"mat-toolbar",0)(1,"mat-icon"),At(2,"picture_as_pdf"),B(),z(3,"span",1),At(4,"PDF Tools"),B()(),z(5,"main",2),dt(6,"app-pdf-splitter"),B())},dependencies:[Jd,Qd,Cs,Ss,xr],styles:[".content[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}mat-toolbar[_ngcontent-%COMP%]{margin-bottom:16px}"]})};jl(Er,Cd).catch(s=>console.error(s));
